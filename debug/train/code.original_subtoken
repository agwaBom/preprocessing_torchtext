def get flashed messages with categories False category filter [] flashes request ctx stack top flashesif flashes is None request ctx stack top flashes flashes session pop ' flashes' if ' flashes' in session else [] if category filter flashes list filter lambda f f[ 0 ] in category filter flashes if not with categories return [x[ 1 ] for x in flashes]return flashes
def install translator qapp global QT TRANSLATO Rif QT TRANSLATOR is None qt translator Q Translator if qt translator load 'qt ' + Q Locale system name Q Library Info location Q Library Info Translations Path QT TRANSLATOR qt translatorif QT TRANSLATOR is not None qapp install Translator QT TRANSLATOR
def delete dhcp options dhcp options id None dhcp options name None region None key None keyid None profile None return delete resource resource 'dhcp options' name dhcp options name resource id dhcp options id region region key key keyid keyid profile profile
def import module name required True try import name globals locals [] except Import Error if not required and module not found return Noneraisereturn sys modules[name]
def test depth first mro class A object passclass B A passclass C A passclass D B C passclass E D object passclass G object passclass H G passclass I G passclass K H I object passclass L K E pass Are Equal L mro L K H I G E D B C A object
def mapping data source geom name 'geom' layer key 0 multi geom False if isinstance data source str data source Data Source data source elif isinstance data source Data Source passelse raise Type Error ' Datasourceparametermustbeastringora Data Sourceobject ' mapping {}for field in data source[layer key] fields mfield field lower if mfield[ -1 ] ' ' mfield + 'field' mapping[mfield] fieldgtype data source[layer key] geom typeif multi geom gtype to multi mapping[geom name] str gtype upper return mapping
def patfilter names pat if pat not in pat cache pat cache[pat] re compile translate pattern pat match pat cache[pat] matchreturn filter match names
def test pprint npfloat 32 dat np array [1 0 2 0] dtype np float 32 t Table [dat] names ['a'] t['a'] format '5 2f'assert str t['a'] 'a\n-----\n 1 00 \n 2 00 '
def test interpolation Chart chart Chart interpolate 'cubic' chart add '1 ' [1 3 12 3 4] chart add '2 ' [7 -4 10 None 8 3 1] q chart render pyquery assert len q ' legend' 2
def save and remove module name orig modules if name not in sys modules import name del sys modules[name]for modname in list sys modules if modname name or modname startswith name + ' ' orig modules[modname] sys modules[modname]del sys modules[modname]
def get minions conn get conn ret None cur conn cursor sql 'SELECTDISTINC Tid FRO Msalt returns'cur execute sql data cur fetchall ret []for minion in data ret append minion[ 0 ] close conn conn return ret
def run migrations offline engine manager Engine Manager config get required 'DATABASE HOSTS' config get required 'DATABASE USERS' include disabled True engine engine manager engines[shard id]context configure engine engine url engine url with context begin transaction context run migrations
def url 2 ip url iport urlsplit url [1 ] split ' ' if len iport > 1 return gethostbyname iport[ 0 ] iport[ 1 ] return gethostbyname iport[ 0 ]
def wait until running instance with start action action type u'flocker provision aws wait until running' instance id instance id as context poll while lambda node is booting instance repeat 1 INSTANCE TIMEOUT context add success fields instance state instance state context add success fields instance state reason instance state reason if instance state u'running' raise Failed To Run instance state reason
def dict to numpy array d mapping None try return dict to numpy array 2 d mapping except Attribute Error Type Error return dict to numpy array 1 d mapping
def is suggestion handled thread id exploration id thread feedback models Feedback Thread Model get by exp and thread id exploration id thread id return thread status in [feedback models STATUS CHOICES FIXED feedback models STATUS CHOICES IGNORED]
def get default tempdir namer Random Name Sequence dirlist candidate tempdir list for dir in dirlist if dir os curdir dir os path abspath dir for seq in range 100 name next namer filename os path join dir name try fd os open filename bin openflags 384 try try with io open fd 'wb' closefd False as fp fp write 'blat' finally os close fd finally os unlink filename return direxcept File Exists Error passexcept Permission Error if os name 'nt' and os path isdir dir and os access dir os W OK continuebreakexcept OS Error breakraise File Not Found Error errno ENOENT ' Nousabletemporarydirectoryfoundin%s' % dirlist
def get default site app name 'filebrowser' resolver get resolver get urlconf name 'filebrowser'app list resolver app dict[app name]if name not in app list name app list[ 0 ]return get site dict [name]
def ccovf x y unbiased True demean True n len x if demean xo x - x mean yo y - y mean else xo xyo yif unbiased xi np ones n d np correlate xi xi 'full' else d nreturn np correlate xo yo 'full' / d [ n - 1 ]
def load plugins config paths config['pluginpath'] get confit Str Seq split False paths map util normpath paths import beetsplugbeetsplug path paths + beetsplug path sys path + pathsplugins load plugins config['plugins'] as str seq plugins send 'pluginload' return plugins
def serializers opts return Lazy Loader module dirs opts 'serializers' opts tag 'serializers'
def rgb 2 short r g b dist lambda s d s[ 0 ] - d[ 0 ] ** 2 + s[ 1 ] - d[ 1 ] ** 2 + s[ 2 ] - d[ 2 ] ** 2 ary [hex to rgb hex for hex in RGB 2 SHORT DICT]m min ary key partial dist r g b return RGB 2 SHORT DICT[rgb to hex m ]
@deprecated Version ' Twisted' 15 3 0 replacement 'twisted web template' def output func *args **kw try return func *args **kw except log msg ' Errorcalling%r ' % func log err return PRE ' Anerroroccurred '
@register filter is safe True def pprint value try return pformat value except Exception as e return u' Errorinformatting %s' % force text e errors u'replace'
def gf factor sqf f p K method None lc f gf monic f p K if gf degree f < 1 return lc [] method method or query 'GF FACTOR METHOD' if method is not None factors factor methods[method] f p K else factors gf zassenhaus f p K return lc factors
def all iterable for element in iterable if not element return Falsereturn True
def draw nx G pos **kwds draw G pos **kwds
def start clientbrowser config args logger info ' Startclientmode browser ' global clientfrom glances client browser import Glances Client Browserclient Glances Client Browser config config args args client serve forever client end
@raises Value Error def test bootstrap arglength algo bootstrap np arange 5 np arange 10
def runwsgi func if os environ has key 'SERVER SOFTWARE' os environ['FCGI FORCE CGI'] 'Y'if os environ has key 'PHP FCGI CHILDREN' or os environ has key 'SERVER SOFTWARE' return runfcgi func if 'scgi' in sys argv return runscgi func return runsimple func listget sys argv 1 8080
def random bucket name prefix 'awscli-s 3 integ-' num random 10 return prefix + random chars num random
def proxy process proxyname test changes old []changes new []if not is proxy running proxyname if not test salt ['cmd run all'] 'salt-proxy--proxyid {0 }-linfo-d' format salt ext six moves shlex quote proxyname timeout 5 changes new append ' Salt Proxy Startedproxyprocessfor{ 0 }' format proxyname else changes new append ' Salt Proxy process{ 0 }willbestarted' format proxyname else changes old append ' Salt Proxy alreadyrunningfor{ 0 }' format proxyname return True changes new changes old
def offset or limit clause element name None type None if element is None return Noneelif hasattr element ' clause element ' return element clause element elif isinstance element Visitable return elementelse value util asint element return Offset Limit Param name value type type unique True
def get cron info owner 'root'if grains ['os'] ' Free BSD' group 'wheel'crontab dir '/var/spool/incron'elif grains ['os'] ' Open BSD' group 'crontab'crontab dir '/var/spool/incron'elif grains get 'os family' ' Solaris' group 'root'crontab dir '/var/spool/incron'else group 'root'crontab dir '/var/spool/incron'return owner group crontab dir
def retrieve device config return salt ['snmp config']
def normalize formset dict formset attr list assert isinstance formset Base Simple Form Set res []for form in formset forms res append normalize form dict form attr list return res
def parse strtime timestr fmt PERFECT TIME FORMAT return datetime datetime strptime timestr fmt
def hash filehash filename md 4 hashlib new u'md 4 ' copydef gen f while True x f read 9728000 if x yield x else returndef md 4 hash data m md 4 m update data return mwith open filename u'rb' as f a gen f hashes [md 4 hash data digest for data in a]if len hashes 1 return to hex hashes[ 0 ] else return md 4 hash reduce lambda a d a + d hashes u'' hexd
def flatten struct if struct is None return []flat []if isinstance struct dict for result in six iteritems struct flat + flatten result return flatif isinstance struct six string types return [struct]try iterator iter struct except Type Error return [struct]for result in iterator flat + flatten result return flat
@receiver user logged in def log successful login sender request user **kwargs if settings FEATURES['SQUELCH PII IN LOGS'] AUDIT LOG info u' Loginsuccess-user id {0 }' format user id else AUDIT LOG info u' Loginsuccess-{ 0 } {1 } ' format user username user email
def create connection dest pair proxy type None proxy addr None proxy port None proxy username None proxy password None timeout None sock socksocket if isinstance timeout int float sock settimeout timeout sock set proxy proxy type proxy addr proxy port proxy username proxy password sock connect dest pair return sock
@taskdef setup ctx copy settings ctx addons True packages ctx requirements ctx addons True dev True build js config files ctx assets ctx dev True watch False
def get name name or obj if isinstance name or obj six string types return name or objtry return name or obj nameexcept Attribute Error raise exc Missing Name name or obj
def zoom effect 02 ax 1 ax 2 **kwargs tt ax 1 trans Scale + ax 1 trans Limits + ax 2 trans Axes trans blended transform factory ax 2 trans Data tt mybbox 1 ax 1 bboxmybbox 2 Transformed Bbox ax 1 view Lim trans prop patches kwargs copy prop patches['ec'] 'none'prop patches['alpha'] 0 2 c1 c2 bbox patch 1 bbox patch 2 p connect bbox mybbox 1 mybbox 2 loc 1 a 3 loc 2 a 2 loc 1 b 4 loc 2 b 1 prop lines kwargs prop patches prop patches ax 1 add patch bbox patch 1 ax 2 add patch bbox patch 2 ax 2 add patch c1 ax 2 add patch c2 ax 2 add patch p return c1 c2 bbox patch 1 bbox patch 2 p
def expand table table return np repeat [[ 1 1] [1 0] [0 1] [0 0]] table ravel axis 0
def load extra data backend details response uid user social user None *args **kwargs social user social user or User Social Auth get social auth backend name uid user if social user extra data backend extra data user uid response details if kwargs get 'original email' and 'email' not in extra data extra data['email'] kwargs get 'original email' if extra data and social user extra data extra data if social user extra data social user extra data update extra data else social user extra data extra datasocial user save return {'social user' social user}
def arbitrary module name func name args kwargs {} if module name startswith 'calibre plugins' from calibre customize ui import find pluginfind pluginmodule importlib import module module name func getattr module func name return func *args **kwargs
def cla Model Control Disable TP Learning Cb cla Model assert isinstance cla Model CLA Model cla Model get TP Region set Parameter 'learning Mode' False return
def create api deployment rest Api Id stage Name stage Description '' description '' cache Cluster Enabled False cache Cluster Size '0 5' variables None region None key None keyid None profile None try variables dict if variables is None else variables conn get conn region region key key keyid keyid profile profile deployment conn create deployment rest Api Id rest Api Id stage Name stage Name stage Description stage Description description description cache Cluster Enabled cache Cluster Enabled cache Cluster Size cache Cluster Size variables variables return {'created' True 'deployment' convert datetime str deployment }except Client Error as e return {'created' False 'error' salt utils boto 3 get error e }
def point along a line x0 y0 x1 y1 d dx dy x0 - x1 y0 - y1 ff d / dx * dx + dy * dy ** 0 5 x2 y2 x0 - ff * dx y0 - ff * dy return x2 y2
def s3 roles permitted name 'roles permitted' **attr T current Trepresent S3 Represent lookup 'auth group' fields ['role'] if 'label' not in attr attr['label'] T ' Roles Permitted' if 'sortby' not in attr attr['sortby'] 'role'if 'represent' not in attr attr['represent'] representif 'requires' not in attr attr['requires'] IS EMPTY OR IS ONE OF current db 'auth group id' represent multiple True if 'comment' not in attr attr['comment'] DIV class 'tooltip' title '%s %s' % T ' Roles Permitted' T ' Ifthisrecordshouldberestrictedthenselectwhichrole s arepermittedtoaccesstherecordhere ' if 'ondelete' not in attr attr['ondelete'] 'RESTRICT'f S3 Reusable Field name 'list referenceauth group' **attr return f
def cert from key info key info ignore age False res []for x509 data in key info x509 data x509 certificate x509 data x509 certificatecert x509 certificate text strip cert '\n' join split len '' join [s strip for s in cert split ] 64 if ignore age or active cert cert res append cert else logger info ' Inactivecert' return res
def instance group update context group uuid values return IMPL instance group update context group uuid values
def tree to bitstrs tree clades bitstrs {}term names [term name for term in tree find clades terminal True ]for clade in tree find clades terminal False bitstr clade to bitstr clade term names clades bitstrs[clade] bitstrreturn clades bitstrs
def timeuntil value arg None from django utils timesince import timesincefrom datetime import datetimeif not value return ''if arg return timesince arg value return timesince datetime now value
def main module Ansible Module argument spec {'table' {'required' True} 'record' {'required' True} 'col' {'required' True} 'key' {'required' True} 'value' {'required' True} 'timeout' {'default' 5 'type' 'int'}} supports check mode True params set module
def test hashbang entry tokenize '# thisisacomment\n' assert entry []
def add Begin XML Tag attributes depth local Name output text '' depth Start ' DCTB ' * depth output write '%s<%s%s>%s\n' % depth Start local Name get Attributes String attributes text
def virtual if opts ['master tops'] get 'ext nodes' return Truereturn False
def exists name with settings hide 'running' 'stdout' 'warnings' warn only True return run 'getentpasswd% name s' % locals succeeded
def disassociate api key stagekeys api Key stagekeyslist region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile pvlist [ '/stages' stagekey for stagekey in stagekeyslist]response api key patch remove conn api Key pvlist return {'disassociated' True}except Client Error as e return {'disassociated' False 'error' salt utils boto 3 get error e }
@then u'weseedatabasedropped' def step see db dropped context expect exact context u'DROPDATABASE' timeout 2
@bdd when bdd parsers parse ' Iwaitforthejavascriptmessage"{message}"' def javascript message when quteproc message quteproc wait for js message
def git Present try gitvers subprocess check output 'git--version' split stderr subprocess PIPE except Called Process Error OS Error gitvers ''return bool gitvers startswith 'gitversion'
def create mount target filesystemid subnetid ipaddress None securitygroups None keyid None key None profile None region None **kwargs client get conn key key keyid keyid profile profile region region return client create mount point File System Id filesystemid Subnet Id subnetid Ip Address ipaddress Security Groups securitygroups
def Is Auto Generated xml str try xml root Element Tree fromstring xml str return xml root tag 'datastore-indexes' and Boolean Attribute xml root attrib get 'auto Generate' 'false' except Element Tree Parse Error return False
def jnp zeros n nt return jnyn zeros n nt [1 ]
def get Tooth Profile Rack derivation addendum Side derivation quarter Wavelength - derivation addendum * derivation tan Pressure addendum Complex complex addendum Side derivation addendum dedendum Side derivation quarter Wavelength + derivation dedendum * derivation tan Pressure dedendum Complex complex dedendum Side - derivation dedendum tooth Profile [dedendum Complex]if derivation root Bevel > 0 0 mirror Point complex derivation wavelength - dedendum Side - derivation dedendum tooth Profile get Bevel Path addendum Complex derivation root Bevel dedendum Complex mirror Point if derivation tip Bevel > 0 0 mirror Point complex - addendum Complex real addendum Complex imag bevel Path get Bevel Path dedendum Complex derivation tip Bevel addendum Complex mirror Point bevel Path reverse tooth Profile + bevel Pathelse tooth Profile append addendum Complex return euclidean get Mirror Path get Thickness Multiplied Path tooth Profile derivation tooth Thickness Multiplier
def set time time time format get date time format time dt obj datetime strptime time time format cmd 'systemsetup-settime{ 0 }' format dt obj strftime '%H %M %S' return salt utils mac utils execute return success cmd
def del job files job paths for path in job paths if path and clip path path lower startswith cfg download dir get path lower remove all path recursive True
def get discount modules return load module instances 'SHUUP DISCOUNT MODULES' 'discount module'
def showwarning message category filename lineno file None if file is None file sys stderrtry file write formatwarning message category filename lineno except IO Error pass
def test sample wrong X sm SMOTEENN random state RND SEED sm fit X Y assert raises Runtime Error sm sample np random random 100 40 np array [0 ] * 50 + [1 ] * 50
def initialize log data ids bcs added field log data {}for curr key in ids bcs added field keys base key ''if curr key[ 0 ] base key + curr key[ 0 ] + ' ' if curr key[ 1 ] base key + curr key[ 1 ] + ' ' base key + ids bcs added field[curr key]log data[base key] 0return log data
def read handle format format format lower motifs parse handle format if len motifs 0 raise Value Error ' Nomotifsfoundinhandle' if len motifs > 1 raise Value Error ' Morethanonemotiffoundinhandle' motif motifs[ 0 ]return motif
@control command args [ u'task name' text t u'rate limit' text t ] signature u'<task name><rate limit e g 5/s 5/m 5/h >' def rate limit state task name rate limit **kwargs try rate rate limit except Value Error as exc return nok u' Invalidratelimitstring {0 r}' format exc try state app tasks[task name] rate limit rate limitexcept Key Error logger error u' Ratelimitattemptforunknowntask%s' task name exc info True return nok u'unknowntask' state consumer reset rate limits if not rate limit logger info u' Ratelimitsdisabledfortasksoftype%s' task name return ok u'ratelimitdisabledsuccessfully' logger info u' Newratelimitfortasksoftype%s %s ' task name rate limit return ok u'newratelimitsetsuccessfully'
def is sequence of strings obj if not iterable obj return Falseif is string like obj return Falsefor o in obj if not is string like o return Falsereturn True
def highlighting view name style left right tag settings sublime load settings 'bh tag sublime-settings' match style tag settings get 'tag style' {} get last mode None if match style is not None and style match style tag name tag settings get 'tag name' {} get last mode '[\\w\\ \\ \\-]+' if left is not None region view find tag name left begin left left move region begin region end if right is not None region view find tag name right begin right right move region begin region end return left right
def in Filesystem Namespace path return path[ 1] '\x 00 '
def set policy table 'filter' chain None policy None family 'ipv 4 ' if not chain return ' Error Chainneedstobespecified'if not policy return ' Error Policyneedstobespecified'wait '--wait' if has option '--wait' family else '' cmd '{ 0 }{ 1 }-t{ 2 }-P{ 3 }{ 4 }' format iptables cmd family wait table chain policy out salt ['cmd run'] cmd return out
def test formatters Chart if Chart dual or Chart Box returnchart Chart formatter lambda x chart serie '%s%s$' % x serie title chart add ' a' [1 2 {'value' 3 'formatter' lambda x u '%s\xc 2 \xa 5 ' % x }] chart add ' b' [4 5 6] formatter lambda x u '%s\xe 2 \x 82 \xac' % x chart x labels [2 4 6]chart x labels major [4 ]q chart render pyquery assert set [v text for v in q ' value' ] set u '4 \xe 2 \x 82 \xac' u '5 \xe 2 \x 82 \xac' u '6 \xe 2 \x 82 \xac' '1 a$' '2 a$' u '3 \xc 2 \xa 5 ' + '6 a$' u '15 \xe 2 \x 82 \xac' if Chart in Pie Solid Gauge else
def test sort model create model [[ 'B' '' '' 1 'C' '' '' 2 'A' '' '' 0 ]] filter model sortfilter Completion Filter Model model filter model sort 0 Qt Ascending Order actual extract model data filter model assert actual [[ 'A' '' '' 'B' '' '' 'C' '' '' ]] filter model sort 0 Qt Descending Order actual extract model data filter model assert actual [[ 'C' '' '' 'B' '' '' 'A' '' '' ]]
def create dendrogram X orientation 'bottom' labels None colorscale None distfun None linkagefun lambda x sch linkage x 'complete' if not scp or not scs or not sch raise Import Error ' Figure Factory create dendrogramrequiresscipy scipy spatialandscipy hierarchy' s X shapeif len s 2 exceptions Plotly Error ' Xshouldbe 2 -dimensionalarray ' if distfun is None distfun scs distance pdistdendrogram Dendrogram X orientation labels colorscale distfun distfun linkagefun linkagefun return {'layout' dendrogram layout 'data' dendrogram data}
def uni print statement out file None if out file is None out file sys stdouttry out file write statement except Unicode Encode Error new encoding getattr out file 'encoding' 'ascii' if new encoding is None new encoding 'ascii'new statement statement encode new encoding 'replace' decode new encoding out file write new statement out file flush
def pretty name name name name[ 0 ] upper + name[ 1 ] return name replace ' ' ''
def list snapshots domain None ret dict for vm domain in get domain iterable True * domain and [domain] or list ret[vm domain name ] [ parse snapshot description snap for snap in vm domain list All Snapshots ] or 'N/A' return ret
def branch list remote False if remote return for each ref basename u'refs/remotes' else return for each ref basename u'refs/heads'
@depends HAS PYVMOMI def get ntp config host username password protocol None port None host names None service instance salt utils vmware get service instance host host username username password password protocol protocol port port host names check hosts service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name ntp config host ref config Manager date Time System date Time Info ntp Config serverret update {host name ntp config} return ret
def get environ proxies url if should bypass proxies url return {}else return getproxies
def floating ip list call None if call 'function' raise Salt Cloud System Exit ' Thefloating ip listactionmustbecalledwith-for--function' conn get conn return conn floating ip list
def tsql query query **kwargs try cur get connection **kwargs cursor cur execute query return loads Mssql Encoder encode {'resultset' cur fetchall } ['resultset']except Exception as e return ' Couldnotrunthequery' str e
def connect to region region name **kw params for region in regions if region name region name return region connect **kw params return None
def per cpu times ret []for user system idle interrupt dpc in cext per cpu times item scputimes user system idle interrupt dpc ret append item return ret
def run aws cmd region opts user **kwargs receipthandle kwargs pop 'receipthandle' None if receipthandle kwargs['receipt-handle'] receipthandlenum kwargs pop 'num' None if num kwargs['max-number-of-messages'] num formatted args ['--{ 0 }"{ 1 }"' format k v for k v in six iteritems kwargs ]cmd 'awssqs{cmd}{args}{region}{out}' format cmd cmd args '' join formatted args region region region out OUTPUT rtn salt ['cmd run'] cmd runas user python shell False return json loads rtn if rtn else ''
def Trimmed Mean t p 0 01 t Trim t p return Mean t
def e Put Handle IO Type Channel Value x1 if os name 'nt' static Lib ctypes windll Load Library 'labjackud' pv ctypes c double Value ec static Lib e Put Handle IO Type Channel pv x1 if ec 0 raise Lab Jack Exception ec else raise Lab Jack Exception 0 ' Functiononlysupportedfor Windows'
def organize states for delete base mapper states uowtransaction states to delete []for state dict mapper connection in connections for states base mapper uowtransaction states mapper dispatch before delete mapper connection state states to delete append state dict mapper bool state key connection return states to delete
def local binary pattern image P R method 'default' assert nD image 2 methods {'default' ord 'D' 'ror' ord 'R' 'uniform' ord 'U' 'nri uniform' ord 'N' 'var' ord 'V' }image np ascontiguousarray image dtype np double output local binary pattern image P R methods[method lower ] return output
def handle Newest qry try get User Name except return skype Error qry qry decode 'utf 8 ' try if ' ' in qry and qry partition ' ' [0 ] in map lambda s s[ 0 ] read Friends return send Message Wait qry else return find Newest except Environment Error return Py Fred 'ch xtin skypingalfred error' False add Item 'skypeupdate' 'skypeupdate' ' No Skype Friends Found' ' Useskypeupdatetocachefriends ' True 'update' to XML except return Py Fred Generic Error
@validate 'tree' def valid field in tree arch return all child tag in 'field' 'button' for child in arch xpath '/tree/*'
def cr uid ids method method api 'cr uid ids'return method
def issue section issue labels issue get 'labels' [] for label in labels if not label['name'] startswith 'type ' continueif label['name'] in LOG SECTION return LOG SECTION[label['name']]elif label['name'] in IGNORE ISSUE TYPE return Noneelse logging warn 'unknownissuetype "{}"for {}' format label['name'] issue line issue return None
def get Points From Segment Table segment Table points []segment Table Keys segment Table keys segment Table Keys sort for segment Table Key in segment Table Keys for segment in segment Table[segment Table Key] for endpoint in segment points append endpoint point return points
@transaction non atomic requests@ensure csrf cookie@cache control no cache True no store True must revalidate True @require global staff@require http methods ['POST' 'DELETE'] def certificate invalidation view request course id course key Course Key from string course id try certificate invalidation data parse request data request certificate validate request data and get certificate certificate invalidation data course key except Value Error as error return Json Response {'message' error message} status 400 if request method 'POST' try certificate invalidation invalidate certificate request certificate certificate invalidation data except Value Error as error return Json Response {'message' error message} status 400 return Json Response certificate invalidation elif request method 'DELETE' try re validate certificate request course key certificate except Value Error as error return Json Response {'message' error message} status 400 return Json Response {} status 204
def rollback using None get connection using rollback
def mathdefault s if rc Params[u' internal classic mode'] return u'\\mathdefault{%s}' % s else return u'{%s}' % s
@requires sklearndef test gat plot nonsquared gat get data test times dict start 0 0 gat plot ax gat plot diagonal scores ax get children [1 ] get lines [2 ] get ydata assert equals len scores len gat estimators
def add keys to request request field pb key pbs for key pb in key pbs request field pb add Copy From key pb
def execute on completion application config callback def inner environ start response try result application environ start response except callback environ raisereturn generate close and callback result callback environ return inner
def qt 5 qml data directory qmldir qt 5 qml dir return os path join qmldir directory 'qml'
def require finance admin func def wrapped request course id try course key Course Key from string course id except Invalid Key Error log error u' Unabletofindcoursewithcoursekey%s' course id return Http Response Not Found access auth user has role request user Course Finance Admin Role course key if access return func request course id else return Http Response Forbidden return wrapped
def add Begin XML Tag attribute Dictionary class Name depth output text '' depth Start ' DCTB ' * depth output write '%s<%s%s>%s\n' % depth Start class Name get Attribute Dictionary String attribute Dictionary text
def debug brule file None if not file from sys import stdoutfile stdoutdef write brl expr result file write ' Rule %s\n' % get function name brl file write ' In %s\n Out %s\n\n' % expr result return onaction brule write
def test cons list entry tokenize ' a [] ' [0 ]assert entry Hy List [ Hy Symbol 'a' ] assert type entry Hy List entry tokenize ' a ' [0 ]assert entry Hy Expression [ Hy Symbol 'a' ] assert type entry Hy Expression entry tokenize ' ab {} ' [0 ]assert entry Hy Dict [ Hy Symbol 'a' Hy Symbol 'b' ] assert type entry Hy Dict
def wait for step emr connection step jobflowid sleeptime sleep 180 start time step state get step state emr connection jobflowid step name update True while step state in LIVE STATES + [PENDING] sleep sleeptime step state get step state emr connection jobflowid step name end time print '%stook% 0 2fs exit %s ' % step name end - start step state return step state
def negotiate locale preferred available sep ' ' aliases LOCALE ALIASES available [a lower for a in available if a]for locale in preferred ll locale lower if ll in available return localeif aliases alias aliases get ll if alias alias alias replace ' ' sep if alias lower in available return aliasparts locale split sep if len parts > 1 and parts[ 0 ] lower in available return parts[ 0 ]return None
def get occupied streams realm subs filter Subscription objects filter active True user profile realm realm user profile is active True values 'recipient id' stream ids Recipient objects filter type Recipient STREAM id in subs filter values 'type id' return Stream objects filter id in stream ids realm realm deactivated False
def test find number 6 s 'query 1 e 5 notfound'r find number s assert s[r[ 0 ] r[ 1 ]] '1 e 5 '
def build match rule action target match rule policy Rule Check 'rule' action resource is write get resource and action action if is write res map attributes RESOURCE ATTRIBUTE MA Pif resource in res map for attribute name in res map[resource] if is attribute explicitly set attribute name res map[resource] target attribute res map[resource][attribute name]if 'enforce policy' in attribute and is write attr rule policy Rule Check 'rule' '%s %s' % action attribute name match rule policy And Check [match rule attr rule] return match rule
def dmp ground LC f u K while u f dmp LC f K u - 1return dup LC f K
def get New Repository return Fill Repository
def total seconds td return td microseconds + td seconds + td days * 24 * 3600 * 10 ** 6 / 10 ** 6
def get entrance exam score request course exam key Usage Key from string course entrance exam id exam descriptor modulestore get item exam key def inner get module descriptor '\n Delegatetoget module for descriptor importedheretoavoidcircularreference \n'from courseware module render import get module for descriptorfield data cache Field Data Cache [descriptor] course id request user return get module for descriptor request user request descriptor field data cache course id course course exam module generators yield dynamic descriptor descendants exam descriptor request user id inner get module exam modules [module for module in exam module generators]return calculate entrance exam score request user course exam modules
def floating ip get by fixed ip id context fixed ip id return IMPL floating ip get by fixed ip id context fixed ip id
def load passphrase from file vf path os path expanduser kVF Passphrase File assert os access vf path os F OK and os access vf path os R OK '%smustexistandbereadable' % vf path with open vf path as f user data f read return user data strip '\n'
def describe identity pools Identity Pool Name Identity Pool Id None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try ids find identity pool ids Identity Pool Name Identity Pool Id conn if ids results []for pool id in ids response conn describe identity pool Identity Pool Id pool id response pop ' Response Metadata' None results append response return {'identity pools' results}else return {'identity pools' None}except Client Error as e return {'error' salt utils boto 3 get error e }
@register simple tag takes context True def zinnia loop template context default template matching context object get context first matching object context ['category' 'tag' 'author' 'pattern' 'year' 'month' 'week' 'day'] context positions get context loop positions context templates loop template list context positions context object matching default template ENTRY LOOP TEMPLATES return select template templates
def load Experiment Description Script From Dir experiment Dir description Script Path os path join experiment Dir 'description py' module load Description File description Script Path return module
def token list to text tokenlist Zero Width Escape Token Zero Width Escapereturn u'' join item[ 1 ] for item in tokenlist if item[ 0 ] Zero Width Escape
@profiler tracedef transfer list request detailed True search opts None c client cinderclient request try return [ Volume Transfer v for v in c client transfers list detailed detailed search opts search opts ]except cinder exception Forbidden as error LOG error error return []
def setup platform hass config add devices discovery info None if discovery info is None returnadd devices Telldus Live Sensor hass sensor for sensor in discovery info
def test discretize callable 1d def f x return x ** 2 y discretize model f -5 6 assert allclose y np arange -5 6 ** 2
def format sql encoding None **options stack engine Filter Stack options formatter validate options options stack formatter build filter stack stack options stack postprocess append filters Serializer Unicode return '' join stack run sql encoding
def load default from io import Bytes I Oimport base 64 f Image Font f load pilfont data Bytes IO base 64 b64 decode '\n U El M Zm 9 ud Ao 7 Ozs 7 Ozsx M Ds KREFUQ Qo AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAA// 8 AAQAAAAAAAAABAAEA\n Bg AAAAH/+g ADAAAAAQAAAAMA Bg AGAAAA Af/ 6 AAT//QADAAAA Bg ADAAYAAAAA//k ABQABAAYAAAAL\n A Ag A Bg AAAAD/+AAFAAEA Cw AAABAACQAGAAAAAP/ 5 AAUAAAAQAAAAFQAHAAYAAP////o ABQAAABUA\n AA Ab AAYA Bg AAAAH/+QAE//w A Gw AAAB 4 A Aw AGAAAA Af/ 5 AAQAAQ Ae AAAAIQAIAAYAAAAB//k ABAAB\n ACEAAA Ak A Ag A Bg AAAAD/+QAE// 0 AJAAAA Cg ABAAGAAAAAP/ 6 AAX//w Ao AAAALQAFAAYAAAAB// 8 A\n BAACAC 0 AAA Aw AAMA Bg AAAAD//AAF// 0 AMAAAADUAAQAGAAAA Af//AAMAAAA 1 AAAA Nw ABAAYAAAAB\n//k ABQABA Dc AAAA 7 A Ag A Bg AAAAD/+QAFAAAA Ow AAAEAA Bw AGAAAAAP/ 5 AAYAAABAAAAA Rg AHAAYA\n AAAA//k ABQAAAEYAAABLA Ac A Bg AAAAD/+QAFAAAA Sw AAAFAA Bw AGAAAAAP/ 5 AAYAAABQAAAA Vg AH\n AAYAAAAA//k ABQAAAFYAAA Bb A Ac A Bg AAAAD/+QAFAAAA Ww AAAGAA Bw AGAAAAAP/ 5 AAUAAA Bg AAAA\n ZQAHAAYAAAAA//k ABQAAAGUAAA Bq A Ac A Bg AAAAD/+QAFAAA Aag AAAG 8 A Bw AGAAAA Af/ 8 AAMAAA Bv\n AAA Ac QAEAAYAAAAA//w A Aw ACAHEAAAB 0 AAYA Bg AAAAD/+g AE// 8 Ad AAAA Hg ABQAGAAAAAP/ 7 AAT/\n/g B 4 AAA Af AADAAYAAAAB//o A Bf//A Hw AAACAAAUA Bg AAAAD/+g AFAAA Ag AAAAIUA Bg AGAAAAAP/ 5 \n AAYAAQCFAAA Aiw AIAAYAAP////o A Bg AAA Is AAACSAAYA Bg AA////+g AFAAA Akg AAA Jg A Bg AGAAAA\n AP/ 6 AAUAAACYAAA An QAGAAYAAP////o ABQAAAJ 0 AAA Cj AAYA Bg AA////+g AFAAA Aow AAA Kk A Bg AG\n AAD//// 6 AAUAAA Cp AAA Arw AGAAYAAAAA//o ABQAAAK 8 AAAC 0 AAYA Bg AA////+g AGAAA At AAAA Ls A\n Bg AGAAAAAP/ 6 AAQAAAC 7 AAA Avw AGAAYAAP////o ABQAAAL 8 AAADFAAYA Bg AA////+g AGAAA Ax QAA\n A Mw A Bg AGAAD//// 6 AAUAAADMAAAA 0 g AGAAYAAP////o ABQAAANIAAADYAAYA Bg AA////+g AGAAAA\n 2 AAAAN 8 A Bg AGAAAAAP/ 6 AAUAAA Df AAAA 5 AAGAAYAAP////o ABQAAAOQAAA Dq AAYA Bg AAAAD/+g AF\n AAEA 6 g AAAO 8 A Bw AGAAD//// 6 AAYAAA Dv AAAA 9 g AGAAYAAAAA//o ABQAAAPYAAAD 7 AAYA Bg AA////\n+g AFAAAA+w AAAQEA Bg AGAAD//// 6 AAYAAAEBAAABCAAGAAYAAP////o A Bg AAA Qg AAAEPAAYA Bg AA\n////+g AGAAAB Dw AAARYA Bg AGAAAAAP/ 6 AAYAAAEWAAABHAAGAAYAAP////o A Bg AAA Rw AAA Ej AAYA\n Bg AAAAD/+g AFAAAB Iw AAA Sg A Bg AGAAAA Af/ 5 AAQAAQ Eo AAAB Kw AIAAYAAAAA//k ABAABA Ss AAA Ev\n A Ag A Bg AAAAH/+QAEAAEB Lw AAATIACAAGAAAAAP/ 5 AAX//A Ey AAAB Nw ADAAYAAAAAAAEA Bg ACA Tc A\n AAE 9 AAEA Bg AAAAH/+QAE//w BPQAAAUAA Aw AGAAAAAP/ 7 AAYAAAFAAAAB Rg AFAAYAAP////k ABQAA\n AUYAAAFMA Ac A Bg AAAAD/+w AFAAABTAAAAVEABQAGAAAAAP/ 5 AAYAAAFRAAAB Vw AHAAYAAAAA//s A\n BQAAA Vc AAA Fc AAUA Bg AAAAD/+QAFAAABXAAAAWEA Bw AGAAAAAP/ 7 AAYA Ag Fh AAAB Zw AHAAYAAP//\n//k ABQAAA Wc AAA Ft A Ac A Bg AAAAD/+QAGAAA Bb QAAAXMA Bw AGAAAAAP/ 5 AAQA Ag Fz AAA Bdw AJAAYA\n AP////k A Bg AAA Xc AAAF+A Ac A Bg AAAAD/+QAGAAA Bfg AAAYQA Bw AGAAD//// 7 AAUAAAGEAAA Big AF\n AAYAAP////s ABQAAA Yo AAAGQAAUA Bg AAAAD/+w AFAAA Bk AAAAZUABQAGAAD//// 7 AAUA Ag GVAAAB\nmw AHAAYAAAAA//s A Bg ACA Zs AAA Gh A Ac A Bg AAAAD/+w AGAAA Bo QAA Aac ABQAGAAAAAP/ 7 AAYAAA Gn\n AAA Br QAFAAYAAAAA//k A Bg AA Aa 0 AAA Gz A Ac A Bg AA////+w AGAAA Bsw AA Abo ABQAGAAD//// 7 AAUA\n AAG 6 AAA Bw AAFAAYAAP////s A Bg AA Ac AAAAHHAAUA Bg AAAAD/+w AGAAA Bxw AA Ac 0 ABQAGAAD//// 7 \n AAYA Ag HNAAAB 1 AAHAAYAAAAA//s ABQAA Ad QAAAHZAAUA Bg AAAAH/+QAFAAEB 2 QAA Ad 0 ACAAGAAAA\n Av/ 6 AAMAAQ Hd AAAB 3 g AHAAYAAAAA//k ABAAB Ad 4 AAA Hi A Ag A Bg AAAAD/+w AF// 0 B 4 g AA Aec A Ag AA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAB\n//s A Aw AC Aec AAA Hp A Ac A Bg AAAAD/+QAFAAEB 6 QAA Ae 4 ACAAGAAAAAP/ 5 AAYAAA Hu AAAB 9 AAHAAYA\n AAAA//o A Bf// Af QAAAH 5 AAUA Bg AAAAD/+QAGAAAB+QAA Af 8 A Bw AGAAAA Av/ 5 AAMA Ag H/AAACAAAJ\n AAYAAAAA//k ABQAB Ag AAAAIFA Ag A Bg AAAAH/+g AE//s CBQAA Agg AAQAGAAAAAP/ 5 AAYAAAIIAAAC\n Dg AHAAYAAAAB//k A Bf/+ Ag 4 AAAISAAUA Bg AA////+w AGAAAC Eg AA Ahk ABQAGAAAAAP/ 7 AAX//g IZ\n AAAC Hg ADAAYAAAAA//w A Bf/ 9 Ah 4 AAA Ij AAEA Bg AAAAD/+QAHAAAC Iw AA Aio A Bw AGAAAAAP/ 6 AAT/\n+w Iq AAAC Lg ABAAYAAAAA//k ABP/ 8 Ai 4 AAA Iy AAMA Bg AAAAD/+g AFAAAC Mg AA Ajc A Bg AGAAAA Af/ 5 \n AAT//QI 3 AAAC Og AEAAYAAAAB//k ABP/ 9 Ajo AAAI 9 AAQA Bg AAAAL/+QAE//s CPQAA Aj 8 A Ag AGAAD/\n/// 7 AAYA Ag I/AAAC Rg AHAAYAAAAA//k A Bg AB Ak YAAAJMA Ag A Bg AAAAH//AAD// 0 CTAAA Ak 4 AAQAG\n AAAA Af//AAQA Ag JOAAACUQADAAYAAAAB//k ABP/ 9 Al EAAAJUAAQA Bg AAAAH/+QAF// 4 CVAAA Alg A\n BQAGAAD//// 7 AAYAAAJYAAAC Xw AFAAYAAP////k A Bg AA Al 8 AAA Jm A Ac A Bg AA////+QAGAAAC Zg AA\n Am 0 A Bw AGAAD//// 5 AAYAAA Jt AAA Cd AAHAAYAAAAA//s ABQAC An QAAAJ 5 A Ac A Bg AA//// 9 w AGAAAC\ne QAA Ao AACQAGAAD//// 3 AAYAAAKAAAA Chw AJAAYAAP////c A Bg AA Aoc AAAKOA Ak A Bg AA//// 9 w AG\n AAA Cjg AA Ap UACQAGAAD//// 4 AAYAAAKVAAA Cn AAIAAYAAP////c A Bg AA Apw AAA Kj A Ak A Bg AA////\n+g AGAAA Cow AA Aqo A Bg AGAAAAAP/ 6 AAUA Ag Kq AAA Crw AIAAYAAP////c ABQAA Aq 8 AAAK 1 A Ak A Bg AA\n//// 9 w AFAAA Ct QAA Ars ACQAGAAD//// 3 AAUAAAK 7 AAA Cw QAJAAYAAP////g ABQAA As EAAALHA Ag A\n Bg AAAAD/ 9 w AEAAA Cxw AA Ass ACQAGAAAAAP/ 3 AAQAAALLAAA Czw AJAAYAAAAA//c ABAAA As 8 AAALT\n A Ak A Bg AAAAD/+AAEAAAC 0 w AA Atc ACAAGAAD//// 6 AAUAAALXAAAC 3 QAGAAYAAP////c A Bg AA At 0 A\n AA Lk A Ak A Bg AAAAD/ 9 w AFAAAC 5 AAA Auk ACQAGAAAAAP/ 3 AAUAAA Lp AAAC 7 g AJAAYAAAAA//c ABQAA\n Au 4 AAA Lz A Ak A Bg AAAAD/ 9 w AFAAAC 8 w AA Avg ACQAGAAAAAP/ 4 AAUAAAL 4 AAAC/QAIAAYAAAAA//o A\n Bf// Av 0 AAAMCAAUA Bg AA////+g AGAAAD Ag AA Awk A Bg AGAAD//// 3 AAYAAAMJAAADEAAJAAYAAP//\n//c A Bg AA Ax AAAAMXA Ak A Bg AA//// 9 w AGAAAD Fw AA Ax 4 ACQAGAAD//// 4 AAYAAAAAA Ao A Bw ASAAYA\n AP////c A Bg AAA Ac A Cg AOABMA Bg AA////+g AFAAAA Dg AKABQAEAAGAAD//// 6 AAYAAAAUA Ao A Gw AQ\n AAYAAAAA//g A Bg AAA Bs A Cg Ah ABIA Bg AAAAD/+AAGAAAAIQAKA Cc A Eg AGAAAAAP/ 4 AAYAAA An A Ao A\n LQASAAYAAAAA//g A Bg AAAC 0 A Cg Az ABIA Bg AAAAD/+QAGAAAA Mw AKA Dk AEQAGAAAAAP/ 3 AAYAAAA 5 \n A Ao A Pw ATAAYAAP////s ABQAAAD 8 A Cg BFAA 8 A Bg AAAAD/+w AFAAIARQAKA Eo AEQAGAAAAAP/ 4 AAUA\n AABKA Ao A Tw ASAAYAAAAA//g ABQAAAE 8 A Cg BUABIA Bg AAAAD/+AAFAAAAVAAKA Fk A Eg AGAAAAAP/ 5 \n AAUAAABZA Ao A Xg ARAAYAAAAA//g A Bg AAAF 4 A Cg Bk ABIA Bg AAAAD/+AAGAAAAZAAKA Go A Eg AGAAAA\n AP/ 4 AAYAAA Bq A Ao Ac AASAAYAAAAA//k A Bg AAAHAA Cg B 2 ABEA Bg AAAAD/+AAFAAA Adg AKA Hs A Eg AG\n AAD//// 4 AAYAAAB 7 A Ao Agg ASAAYAAAAA//g ABQAAAIIA Cg CHABIA Bg AAAAD/+AAFAAA Ahw AKA Iw A\n Eg AGAAAAAP/ 4 AAUAAACMA Ao Ak QASAAYAAAAA//g ABQAAAJEA Cg CWABIA Bg AAAAD/+QAFAAA Alg AK\n A Js AEQAGAAAAAP/ 6 AAX//w Cb A Ao Ao AAPAAYAAAAA//o ABQABAKAA Cg Cl ABEA Bg AA////+AAGAAAA\np QAKA Kw A Eg AGAAD//// 4 AAYAAA Cs A Ao Asw ASAAYAAP////g A Bg AAALMA Cg C 6 ABIA Bg AA////+QAG\n AAA Aug AKAMEAEQAGAAD//// 4 AAYA Ag DBA Ao Ay AAUAAYAAP////k ABQACA Mg A Cg DOABMA Bg AA////\n+QAGAAI Azg AKANUA Ew \n' Image open Bytes IO base 64 b64 decode '\ni VBO Rw 0 K Ggo AAAANS Uh E Ug AA Ax 4 AAAAUAQAAAA Ar Mt Zo AAA Ew El EQVR 4 n A Bl A Jr/AHVE 4 cz CI/ 4 u\n Mc 4 b 7 vuds/xzjz 5 / 3 / 7 u/n 9 v Me 7 vnf H/ 9 ++v Pn/xyf 5 zhxzjt 8 G Hw 8 + 2 d 83 u 8 x 27199 /nxu Q 6 Od 9 \n M 43 / 5 z 2 I+ 9 n 9 Ztm D Bw MQECDR Qw/e QI Qoh J Xxp BCNVE 6 QCCAAAAD//w Bl A Jr/ Ag A Lyj 1 t/w I Nwq 0 g\n Le NZ Uworu N 1 cj TP Izr TX 6 of H Weo 3 v 336 q Pzf Ew Rm Bn H Ttf 95 /fgl ZK 5 N 0 P Dgf R Tslp G Bvz 7 L Fc 4 F\n IUXBWQ Gj Q 5 MG Cx 34 EDF Pw Xi Y 4 Yb Yxavpnh H Frk 14 CDAAAAD//w Bl A Jr/ Ag Kq Roo H 2 g Ag Peggv UAA\n Bu 2 Wfg Po Awz RAABAAAAAAAC Qg Lz/ 3 Uv 4 Gv+g X 7 B Jg Dee GP 6 AAAD 1 NM Dz KHD 7 AN Wr 3 lo Ybxs AD 791 \n NAA Dfco I Dy P 44 K/jv 4 Y 63 /Z+t 98 Ovt+ub 4 T 48 LAAAAD//w Bl A Jr/ Aupl Ml ADJAAAA Gu Aph Wpqh Mx\nin 0 A/f Rv AYBAB Pg Bw B Ug ABBQ/s Y Ayv 9 g 0 b C Hg O Lo GAAAAAAAREA Aw I 7 nr 0 Ar Ypow 7 a X 8 // 9 La P/ 9 \n Sjdav WA 8 e P He BIKB// 81 / 83 ndzn Oa Xx 379 w AAAD//w Bl A Jr/ Aq Dx W+D 3 AABA Ab Uh/Q Mnb Qag/g AY\n AYDAAA Cgtg D/g Oq AAAB 5 IA/ 8 AA Ak+n 9 w 0 AAA 8 AA Am FR Ju Po 27 ci C 0 c D 5 oe W 4 E 7 KA/w D 3 ECM An 2 tt\ny 8 Pgw H 8 Af Ax Fz C 0 Jze A Mtrat As C/ffw AAAD//w Bl A Jr/BGK Ay CAA 4 AAA Avge YT Aw Hd 1 km QF 5 chk G\n A Bo MI Hc L 5 x Vp Tf Qb Uqdl AAA Erw AQ Bg AAEO Cl A 5 D 9 il 08 A Eh/t Uzd C Bs Xkbg ACED+wo Qg 8 Si 9 Veq Y\nl OD Cn 7 lm F 6 Nhn AE Yg AAA/NMIAAAAAAD// 2 Jgj L Zg VG Bg 5 Pv/ Tvpc 8 hw G Bj YGJA Dj H Dr Aw Pz Ajv/H\n/ Wf 3 Pz Cwtzcw Hm Bg Y Gcwb Zz 8 w Ha CAQMD Ow MDQ 8 MC Bg YOC 3 W 7 mp+f 0 w+w HO Yx O 3 OG+e 376 hs M Zjk 3 \n AAAAAP// Ym CMY 2 A 4 w MAIN 5 e 5 g QETPD 6 A Zis D Aw M Dgz SDAA Pj Byi Hc QMD Aw M Dg 1 n Oze 1 l By Ru 5 / 47 \nc 4859311 AYN Zzg 0 AAAAA// 9 i YGDB Yih OII Muw Ij GL 39 /fwff A 8 b//xv/P 2 B Ptzz Hw C Bj UQAAAAD/\n/y LF Br IBAAAA// 9 i 1 Hhcwdhiz X 7 u 8 NZ Nzy Lbv T 97 bfr Mf/QHI 8 ev Owc Sq GUJAAAA// 9 i YBB 81 i Sw\np EE 170 Qrg 5 MI Yyd Hqwd DQR Mr Awc Vr QAAAAD// 2 J 4 x 7 j 9 AAM Dn 8 Q/ Bg YL Boai Aww Mj Pdv MDBYM 1 Tv\no Jod AAAAAP// Yqo/ 83 +dxe P Wlxl 3 npsel 9 lv Lf Pcql E 9725 C+acf VLMEAAAA// 9 i+s 9 gw Coaa GMR\nevta/ 58 PTE Wzr 21 huf Pj A 8 N+qln Bw AAAAAD// 2 Ji W Lci 5 v 1 + Hm FX Dqcn ULE/ Mxg YG Bj+f 6 Ca JQAA\n AAD// 2 Ji 2 Frk Y 3 i Yp YC 5 q De Gge EM Aw P Dvw QB Bo Yvc Tw OVLMEAAAA// 9 is D Bgk P/// 0 E Og 9 z 35 v//\n Gc/ee W 7 Bw Pj 5 +QG Zh AN Usw MAAAD// 2 Jgq G Bg YG Bgq EM Xlvh MP Us AAAAA// 8 i Y Dd 1 AAAAAP// Aw DR\nw 7 Ik Ebzh VQAAAABJRU 5 Erk Jggg \n' return f
def make auth headers if not os path exists ' appveyor token' raise Runtime Error ' Pleasecreateafilenamed` appveyor token`inthecurrentdirectory Youcangetthetokenfromhttps //ci appveyor com/api-token' with open ' appveyor token' as f token f read strip headers {' Authorization' ' Bearer{}' format token }return headers
def compute neighbors image structure offset structure[tuple offset ] 0locations np transpose np nonzero structure sqdistances np sum locations - offset ** 2 axis 1 neighborhood np ravel multi index locations T image shape - np ravel multi index offset image shape astype np int 32 sorted neighborhood neighborhood[np argsort sqdistances ]return sorted neighborhood
@ Register With Arg Checks name 'neighbor get' req args [neighbors IP ADDRESS] def get neighbor conf neigh ip address neigh conf get neighbor conf neigh ip address return neigh conf settings
@receiver send user notification sender Course Creator def send user notification callback sender **kwargs user kwargs['user']updated state kwargs['state']studio request email settings FEATURES get 'STUDIO REQUEST EMAIL' '' context {'studio request email' studio request email}subject render to string 'emails/course creator subject txt' context subject '' join subject splitlines if updated state Course Creator GRANTED message template 'emails/course creator granted txt'elif updated state Course Creator DENIED message template 'emails/course creator denied txt'else message template 'emails/course creator revoked txt'message render to string message template context try user email user subject message studio request email except log warning ' Unabletosendcoursecreatorstatuse-mailto%s' user email
def background im size background None **kwargs if not background return imif not size[ 0 ] or not size[ 1 ] return im x y im sizeif x > size[ 0 ] and y > size[ 1 ] return imim colorspace im replace alpha background **kwargs new im Image new 'RGB' size background if new im mode im mode new im new im convert im mode offset size[ 0 ] - x // 2 size[ 1 ] - y // 2 new im paste im offset return new im
def validate nrows nrows msg "'nrows'mustbeaninteger"if nrows is not None if is float nrows if int nrows nrows raise Value Error msg nrows int nrows elif not is integer nrows raise Value Error msg return nrows
def test possible string format functions t Q Table [ [1 2] * u m ] t['col 0 '] info format '% 3f'assert t pformat ['col 0 ' 'm' '-----' '1 000 ' '2 000 '] t['col 0 '] info format 'hi{ 3f}'assert t pformat ['col 0 ' 'm' '--------' 'hi 1 000 ' 'hi 2 000 '] t['col 0 '] info format ' 4f'assert t pformat ['col 0 ' 'm' '------' '1 0000 ' '2 0000 ']
def add status query managers sender **kwargs if not issubclass sender Status Model returnfor value display in getattr sender u'STATUS' try sender meta get field value raise Improperly Configured u" Status Model Model'%s'hasafieldnamed'%s'whichconflictswithastatusofthesamename " % sender name value except Field Does Not Exist passsender add to class value Query Manager status value
def call url url view kwargs None func name func data app url map bind '' match url if view kwargs is not None func data update view kwargs view function view functions[func name]rv view function **func data rv unpack rv if isinstance rv werkzeug wrappers Base Response and rv status code in REDIRECT CODES redirect url rv headers[' Location']return call url redirect url return rv
def get subclasses c return c subclasses + sum map get subclasses c subclasses []
def get Carving file Name '' carving SVG Carving carving parse SVG file Name archive get File Text file Name return carving
def update index force False manager MANAGE Rif force with quiet run as root '% manager sclean' % locals run as root '% manager s-fupdate' % locals else run as root '% manager supdate' % locals
def function no Args return
def blacklist check path head tests dir os path split path dirname if tests dir u'tests' return True head top module os path split head return path purebasename in IGNORED TESTS get top module []
def get roles for user user db role names User Role Assignment query user user db name only 'role' scalar 'role' result Role query name in role names return result
def get List Table Elements list Dictionary list Dictionary Elements []for list Dictionary Value in list Dictionary values list Dictionary Elements + list Dictionary Valuereturn list Dictionary Elements
def detect stream try openpyxl reader excel load workbook stream return Trueexcept openpyxl shared exc Invalid File Exception pass
def set cover container cover path report None options None report report or lambda x x if container book type u'azw 3 ' set azw 3 cover container cover path report options options else set epub cover container cover path report options options
def strip rst role type str match REST ROLE PATTERN match type str if match return match group 1 else return type str
def fromstring html guess charset True parser None if not isinstance html strings raise Type Error 'stringrequired' doc document fromstring html parser parser guess charset guess charset start html[ 50 ] lstrip lower if start startswith '<html' or start startswith '< doctype' return dochead find tag doc 'head' if len head return docbody find tag doc 'body' if len body 1 and not body text or not body text strip and not body[ -1 ] tail or not body[ -1 ] tail strip return body[ 0 ]if contains block level tag body body tag 'div'else body tag 'span'return body
def get vcs root path previous path pathwhile get vcs info path is None path abspardir path if path previous path returnelse previous path pathreturn osp abspath path
def get ec 2 driver aws ec 2 get driver Provider EC 2 aws['access key'] aws['secret access token'] region aws['region'] return ec 2
@decorator decoratordef outplace f clip *a **k newclip clip copy f newclip *a **k return newclip
def is prerelease vers normalized version suggest normalized version vers if normalized is None return Trueparsed version normalized key normalized return any [any [ y in set ['a' 'b' 'c' 'rc' 'dev'] for y in x] for x in parsed]
def escape inp def conv obj ' Convertobj 'if isinstance obj list rv as unicode '[' + ' ' join conv o for o in obj + ']' elif isinstance obj dict rv as unicode '{' + ' ' join [ '%s %s' % conv key conv value for key value in obj iteritems ] + '}' else rv as unicode '"%s"' % as unicode obj replace '"' '\\"' return rvreturn conv inp
def virtual interface list name **kwargs conn get conn return conn virtual interface list name
def cache bank key fun **kwargs items cache fetch bank key if items is None items {}try item list fun **kwargs except Cloud Error as exc log warning ' Therewasaclouderrorcalling{ 0 }withkwargs{ 1 } {2 }' format fun kwargs exc for item in item list items[item name] object to dict item cache store bank key items return items
@register u'yank-last-arg' def yank last arg event n event arg if event arg present else None event current buffer yank last arg n
def rmtree errorhandler func path exc info exctype value exc info[ 2]if not exctype is Windows Error and value args[ 0 ] 5 or exctype is OS Error and value args[ 0 ] 13 raiseif os stat path st mode & stat S IREAD stat S IREAD raiseos chmod path stat S IWRITE func path
def p inclusive or expression 2 t pass
def ssh args ssh bin address ec 2 key pair file if ec 2 key pair file is None raise Value Error 'SS Hkeyfilepathis None' return ssh bin + ['-i' ec 2 key pair file '-o' ' Strict Host Key Checking no' '-o' ' User Known Hosts File /dev/null' 'hadoop@%s' % address ]
def get variable values sorted variable if variable is continuous return []try return sorted variable values key int except Value Error return variable values
def grains host protocol None port None username password find credentials DETAILS['host'] ret salt ['vsphere system info'] host host username username password password protocol protocol port port GRAINS CACHE update ret return GRAINS CACHE
def quota reserve context resources quotas deltas expire until refresh max age project id None is allocated reserve False return IMPL quota reserve context resources quotas deltas expire until refresh max age project id project id is allocated reserve is allocated reserve
def skip if predicate reason None reason reason or predicate name def decorate fn fn name fn name def maybe *args **kw if predicate msg "'%s'skipped %s" % fn name reason raise Skip Test msg else return fn *args **kw return function named maybe fn name return decorate
def make twilio request method uri **kwargs headers kwargs get 'headers' {} user agent 'twilio-python/%s Python%s ' % version platform python version headers[' User- Agent'] user agentheaders[' Accept- Charset'] 'utf- 8 'if method 'POST' and ' Content- Type' not in headers headers[' Content- Type'] 'application/x-www-form-urlencoded'kwargs['headers'] headersif ' Accept' not in headers headers[' Accept'] 'application/json'if kwargs pop 'use json extension' False uri + ' json'resp make request method uri **kwargs if not resp ok try error json loads resp content code error['code']message error['message']except code Nonemessage resp contentraise Twilio Rest Exception status resp status code method method uri resp url msg message code code return resp
def voronoi cells G center nodes weight 'weight' paths nx multi source dijkstra path G center nodes weight weight nearest {v p[ 0 ] for v p in paths items }cells groups nearest unreachable set G - set nearest if unreachable cells['unreachable'] unreachablereturn cells
def send Msg osc Address data Array [] ip Addr '127 0 0 1' port 9000 typehint None with osc Lock out Socket sendto create Binary Msg osc Address data Array typehint ip Addr port
def test if sys argv[ 1 ] if sys argv[ 2 ] sys stderr write 'usage pythondis py[- file]\n' sys exit 2 fn sys argv[ 1 ]if not fn or fn '-' fn Noneelse fn Noneif fn is None f sys stdinelse f open fn source f read if fn is not None f close else fn '<stdin>'code compile source fn 'exec' dis code
def fromstr string **kwargs return GEOS Geometry string **kwargs
def write corpus as vw corpus filename LOG debug u' Writingcorpusto %s' filename corpus size 0with utils smart open filename u'wb' as corpus file for line in corpus to vw corpus corpus file write line encode u'utf- 8 ' + '\n' corpus size + 1return corpus size
def font priority font style normal font[u'font-style'] u'normal' width normal font[u'font-stretch'] u'normal' weight normal font[u'font-weight'] u'normal' num normal sum filter None style normal width normal weight normal subfamily name font[u'wws subfamily name'] or font[u'preferred subfamily name'] or font[u'subfamily name'] if num normal 3 and subfamily name u' Regular' return 0if num normal 3 return 1if subfamily name u' Regular' return 2return 3 + 3 - num normal
@utils arg '--tenant' metavar '<tenant-id>' required True help 'I Doftenanttodeletequotafor ' @utils arg '--user' metavar '<user-id>' help 'I Dofusertodeletequotafor ' def do quota delete cs args cs quotas delete args tenant user id args user
def parse cost limit source cost pos source posdigits parse count source try return int digits except Value Error passraise error 'badfuzzycostlimit' source string cost pos
def wait timeout cloud server action for count in shade utils iterate timeout timeout ' Timeoutwaitingforservertocomplete%s' % action try server cloud get server server id except Exception continueif server status action map[action] returnif server status 'ERROR' module fail json msg ' Serverreached ERRO Rstatewhileattemptingto%s' % action
def test hermite kochanek bartels Chart datas chart Chart interpolate 'hermite' interpolation parameters {'type' 'kochanek bartels' 'b' -1 'c' 1 't' 1} chart make data chart datas assert chart render chart Chart interpolate 'hermite' interpolation parameters {'type' 'kochanek bartels' 'b' -1 'c' -8 't' 0} chart make data chart datas assert chart render chart Chart interpolate 'hermite' interpolation parameters {'type' 'kochanek bartels' 'b' 0 'c' 10 't' -1 } chart make data chart datas assert chart render
def get I Px domain try return socket gethostbyname ex domain [2 ]except Exception return False
def find variables data include named True found set def f val if not isinstance val basestring returnfor match in Template pattern finditer val name include named and match group 'named' or match group 'braced' if name is not None found add name recursive walk f data return found
def get Elements By Local Name child Nodes local Name elements By Local Name get Child Elements By Local Name child Nodes local Name for child Node in child Nodes if child Node get Node Type 1 elements By Local Name + child Node get Elements By Local Name local Name return elements By Local Name
def load Icon stock item id stock item getattr gtk stock item id local icon os path join GUI DATA PATH 'icons' '16 ' '%s png' % stock item if os path exists local icon im gtk Image im set from file local icon im show return im get pixbuf else icon theme gtk Icon Theme try icon icon theme load icon stock item 16 except icon load Image 'missing-image png' get pixbuf return icon
def write docstringdict filename 'turtle docstringdict' docsdict {}for methodname in tg screen functions key ' Screen ' + methodname docsdict[key] eval key doc for methodname in tg turtle functions key ' Turtle ' + methodname docsdict[key] eval key doc f open '%s py' % filename 'w' keys sorted [x for x in docsdict keys if x split ' ' [1 ] not in alias list ] f write 'docsdict {\n\n' for key in keys[ -1 ] f write '%s \n' % repr key f write '"""%s\n""" \n\n' % docsdict[key] key keys[ -1 ]f write '%s \n' % repr key f write '"""%s\n"""\n\n' % docsdict[key] f write '}\n' f close
def database exists name with settings hide 'running' 'stdout' 'stderr' 'warnings' warn only True return run as pg 'psql-d% name s-c""' % locals succeeded
@qutescheme add handler 'settings' backend usertypes Backend Qt Web Kit def qute settings url config getter functools partial objreg get 'config' get raw True html jinja render 'settings html' title 'settings' config configdata confget config getter return 'text/html' html
def splitdrive p if len p > 1 normp p replace altsep sep if normp[ 0 2] sep * 2 and normp[ 2 ] sep index normp find sep 2 if index -1 return '' p index 2 normp find sep index + 1 if index 2 index + 1 return '' p if index 2 -1 index 2 len p return p[ index 2 ] p[index 2 ] if normp[ 1 ] ' ' return p[ 2] p[ 2 ] return '' p
def get credit providers providers list None return Credit Provider get credit providers providers list providers list
def plot matches im 1 im 2 locs 1 locs 2 matchscores show below True im 3 appendimages im 1 im 2 if show below im 3 vstack im 3 im 3 imshow im 3 cols 1 im 1 shape[ 1 ]for i m in enumerate matchscores if m > 0 plot [locs 1 [i][ 1 ] locs 2 [m][ 1 ] + cols 1 ] [locs 1 [i][ 0 ] locs 2 [m][ 0 ]] 'c' axis 'off'
def pkcs i2 osp x x Len z RSA number long to bytes x padlen max 0 x Len - len z return '\x 00 ' * padlen + z
def link src dst if os name u'nt' if ctypes windll kernel 32 Create Hard Link W dst src 0 0 raise ctypes Win Error else os link src dst
def stop app instance app name port if not misc is app name valid app name logging error ' Unabletokillappprocess%sonport%dbecauseofinvalidnameforapplication' % app name int port return Falselogging info ' Stoppingapplication%s' % app name watch 'app ' + app name + '-' + str port if not monit interface stop watch is group False logging error ' Unabletostopapplicationserverforapp{ 0 }onport{ 1 }' format app name port return Falsemonit config file '{}/appscale-{} cfg' format MONIT CONFIG DIR watch try os remove monit config file except OS Error as os error logging error ' Errordeleting{ 0 }' format monit config file return True
def filter schemas schemas schema tables exclude table columns return [ filter schema s schema tables exclude table columns for s in schemas]
def echo class klass write sys stdout write for method in inspect getmembers klass inspect ismethod echo instancemethod klass method write for fn in inspect getmembers klass inspect isfunction if is static method fn klass setattr klass name fn staticmethod echo fn write else echo instancemethod klass fn write
def clear namespace ok names set default backend dict ok names update ['gl 2 ' 'glplus'] NS globals for name in list NS keys if name lower startswith 'gl' if name not in ok names del NS[name]
def iter Services xrd tree xrd get Yadis XRD xrd tree return prio Sort xrd findall service tag
def download restricted url filename age params {u'age limit' age u'skip download' True u'writeinfojson' True u'outtmpl' u'% id s % ext s'}ydl Youtube DL params ydl add default info extractors json filename os path splitext filename [0 ] + u' info json' try rm json filename ydl download [url] res os path exists json filename try rm json filename return res
def test nearmiss wrong version version 1000 nm 3 Near Miss version version random state RND SEED assert raises Value Error nm 3 fit sample X Y
@dispatch Expr object def pre compute leaf data scope None **kwargs return data
def Get Lines line strings lines []for line string in line strings line list map int line string split '-' 1 if line[ 0 ] < 1 raise errors Yapf Error 'invalidstartoflinerange %r' % line if line[ 0 ] > line[ 1 ] raise errors Yapf Error 'endcomesbeforestartinlinerange %r' line lines append tuple line return lines
def register return 'authz'
@require global staff@require POS Tdef enable certificate generation request course id None course key Course Key from string course id is enabled request POST get 'certificates-enabled' 'false' 'true' certs api set cert generation enabled course key is enabled return redirect instructor dash url course key section 'certificates'
def list plugins pluginlist os listdir PLUGINDIR ret []for plugin in pluginlist statf os path join PLUGINDIR plugin try executebit stat S IXUSR & os stat statf [stat ST MODE] except OS Error passif executebit ret append plugin return ret
def compute g n a compute a 2 * n g []for k in range n g append mp sqrt 2 * mp rf 0 5 k * a[ 2 * k ] return g
def set special user special cmd lst list tab user for cron in lst['special'] if special cron['spec'] and cmd cron['cmd'] return 'present'spec {'spec' special 'cmd' cmd}lst['special'] append spec comdat write cron lines user render tab lst if comdat['retcode'] return comdat['stderr']return 'new'
def set diff chunk generator class renderer assert rendererglobals [u' generator'] renderer
def should use proxy url no proxy None if no proxy is None no proxy effective os environ get 'no proxy' '' else no proxy effective no proxyurl Obj urlparse urlparse url as string url for np in [h strip for h in no proxy effective split ' ' ] if url Obj hostname np return Falsereturn True
def trim line line column 0 line line strip u'\n' ll len line if ll < 150 return lineif column > ll column llstart max column - 60 0 if start < 5 start 0end min start + 140 ll if end > ll - 5 end llif end ll start max end - 140 0 line line[start end]if end < ll line + u'{snip}'if start > 0 line u'{snip}' + line return line
def cluster status **kwargs return ceph cfg cluster status **kwargs
def task info format task info ref if task info ref is None return {}return {'task id' task info ref['task id'] 'input' task info ref['input'] 'result' task info ref['result'] 'message' task info ref['message']}
def pandas read text reader b header kwargs dtypes None columns None write header True enforce False bio Bytes IO if write header and not b startswith header rstrip bio write header bio write b bio seek 0 df reader bio **kwargs if dtypes coerce dtypes df dtypes if enforce and columns and list df columns list columns raise Value Error ' Columnsdonotmatch' df columns columns elif columns df columns columnsreturn df
def gaussian loglik scorer est X y None precision est get precision n samples n features X shapelog like np zeros n samples log like -0 5 * X * np dot X precision sum axis 1 log like - 0 5 * n features * log 2 0 * np pi - logdet precision out np mean log like return out
def get SSL Context keyfile os path join GAME DIR 'server' 'ssl key' certfile os path join GAME DIR 'server' 'ssl cert' verify SSL key and cert keyfile certfile return twisted ssl Default Open SSL Context Factory keyfile certfile
def mod aggregate low chunks running pkgs []agg enabled ['installed' 'latest' 'removed' 'purged']if low get 'fun' not in agg enabled return lowfor chunk in chunks tag salt utils gen state tag chunk if tag in running continueif chunk get 'state' 'pkg' if ' agg ' in chunk continueif chunk get 'fun' low get 'fun' continueif chunk get 'fromrepo' low get 'fromrepo' continueif 'pkgs' in chunk pkgs extend chunk['pkgs'] chunk[' agg '] Trueelif 'name' in chunk pkgs append chunk['name'] chunk[' agg '] Trueif pkgs if 'pkgs' in low low['pkgs'] extend pkgs else low['pkgs'] pkgsreturn low
def es delete cmd index noinput False log log try indexes [name for name count in get indexes ]except ES EXCEPTIONS log error ' Yourelasticsearchprocessisnotrunningor ES URL Sissetwronginyoursettings local pyfile ' returnif index not in indexes log error ' Index"%s"isnotavalidindex ' index returnif index in all read indexes and not noinput ret raw input '"%s"isareadindex Areyousureyouwanttodeleteit? yes/no ' % index if ret 'yes' log info ' Notdeletingtheindex ' returnlog info ' Deletingindex"%s" ' index delete index index log info ' Done '
def get subset from bitstring super set bitstring if len super set len bitstring raise Value Error ' Thesizesofthelistsarenotequal' return [super set[i] for i j in enumerate bitstring if bitstring[i] '1 ' ]
def get pending computer name current get computer name pending salt ['reg read value'] 'HKLM' 'SYSTEM\\ Current Control Set\\ Services\\ Tcpip\\ Parameters' 'NV Hostname' ['vdata']if pending return pending if pending current else None return False
def run migrations online connectable engine from config config get section config config ini section prefix 'sqlalchemy ' poolclass pool Null Pool with connectable connect as connection context configure connection connection target metadata target metadata with context begin transaction context run migrations
def is empty G return not any G adj values
def migrate registrations q5 metadata schema registrations Node find Q 'is registration' 'eq' True & Q 'registered schema' 'eq' schema total reg registrations count logger info ' Examining{}registrationsforq 5 metadata' format total reg reg count 0for reg in registrations reg count + 1if reg registered meta get schema id {} get 'q 5 ' {} get 'value' {} reg registered meta[schema id]['q 5 ']['value'] reg registered meta[schema id]['q 5 ']['value'] rstrip reg save logger info '{}/{} Migratedq 5 responsefor{}' format reg count total reg reg id else logger info '{}/{}q 5 notanswered Nochangeneededfor{} ' format reg count total reg reg id
def get random user agent return random choice user agents list
def p statement assign t names[t[ 1 ]] t[ 3 ]
def get preferred submodules if 'submodules' in modules db return modules db['submodules']mods ['numpy' 'scipy' 'sympy' 'pandas' 'networkx' 'statsmodels' 'matplotlib' 'sklearn' 'skimage' 'mpmath' 'os' 'PIL' ' Open GL' 'array' 'audioop' 'binascii' 'c Pickle' 'c String IO' 'cmath' 'collections' 'datetime' 'errno' 'exceptions' 'gc' 'imageop' 'imp' 'itertools' 'marshal' 'math' 'mmap' 'msvcrt' 'nt' 'operator' 'parser' 'rgbimg' 'signal' 'strop' 'sys' 'thread' 'time' 'wx' 'xxsubtype' 'zipimport' 'zlib' 'nose' ' Py Qt 4 ' ' Py Side' 'os path']submodules []for m in mods submods get submodules m submodules + submodsmodules db['submodules'] submodulesreturn submodules
@taskdef mongorestore ctx path drop False db settings DB NAM Eport settings DB POR Tcmd 'mongorestore--db{db}--port{port}' format db db port port pty True if settings DB USER cmd + '--username{ 0 }' format settings DB USER if settings DB PASS cmd + '--password{ 0 }' format settings DB PASS if drop cmd + '--drop'cmd + '' + path ctx run cmd echo True
def get permission cache user key from django core cache import cachereturn cache get get cache key user key version get cache permission version
def autolevel percentile image selem out None mask None shift x False shift y False p0 0 p1 1 return apply percentile cy autolevel image selem out out mask mask shift x shift x shift y shift y p0 p0 p1 p1
@addon view@non atomic requestsdef usage series request addon group start end format date range check series params or 404 group start end format check stats permission request addon series get series Theme User Count if addon type amo ADDON PERSONA else Update Count addon addon id date range date range if format 'csv' return render csv request addon series ['date' 'count'] elif format 'json' return render json request addon series
def test ada fit ada ADASYN random state RND SEED ada fit X Y assert equal ada min c 0 assert equal ada maj c 1 assert equal ada stats c [0 ] 8 assert equal ada stats c [1 ] 12
def render modal workflow request html template js template template vars None response keyvars []if html template html render to string html template template vars or {} request request response keyvars append u"'html' %s" % json dumps html if js template js render to string js template template vars or {} request request response keyvars append u"'onload' %s" % js response text u'{%s}' % u' ' join response keyvars return Http Response response text content type u'text/javascript'
@register simple tagdef static path return staticfiles storage url path
def iddp id eps A A np asfortranarray A k idx rnorms id iddp id eps A n A shape[ 1 ]proj A T ravel [ k * n - k ] reshape k n - k order 'F' return k idx proj
def get overrides for ccx ccx overrides cache request cache get cache 'ccx-overrides' if ccx not in overrides cache overrides {}query Ccx Field Override objects filter ccx ccx for override in query block overrides overrides setdefault override location {} block overrides[override field] json loads override value block overrides[ override field + ' id' ] override idblock overrides[ override field + ' instance' ] overrideoverrides cache[ccx] overridesreturn overrides cache[ccx]
def write fd data return Write Event fd data
def dropout layer state before use noise trng proj tensor switch use noise state before * trng binomial state before shape p 0 5 n 1 dtype state before dtype state before * 0 5 return proj
def make transform graph docs import inspectfrom textwrap import dedentfrom extern import sixfrom baseframe import Base Coordinate Frame frame transform graphisclass inspect isclasscoosys [item for item in six itervalues globals if isclass item and issubclass item Base Coordinate Frame ]graphstr frame transform graph to dot graph addnodes coosys docstr '\n Thediagrambelowshowsallofthecoordinatesystemsbuiltintothe\n`~astropy coordinates`package theiraliases usefulforconverting\nothercoordinatestothemusingattribute-styleaccess andthe\npre-definedtransformationsbetweenthem Theuserisfreeto\noverrideanyofthesetransformationsbydefiningnewtransformations\nbetweenthesesystems butthepre-definedtransformationsshouldbe\nsufficientfortypicalusage \n\n Thegraphalsoindicatesthepriorityforeachtransformationasa\nnumbernexttothearrow Theseprioritiesareusedtodecidethe\npreferredorderwhentwotransformationpathshavethesamenumber\nofsteps Theseprioritiesaredefinedsuchthatthepathwitha\n*smaller*totalpriorityisfavored \n\n\n graphviz \n\n'return dedent docstr + '' + graphstr replace '\n' '\n'
def subtract modulo image 1 image 2 image 1 load image 2 load return image 1 new image 1 im chop subtract modulo image 2 im
def is Large Same Direction inset loop radius if euclidean is Widdershins inset euclidean is Widdershins loop return Falsereturn get Is Large inset radius and len inset > 2
def Create Default GUI app Class None if app Class is None import intpyappapp Class intpyapp Interactive Python Appapp Class Init Instance
def bool val if isinstance val six string types and val lower 'false' return Falsereturn bool val
def build bond iface **settings deb major grains ['osrelease'][ 1]opts parse settings bond settings iface try template JINJA get template 'conf jinja' except jinja 2 exceptions Template Not Found log error ' Couldnotloadtemplateconf jinja' return ''data template render {'name' iface 'bonding' opts} if 'test' in settings and settings['test'] return read temp data write file iface data DEB NETWORK CONF FILES '{ 0 } conf' format iface path os path join DEB NETWORK CONF FILES '{ 0 } conf' format iface if deb major '5 ' for line type in 'alias' 'options' cmd ['sed' '-i' '-e' '/^{ 0 }\\s{ 1 } */d' format line type iface '/etc/modprobe conf'] salt ['cmd run'] cmd python shell False salt ['file append'] '/etc/modprobe conf' path salt ['kmod load'] 'bonding' salt ['pkg install'] 'ifenslave- 2 6' return read file path
def get unique variable name candidates tf get collection tf Graph Keys GLOBAL VARIABLES name if not candidates raise Value Error ' Couldntfindvariable%s' % name for candidate in candidates if candidate op name name return candidateraise Value Error ' Variable%sdoesnotuniquelyidentifyavariable' name
def hexify data chunksize None if chunksize is None chunksize hex chunksizehex data encode 'hex codec' l len hex if l > chunksize chunks []i 0while i < l chunks append hex[i i + chunksize ] i + chunksizehex '' join chunks return hex
def test hsl to rgb part 12 assert hsl to rgb 300 20 50 153 102 153 assert hsl to rgb 300 60 50 204 51 204 assert hsl to rgb 300 100 50 255 0 255
def get data url try request requests get url request raise for status except requests exceptions HTTP Error requests exceptions Connection Error as e raise Parse Error e items microdata get items request text for item in items if item itemtype [microdata URI 'http //schema org/ Recipe' ] return itemraise Parse Error ' Norecipedatafound'
def insert hyphens node hyphenator textattrs u'text' u'tail' if isinstance node lxml etree Entity textattrs u'tail' for attr in textattrs text getattr node attr if not text continuenew data u'' join [hyphenator inserted w hyphen u'\xad' for w in text split u'' ] if text[ 0 ] isspace new data u'' + new data if text[ -1 ] isspace new data + u''setattr node attr new data for child in node iterchildren insert hyphens child hyphenator
def get Top Paths paths top -9 876543219876543 e+ 17 for path in paths for point in path top max top point z return top
def normalize dictionary data dict for key value in data dict items if not isinstance key str del data dict[key]data dict[str key ] valuereturn data dict
@register filterdef display url url url force bytes url errors 'replace' return urllib unquote url decode 'utf- 8 ' errors 'replace'
def generative network z with slim arg scope [slim conv 2 d transpose] activation fn tf nn elu normalizer fn slim batch norm normalizer params {'scale' True} net tf reshape z [M 1 1 d] net slim conv 2 d transpose net 128 3 padding 'VALID' net slim conv 2 d transpose net 64 5 padding 'VALID' net slim conv 2 d transpose net 32 5 stride 2 net slim conv 2 d transpose net 1 5 stride 2 activation fn None net slim flatten net return net
def get file json path with open path u'r' as f return json load f
def ancestry path out []last path Nonewhile path path os path dirname path if path last path breaklast path pathif path out insert 0 path return out
def Classify Include fileinfo include is system is cpp h include in CPP HEADERS if is system and os path splitext include [1 ] in [' hpp' ' hxx' ' h++'] is system Falseif is system if is cpp h return CPP SYS HEADE Relse return C SYS HEADER target dir target base os path split Drop Common Suffixes fileinfo Repository Name include dir include base os path split Drop Common Suffixes include target dir pub os path normpath target dir + '/ /public' target dir pub target dir pub replace '\\' '/' if target base include base and include dir target dir or include dir target dir pub return LIKELY MY HEADE Rtarget first component RE FIRST COMPONENT match target base include first component RE FIRST COMPONENT match include base if target first component and include first component and target first component group 0 include first component group 0 return POSSIBLE MY HEADE Rreturn OTHER HEADER
def find dynamicsymbols expression exclude None t set {dynamicsymbols t}if exclude if iterable exclude exclude set set exclude else raise Type Error 'excludekwargmustbeiterable' else exclude set set return set [i for i in expression atoms Applied Undef Derivative if i free symbols t set ] - exclude set
def in 6 ismlladdr str return in 6 isincluded str 'ff 02 ' 16
def create ofb cipher factory **kwargs cipher state factory create base cipher kwargs iv kwargs pop 'IV' None IV kwargs pop 'iv' None if None None iv IV iv get random bytes factory block size if iv is not None if IV is not None raise Type Error " Youmusteitheruse'iv'or'IV' notboth" else iv I Vif kwargs raise Type Error ' Unknownparametersfor OFB %s' % str kwargs return Ofb Mode cipher state iv
def init mpstate return Cmdlong Module mpstate
def unpack callbacks cbs if cbs return [[i for i in f if i] for f in zip *cbs ]else return [ ]
def recreate field unbound if not isinstance unbound Unbound Field raise Value Error 'recreate fieldexpects Unbound Fieldinstance %swaspassed ' % type unbound return unbound field class *unbound args **unbound kwargs
def test attribute access can compile u' foobarbaz ' can compile u' foo[bar]baz ' can compile u' foobar[baz][ 0 ]quux[frob] ' can compile u' foobar[ +1234 ]quux[frob] ' cant compile u' foobar baz[ 0 ]quux[frob] ' cant compile u' foobarbaz 0 quux[frob] ' cant compile u' foobarbaz[ 0 ]quux{frob} '
def precedence state try return PRECEDENCE index state except Value Error return PRECEDENCE index None
def mult Mat Vect v A m1 B m2 if mult Mat Vect dot modulo is None A sym tensor lmatrix 'A' s sym tensor ivector 's' m sym tensor iscalar 'm' A2 sym tensor lmatrix 'A 2 ' s2 sym tensor ivector 's 2 ' m2 sym tensor iscalar 'm 2 ' o Dot Modulo A sym s sym m sym A2 sym s2 sym m2 sym mult Mat Vect dot modulo function [A sym s sym m sym A2 sym s2 sym m2 sym] o profile False f mult Mat Vect dot modulof input storage[ 0 ] storage[ 0 ] Af input storage[ 1 ] storage[ 0 ] v[ 3]f input storage[ 2 ] storage[ 0 ] m1 f input storage[ 3 ] storage[ 0 ] Bf input storage[ 4 ] storage[ 0 ] v[ 3 ]f input storage[ 5 ] storage[ 0 ] m2 f fn r f output storage[ 0 ] storage[ 0 ]return r
def endit end clock total end - START print ' Completiontime {0 }seconds ' format total
def get isnan dtype if isinstance dtype types Float types Complex return np isnanelse @register jitabledef trivial isnan x return Falsereturn trivial isnan
@validate 'form' def valid att in label arch return not arch xpath '//label[not @foror@string ]'
def decrypt int cyphertext dkey n assert int cyphertext 'cyphertext' assert int dkey 'dkey' assert int n 'n' message pow cyphertext dkey n return message
def notify context message priority message get 'priority' CONF default notification level priority priority lower logger logging get Logger 'glance openstack common notification %s' % message['event type'] getattr logger priority jsonutils dumps message
def burt table data variables values [ var value for var in variables for value in var values]table numpy zeros len values len values counts [len attr values for attr in variables]offsets numpy r [ 0 numpy cumsum counts ]for i in range len variables for j in range i + 1 var 1 variables[i]var 2 variables[j]cm contingency get contingency data var 2 var 1 start 1 end 1 offsets[i] offsets[i] + counts[i] start 2 end 2 offsets[j] offsets[j] + counts[j] table[start 1 end 1 start 2 end 2 ] + cmif i j table[start 2 end 2 start 1 end 1 ] + cm Treturn values table
def Element tag *args **kw if '{' not in tag tag '{%s}%s' % atom ns tag return atom parser makeelement tag *args **kw
def assert calculated changes for deployer case deployer node state node config nonmanifest datasets additional node states additional node config expected changes local state leases Leases cluster state compute cluster state node state additional node states nonmanifest datasets cluster configuration Deployment nodes {node config} additional node config leases leases changes deployer calculate changes cluster configuration cluster state local state case assert Equal expected changes changes
def pickle dump data filename fh open filename 'w' try pickle dump data fh finally fh close
def stack tup axis 0 return concatenate [cupy expand dims x axis for x in tup] axis
def set permissions vhost user conf ' *' write ' *' read ' *' runas None if runas is None and not salt utils is windows runas salt utils get user res salt ['cmd run all'] [ context ['rabbitmqctl'] 'set permissions' '-p' vhost user conf write read] runas runas python shell False msg ' Permissions Set'return format response res msg
def generate output dataframe data subset defaults cols set data subset columns desired cols set defaults data subset drop cols - desired cols axis 1 inplace True for col in desired cols - cols data subset[col] defaults[col]return data subset
def make choices choices return list zip choices choices
def get Evaluated Expression Value By Split Line words xml Element evaluators []for word Index word in enumerate words next Word ''next Word Index word Index + 1 if next Word Index < len words next Word words[next Word Index]evaluator get Evaluator evaluators next Word word xml Element if evaluator None evaluators append evaluator while get Brackets Exist evaluators passevaluated Expression Value Evaluators get Evaluated Expression Value Evaluators evaluators if len evaluated Expression Value Evaluators > 0 return evaluated Expression Value Evaluators[ 0 ] valuereturn None
def click component from menu category component type is advanced if is advanced world retry on exception click advanced ignored exceptions Assertion Error link world retry on exception lambda find matching button category component type ignored exceptions Assertion Error world retry on exception lambda link click
def process SVG Elementtext element Node svg Reader if svg Reader y Axis Pointing Upward returnfont Family get Style Value ' Gentium Basic Regular' element Node 'font-family' font Size get Right Strip Alphabet Percent get Style Value '12 0' element Node 'font-size' matrix SVG get Chain Matrix SVG If Necessary element Node svg Reader y Axis Pointing Upward loop Layer svg Reader get Loop Layer translate euclidean get Complex Default By Dictionary Keys complex element Node attributes 'x' 'y' for text Complex Loop in get Text Complex Loops font Family font Size element Node get Text Content svg Reader y Axis Pointing Upward translated Loop []for text Complex Point in text Complex Loop translated Loop append text Complex Point + translate loop Layer loops append matrix SVG get Transformed Path translated Loop
def set Closed Attribute revolutions xml Element xml Element attribute Dictionary['closed'] str evaluate get Evaluated Boolean Default revolutions < 1 'closed' xml Element lower
def default environment return dict VARS
def get cache key user or username size prefix if isinstance user or username get user model user or username get username user or username key six u '%s %s %s' % prefix user or username size return six u '%s %s' % slugify key [ 100 ] hashlib md 5 force bytes key hexdigest
def storage uri for key key if not isinstance key boto s3 key Key raise Invalid Uri Error ' Requestedkey %s isnotasubclassofboto s3 key Key' % str type key prov name key bucket connection provider get provider name uri str '%s //%s/%s' % prov name key bucket name key name return storage uri uri str
def magic memit self line '' opts stmt self parse options line 'r t' posix False strict False repeat int getattr opts 'r' 1 if repeat < 1 repeat 1 timeout int getattr opts 't' 0 if timeout < 0 timeout Nonemem usage []for in range repeat tmp memory usage func exec stmt self shell user ns timeout timeout mem usage extend tmp if mem usage print 'maximumof%d %f M Bperloop' % repeat max mem usage else print 'ERROR couldnotreadmemoryusage trywithalowerintervalormoreiterations'
def read py file filename skip encoding cookie True with open filename as f if skip encoding cookie return '' join strip encoding cookie f else return f read
def format number value max digits decimal places if value is None return Noneif isinstance value decimal Decimal context decimal getcontext copy if max digits is not None context prec max digitsif decimal places is not None value value quantize decimal Decimal ' 1' ** decimal places context context else context traps[decimal Rounded] 1value context create decimal value return '{ f}' format value if decimal places is not None return '% *f' % decimal places value return '{ f}' format value
def root mean square error y real y pred y real y pred check arrays y real y pred return np sqrt np sum y pred - y real ** 2 / y real shape[ 0 ]
def factor calculate evaluator types operator for typ in types if operator '-' if is number typ yield create evaluator - typ obj elif operator 'not' value typ py bool if value is None return yield create evaluator not value else yield typ
def start name cmd ['service' name 'start']return not salt ['cmd retcode'] cmd python shell False
def get command args zone get zone args project id args name if not zone print ' Zonenotfound 'else print ' Zone {} {} {}' format zone name zone dns name zone description
def has change path cmd sql return u'setsearch path' in sql lower
def sanitize file name name substitute ' ' as unicode False if isinstance name unicode name name encode filesystem encoding 'ignore' one filename sanitize sub substitute name one re sub '\\s' '' one strip bname ext os path splitext one one re sub '^\\ +$' ' ' bname if as unicode one one decode filesystem encoding one one replace ' ' substitute one + extif one and one[ -1 ] in ' ' '' one one[ -1 ] + ' ' if one startswith ' ' one ' ' + one[ 1 ] return one
def get reader identity global FORMAT READER Sif FORMAT READERS is None import readers return FORMAT READERS get identity None
@register inclusion tag 'addons/review list box html' @jinja 2 contextfunctiondef review list box context addon reviews c dict context items c update addon addon reviews reviews return c
def get if addr 6 iff for x in in 6 getifaddr if x[ 2 ] iff and x[ 1 ] IPV 6 ADDR GLOBAL return x[ 0 ]return None
def check integrity models messages dict error [] warning [] for model in models validators []for name in dir model if not name startswith ' check' continueobj getattr model name if getattr obj 'validator type' None validators append obj for func in validators messages[func validator type] extend func for msg in sorted messages['error'] logger error 'E-%d %s %s %s' % msg for msg in sorted messages['warning'] logger warning 'W-%d %s %s %s' % msg
def restore nodes global FAKE NODES FAKE NODES ['fake-mini']
def get user impact score user id model user models User Stats Model get user id strict False if model return model impact scoreelse return 0
def hard sigmoid x return Hard Sigmoid x
def virtual if not HAS ELASTICSEARCH return False ' Cannotloadmoduleelasticsearch elasticsearchlibrariesnotfound' return True
def split line endings data lines NEWLINE RE split data if not lines[ -1 ] lines lines[ -1 ]return lines
def description setter registry xml parent data descriptionsetter XML Sub Element xml parent 'hudson plugins descriptionsetter Description Setter Publisher' XML Sub Element descriptionsetter 'regexp' text data get 'regexp' '' XML Sub Element descriptionsetter 'regexp For Failed' text data get 'regexp-for-failed' '' if 'description' in data XML Sub Element descriptionsetter 'description' text data['description']if 'description-for-failed' in data XML Sub Element descriptionsetter 'description For Failed' text data['description-for-failed']for matrix str data get 'set-for-matrix' False lower XML Sub Element descriptionsetter 'set For Matrix' text for matrix
def kit export csv output ''for resourcename in ['kit' 'item' 'kit item'] table module + ' ' + resourcename table db[ table]query auth s3 accessible query 'read' table if 'deleted' in table query table deleted False table deleted None & query output + 'TABLE' + table + '\n' output + str db query select output + '\n\n'import gluon contenttyperesponse headers[' Content- Type'] gluon contenttype contenttype ' csv' filename '%s kits csv' % request env server name response headers[' Content-disposition'] 'attachment filename %s' % filename return output
def register detector cls detectorshub register cls return cls
def sensitive variables *variables def decorator func @functools wraps func def sensitive variables wrapper *args **kwargs if variables sensitive variables wrapper sensitive variables variableselse sensitive variables wrapper sensitive variables ' ALL 'return func *args **kwargs return sensitive variables wrapperreturn decorator
def getregentry return registry 'latex'
def get jid jid options get options ret None response request 'GET' options['url'] + options['db'] + '/' + jid if 'error' in response log error ' Unabletoget JID"{ 0 }" "{ 1 }"' format jid response return {}return { response['id'] response}
def RANGE value if u' ' in value start stop value split u' ' 1 start UINT start if stop strip stop UINT stop if start > stop raise Value Error u' Endmustbelargerthanstart' else stop Noneelse start UINT value stop start + 1 return slice start stop
def check version name url version expected if expected is None return Falseif Loose Version version < Loose Version expected print u'***{ 0 }<{ 1 }>istooold ***' format name url print u' Installedversion{ 0 } required{ 1 }' format version expected return Truereturn False
def os bootstrap names sys builtin module namesjoin Noneif 'posix' in names sep '/'from posix import statelif 'nt' in names sep '\\'from nt import statelif 'dos' in names sep '\\'from dos import statelif 'os 2 ' in names sep '\\'from os 2 import statelse raise Import Error 'noosspecificmodulefound'if join is None def join a b sep sep if a '' return blastchar a[ -1 ]if lastchar '/' or lastchar sep return a + b return a + sep + b global os stat os stat statglobal os path join os path join join
def tokenize sql encoding None return Lexer get tokens sql encoding
def clear BACKEND clear
def includeme config settings config get settings config include 'pyramid tm' session factory get session factory get engine settings config registry['dbsession factory'] session factoryconfig add request method lambda r get tm session session factory r tm 'dbsession' reify True
def map fragment list flist reflist mapped []for f in flist rank []for i in range 0 len reflist rf reflist[i]rms f - rf rank append rms rf rank sort fragment rank[ 0 ][ 1 ]mapped append fragment return mapped
def test magic rerun ip get ipython ip run cell 'a 10 ' store history True ip run cell 'a+ 1' store history True nt assert equal ip user ns['a'] 11 ip run cell '%rerun' store history True nt assert equal ip user ns['a'] 12
def dump data stream None **kwargs kwargs[' Dumper'] Astropy Dumperreturn yaml dump data stream stream **kwargs
def get foreign keys t images t image members t image properties dialect foreign keys []if t image members foreign keys img members fk name list t image members foreign keys [0 ] nameif dialect 'mysql' fk 1 migrate Foreign Key Constraint [t image members c image id] [t images c id] name img members fk name else fk 1 migrate Foreign Key Constraint [t image members c image id] [t images c id] foreign keys append fk 1 if t image properties foreign keys img properties fk name list t image properties foreign keys [0 ] nameif dialect 'mysql' fk 2 migrate Foreign Key Constraint [t image properties c image id] [t images c id] name img properties fk name else fk 2 migrate Foreign Key Constraint [t image properties c image id] [t images c id] foreign keys append fk 2 return foreign keys
def bytes 2 int bytes if not type bytes is types List Type or type bytes is types String Type raise Type Error ' Youmustpassastringoralist' integer 0for byte in bytes integer * 256 if type byte is types String Type byte ord byte integer + bytereturn integer
def Check Free Space if cfg download free and not sabnzbd downloader Downloader do paused if misc diskfree cfg download dir get path < cfg download free get float / GIGI logging warning T ' Toolittlediskspaceforcing PAUSE' Downloader do pause save False emailer diskfull
def find unit course url def find node url '\n Findnodeincoursetreeforurl \n'if node location to deprecated string url return nodefor child in node get children found find child url if found return foundreturn Noneunit find course url if unit is None raise Dashboard Error " Couldn'tfindmoduleforurl {0 }" format url return unit
def configure registry client global CLIENT KWARGS CLIENT HOST CLIENT POR Ttry host port CONF registry host CONF registry port except cfg Config File Value Error msg ' Configurationoptionwasnotvalid' LOG error msg raise exception Bad Registry Connection Configuration msg except Index Error msg ' Couldnotfindrequiredconfigurationoption' LOG error msg raise exception Bad Registry Connection Configuration msg CLIENT HOST host CLIENT PORT port CLIENT KWARGS {'use ssl' CONF registry client protocol lower 'https' 'key file' CONF registry client key file 'cert file' CONF registry client cert file 'ca file' CONF registry client ca file 'insecure' CONF registry client insecure 'timeout' CONF registry client timeout}if not CONF use user token configure registry admin creds
def email outbox if not auth s3 logged in session error T ' Requires Login ' redirect URL c 'default' f 'user' args 'login' tablename 'msg email'table s3 db msg emails 3 filter table inbound False table inbound readable Falses 3 crud strings[tablename] Storage title display T ' Email Details' title list T ' Sent Emails' label list button T ' View Sent Emails' label delete button T ' Delete Email' msg record deleted T ' Emaildeleted' msg list empty T ' No Emailscurrentlyin Outbox' def postp r output if isinstance output dict add btn A T ' Compose' class 'action-btn' href URL f 'compose' output['rheader'] add btnreturn outputs 3 postp postps 3 db configure tablename editable False insertable False listadd False list fields ['id' 'date' 'to address' 'subject' 'body'] return s3 rest controller module 'email'
def get data files dirs results []for directory in dirs for root dirs files in os walk directory files [os path join root file for file in files]results append root files return results
def init mpstate return Go Pro Module mpstate
@contextfunctiondef easy invite block context emails None if emails is None emails []request context['request']response format 'html'if 'response format' in context response format context['response format']return Markup render to string 'core/tags/easy invite' {'emails' emails} context instance Request Context request response format response format
def lod sort by key list indexkey list sort lambda a b a[indexkey] < b[indexkey] return list
def set default encoding file file global default encoding filedefault encoding file file
def add Faces By Convex faces indexed Loop if len indexed Loop < 3 returnindex Begin indexed Loop[ 0 ] indexfor indexed Point Index in xrange 1 len indexed Loop - 1 index Center indexed Loop[indexed Point Index] indexindex End indexed Loop[ indexed Point Index + 1 % len indexed Loop ] indexif index Begin index Center and index Center index End and index End index Begin face From Convex face Face face From Convex index len faces face From Convex vertex Indexes append index Begin face From Convex vertex Indexes append index Center face From Convex vertex Indexes append index End faces append face From Convex
def bytes to json value if isinstance value bytes value base 64 encodestring value return value
def get public key ssh conf path os path expanduser '~/ ssh' dsa public key path os path join ssh conf path 'id dsa pub' dsa private key path os path join ssh conf path 'id dsa' rsa public key path os path join ssh conf path 'id rsa pub' rsa private key path os path join ssh conf path 'id rsa' has dsa keypair os path isfile dsa public key path and os path isfile dsa private key path has rsa keypair os path isfile rsa public key path and os path isfile rsa private key path if has dsa keypair logging info 'DS Akeypairfound usingit' public key path dsa public key pathelif has rsa keypair logging info 'RS Akeypairfound usingit' public key path rsa public key pathelse logging info ' Neither RS Anor DS Akeypairfound creating DS Asshkeypair' utils system 'ssh-keygen-tdsa-q-N""-f%s' % dsa private key path public key path dsa public key pathpublic key open public key path 'r' public key str public key read public key close return public key str
def get addons request addons addon id action items []a Menu Item a selected not addon id a text a url ' All My Add-ons' reverse 'devhub feed all' if action a url + '?action ' + action items append a for addon in addons item Menu Item try item selected addon id and addon id int addon id except Value Error passurl reverse 'devhub feed' args [addon slug] if action url + '?action ' + action item text item url addon name url items append item return items
def wrap clause in parens sql if sql strip sql u' {} ' format sql return sa text sql
def sleep duration f Future IO Loop current call later duration lambda f set result None return f
def get effective user requesting user target username if target username requesting user username return requesting userelif target username '' return Anonymous User elif can view courses for username requesting user target username return User objects get username target username else raise Permission Denied
def request from dict d spider None cb d['callback']if cb and spider cb get method spider cb eb d['errback']if eb and spider eb get method spider eb return Request url to native str d['url'] callback cb errback eb method d['method'] headers d['headers'] body d['body'] cookies d['cookies'] meta d['meta'] encoding d[' encoding'] priority d['priority'] dont filter d['dont filter']
def mark plot labels app document for name explicit in six iteritems document nametypes if not explicit continuelabelid document nameids[name]if labelid is None continuenode document ids[labelid]if node tagname in u'html only' u'latex only' for n in node if n tagname u'figure' sectname namefor c in n if c tagname u'caption' sectname c astext breaknode[u'ids'] remove labelid node[u'names'] remove name n[u'ids'] append labelid n[u'names'] append name document settings env labels[name] document settings env docname labelid sectname break
def set Up test db force False global TESTDB INITALIZE Dif not TESTDB INITALIZED or force tear Down test db Main DB initialize Cache DB initialize Failed DB initialize TESTDB INITALIZED True
def get nll x parzen batch size 10 inds range x shape[ 0 ] n batches int numpy ceil float len inds / batch size times []nlls []for i in range n batches begin time time nll parzen x[inds[i n batches]] end time time times append end - begin nlls extend nll if i % 10 0 print i numpy mean times numpy mean nlls return numpy array nlls
def slow t t slow Truereturn t
def abstract Path case return md 5 case mktemp hexdigest
def tile key layer coord format path '' path path strip '/' name layer name tile '% zoom d/% column d/% row d' % coord dict ext format lower return str '% path s/% name s/% tile s % ext s' % locals
def add kdb reader sub signature cls kdb readers[sub signature] cls
def monitor load globals sock filename ext return communicate sock ' load globals ' settings [filename ext]
def get loc if LOC KEY in context return context [LOC KEY]
def token view request return Http Response render csrf token template request
def update stylesheet obj get stylesheet cache clear if not sip isdeleted obj obj set Style Sheet get stylesheet obj STYLESHEET
def make range iterator typ return cgutils create struct proxy typ
def time difference date 1 date 2 later mktime date 1 timetuple + date 1 microsecond / 1000000 0 earlier mktime date 2 timetuple + date 2 microsecond / 1000000 0 return later - earlier
def get data files import sysfrom os path import join abspath dirname exists splitpath abspath dirname file starting points [path]if not path startswith sys prefix starting points append sys prefix for path in starting points while path '/' share jupyter join path 'share' 'jupyter' 'hub' if exists join share jupyter 'static' 'components' return share jupyter path split path return ''
def get demography template stream model tp dir None if tp dir is None filename sep join [builtin tpl dir model + ' par' ] else filename sep join [tp dir model + ' par' ] with open filename 'r' as f l f readline while l '' stream write l l f readline
def new data None return SHA 224 Hash new data
def decode Inventory Entry level 2 document count Inventory str document for token in document if token dep u'pobj' or u'meta' and token pos u'NOUN' or u'NNS' or u'NN' item ''for i in token children item + '' + str i item + '' + str token count item itemif token head dep u'prep' breakelse amount Unit token head headcount unit str amount Unit for inner in amount Unit children if inner pos u'NUM' count amount + str inner return count
def test iba sklearn metrics y true y pred make prediction binary True acc make index balanced accuracy alpha 0 5 squared True accuracy score score acc y true y pred assert equal score 0 54756 jss make index balanced accuracy alpha 0 5 squared True jaccard similarity score score jss y true y pred assert equal score 0 54756 pre make index balanced accuracy alpha 0 5 squared True precision score score pre y true y pred assert equal score 0 65025 rec make index balanced accuracy alpha 0 5 squared True recall score score rec y true y pred assert equal score 0 4161600000000001
@conf commands registerdef split layers lower upper fval None **fval if fval is not None fval update fval split bottom up lower upper **fval split top down lower upper **fval
def check classification targets y y type type of target y if y type not in ['binary' 'multiclass' 'multiclass-multioutput' 'multilabel-indicator' 'multilabel-sequences'] raise Value Error ' Unknownlabeltype %r' % y type
def image meta system metadata image meta {}for md key md value in system metadata iteritems if md key startswith 'image ' image meta[md key[ 6 ]] md valuereturn image meta
def build encoder tparams options im tensor matrix 'im' dtype 'float 32 ' s tensor matrix 's' dtype 'float 32 ' eim get layer 'ff' [1 ] tparams im options prefix 'ff im' activ 'linear' es get layer 'ff' [1 ] tparams s options prefix 'ff s' activ 'linear' lim l2 norm eim ls l2 norm es return [im s] lim ls
def optimal mode data if data isdigit return MODE NUMBE Rif RE ALPHA NUM match data return MODE ALPHA NU Mreturn MODE 8BIT BYTE
def get rpc server target endpoint serializer Request Context Serializer Json Payload Serializer access policy dispatcher Default RPC Access Policyreturn oslo messaging get rpc server TRANSPORT target [endpoint] executor 'eventlet' serializer serializer access policy access policy
def virtual if HAS HEAT and HAS OSLO return 'heat'return False ' Theheatexecutionmodulecannotbeloaded theheatclientandoslo serializationpythonlibraryisnotavailable '
def Date Time 2 literal d c return string literal format TIMESTAMP d c
def test broadcast dims test 1 2 3 test 2 1 3 test 2 3 1 test 2 1 2 3 test 2 2 1 3 test 2 2 3 1
def strip course id path course id unicode FAKE COURSE KEY return path split course id [0 ]
def parse environ block data ret {}pos 0WINDOWS WINDOW Swhile True next pos data find '\x 00 ' pos if next pos < pos breakequal pos data find ' ' pos next pos if equal pos > pos key data[pos equal pos]value data[ equal pos + 1 next pos]if WINDOWS key key upper ret[key] valuepos next pos + 1 return ret
def dmp eval tail f A u K if not A return fif dmp zero p f u return dmp zero u - len A e rec eval tail f 0 A u K if u len A - 1 return eelse return dmp strip e u - len A
def dnn gradweight img topgrad kerns shp border mode 'valid' subsample 1 1 conv mode 'conv' img gpu contiguous img topgrad gpu contiguous topgrad kerns shp theano tensor as tensor variable kerns shp desc Gpu Dnn Conv Desc border mode border mode subsample subsample conv mode conv mode img shape kerns shp out gpu alloc empty *kerns shp return Gpu Dnn Conv Grad W img topgrad out desc
def check valid naming pattern None multi None if pattern is None pattern sickbeard NAMING PATTER Nlogger log u' Checkingwhetherthepattern' + pattern + 'isvalidforasingleepisode' logger DEBUG valid validate name pattern None if multi is not None logger log u' Checkingwhetherthepattern' + pattern + 'isvalidforamultiepisode' logger DEBUG valid valid and validate name pattern multi return valid
def script vm deploy script salt utils cloud os script config get cloud config value 'script' vm opts vm opts salt utils cloud salt config to yaml salt utils cloud minion config opts vm return deploy script
def strip src text pattern text multi line commentpattern text + u' ' + single line comment pattern text + u' ' + single quoted character pattern text + u' ' + double quoted string pattern text + u' ' + preprocessor directive pattern re compile pattern text re M re S striped src text pattern sub u'' src text return striped src text
def libvlc vlm add input p instance psz name psz input f Cfunctions get 'libvlc vlm add input' None or Cfunction 'libvlc vlm add input' 1 1 1 None ctypes c int Instance ctypes c char p ctypes c char p return f p instance psz name psz input
def soft unicode s if not isinstance s text type s text type s return s
def is true value None try value int value except Value Error Type Error passtry value float value except Value Error Type Error passif isinstance value int float return value > 0 elif isinstance value six string types return str value lower 'true' else return bool value
def subs value subs {'group Of Names' ['nova Project']}if value in subs return [value] + subs[value] return [value]
def clear context context for var in x for x in context if x startswith 'chocolatey ' context pop var
def appendimages im 1 im 2 rows 1 im 1 shape[ 0 ]rows 2 im 2 shape[ 0 ]if rows 1 < rows 2 im 1 concatenate im 1 zeros rows 2 - rows 1 im 1 shape[ 1 ] axis 0 elif rows 1 > rows 2 im 2 concatenate im 2 zeros rows 1 - rows 2 im 2 shape[ 1 ] axis 0 return concatenate im 1 im 2 axis 1
def redirect url status '301 Moved Permanently' newloc urlparse urljoin context home + context path url context status statusheader ' Content- Type' 'text/html' header ' Location' newloc
def script from examples s output []for piece in Doc Test Parser parse s if isinstance piece Example output append piece source[ -1 ] want piece wantif want output append '# Expected ' output + [ '##' + l for l in want split '\n' [ -1 ]]else output + [ comment line l for l in piece split '\n' [ -1 ]]while output and output[ -1 ] '#' output pop while output and output[ 0 ] '#' output pop 0 return '\n' join output + '\n'
def in bounds x lb ub return np all x > lb & x < ub
def isgeneratorfunction object return bool isfunction object or ismethod object and object func code co flags & CO GENERATOR
def is msie 8 or 9 if request user agent is None or request user agent browser 'msie' or request user agent version is None return Falseversion tuple map int request user agent version split ' ' return 8 0 < version < 10 0
def render sls data saltenv 'base' sls '' **kws with warnings catch warnings record True as warn list data deserialize sls data or {} for item in warn list log warning '{warn}foundin{sls}saltenv {env}' format warn item message sls salt utils url create sls env saltenv log debug ' Resultsof SL Srendering \n{ 0 }' format data return data
def is protected type obj return isinstance obj six integer types + type None float Decimal datetime datetime datetime date datetime time
def mkswap device if not ismounted device run as root 'mkswap% device s' % locals else abort 'swappartitionismounted'
def sinh x np import module 'numpy' if isinstance x int float return interval np sinh x np sinh x elif isinstance x interval return interval np sinh x start np sinh x end is valid x is valid else raise Not Implemented Error
def escape rfc 3986 s if sys version info < 3 0 and isinstance s unicode s s encode u'utf- 8 ' return compat urllib parse quote s "%/ @& +$ ~*' ?#[]"
def get sd auth val sd auth pillar name 'serverdensity' sd pillar pillar get sd auth pillar name log debug ' Server Density Pillar {0 }' format sd pillar if not sd pillar log error ' Couldnotload{ 0 }pillar' format sd auth pillar name raise Command Execution Error '{ 0 }pillarisrequiredforauthentication' format sd auth pillar name try return sd pillar[val]except Key Error log error ' Couldnotfindvalue{ 0 }inpillar' format val raise Command Execution Error '{ 0 }valuewasnotfoundinpillar' format val
def end threads for t in thread Pool t my thread ended Truet join
def sort seq gap len seq swap Truewhile gap > 1 or swap gap max 1 int gap / 1 25 swap Falsefor i in range len seq - gap if seq[i] > seq[ i + gap ] seq[i] seq[ i + gap ] seq[ i + gap ] seq[i] swap Truereturn seq
def remove dups L seen before set [] L2 []for i in L if i not in seen before seen before add i L2 append i return L2
def set computer name name if name and six PY 2 name name decode 'utf- 8 ' if windll kernel 32 Set Computer Name Ex W win 32 con Computer Name Physical Dns Hostname name ret {' Computer Name' {' Current' get computer name }}pending get pending computer name if pending not in None False ret[' Computer Name'][' Pending'] pendingreturn retreturn False
def eval kfold features labels k 10 scan [ 2 ** t for t in range 0 9 1 ] seed 1234 npts len features kf K Fold npts n folds k random state seed scores []for s in scan scanscores []for train test in kf X train features[train]y train labels[train]X test features[test]y test labels[test]clf Logistic Regression C s clf fit X train y train score clf score X test y test scanscores append score print s score scores append np mean scanscores print scoress ind np argmax scores s scan[s ind]print s ind s return s
def ix *args out []nd len args for k new in enumerate args new cupy asarray new if new ndim 1 raise Value Error ' Crossindexmustbe 1 dimensional' if new size 0 new new astype numpy intp if cupy issubdtype new dtype cupy bool new new nonzero new new reshape 1 * k + new size + 1 * nd - k - 1 out append new return tuple out
def filter pathext val return os path splitext val or u'' [1 ]
def virt call domain function section comment **kwargs ret {'name' domain 'changes' {} 'result' True 'comment' ''}targeted domains fnmatch filter salt ['virt list domains'] domain changed domains list ignored domains list for domain in targeted domains try response salt ['virt {0 }' format function ] domain **kwargs if isinstance response dict response response['name']changed domains append {'domain' domain function response} except libvirt libvirt Error as err ignored domains append {'domain' domain 'issue' str err } if not changed domains ret['result'] Falseret['comment'] ' Nochangeshadhappened'if ignored domains ret['changes'] {'ignored' ignored domains}else ret['changes'] {section changed domains}ret['comment'] commentreturn ret
def walk node from collections import dequetodo deque [node] while todo node todo popleft todo extend iter child nodes node yield node
def list snapshots kwargs None call None if call 'function' raise Salt Cloud System Exit ' Thelist snapshotsfunctionmustbecalledwith-for--function ' ret {}vm properties ['name' 'root Snapshot' 'snapshot']vm list salt utils vmware get mors with properties get si vim Virtual Machine vm properties for vm in vm list if vm['root Snapshot'] if kwargs and kwargs get 'name' vm['name'] return {vm['name'] get snapshots vm['snapshot'] root Snapshot List }else ret[vm['name']] get snapshots vm['snapshot'] root Snapshot List elif kwargs and kwargs get 'name' vm['name'] return {}return ret
def virtual cmd detect os if salt utils which cmd return 'apache'return False ' Theapacheexecutionmodulecannotbeloaded apacheisnotinstalled '
def crt 1 m return gf crt 1 m ZZ
def ping server port s socket socket socket AF INET socket SOCK STREAM try s connect server port return Trueexcept socket error return Falsefinally s close
@require contextdef group type get context id inactive False expected fields None return group type get context id session None inactive inactive expected fields expected fields
def init if not directory get plugins Neutron Manager get instance
def build variant map result {}for name in dir messages value getattr messages name if isinstance value type and issubclass value messages Field for variant in getattr value 'VARIANTS' [] result[variant] valuereturn result
def identity x return x
def hours time string hours minutes int round hours * 60 return '% 02 d %02 d' % divmod minutes 60
def handle Message qry try get User Name except return skype Error qry qry decode 'utf 8 ' try if ' ' in qry and qry partition ' ' [0 ] in map lambda s s[ 0 ] read Friends return send Message Wait qry else return find Friends qry except Environment Error return Py Fred 'ch xtin skypingalfred error' False add Item 'skypeupdate' 'skypeupdate' ' No Skype Friends Found' ' Useskypeupdatetocachefriends ' True 'update' to XML except return Py Fred Generic Error
@require POST@login requireddef unwatch question request question id question get object or 404 Question pk question id Question Reply Event stop notifying request user question Question Solved Event stop notifying request user question return Http Response Redirect question get absolute url
def urlencode query doseq 0 def convert value doseq False if doseq and isinstance value list return [convert v for v in value]else return utils safestr value query dict [ k convert v doseq for k v in query items ] return urllib urlencode query doseq doseq
def get New Repository return Home Repository
def test pycuda theano from pycuda compiler import Source Modulemod Source Module '\n global voidmultiply them float*dest float*a float*b \n{\nconstinti thread Idx x \ndest[i] a[i]*b[i] \n}\n' multiply them mod get function 'multiply them' a numpy random randn 100 astype numpy float 32 b numpy random randn 100 astype numpy float 32 ga cuda ndarray Cuda Ndarray a gb cuda ndarray Cuda Ndarray b dest cuda ndarray Cuda Ndarray zeros a shape multiply them dest ga gb block 400 1 1 grid 1 1 assert numpy asarray dest a * b all
def follow dependencies subset package list dependency graph get dependency graph package list curr pkgs Noneupdated pkgs set subset while curr pkgs updated pkgs curr pkgs updated pkgsupdated pkgs set curr pkgs for package in curr pkgs updated pkgs update dependency graph[package] return sorted curr pkgs
def patch images new image dir pathto partial os path join new image dir if new image dir 'default' if not os path isdir new image dir raise IO Error ' Unabletofindtheusersupplieddirectory{}' format new image dir new images varname pathto filename for varname filename in image details if os path exists pathto filename globals update new images
def floating ip get pools context return IMPL floating ip get pools context
@with devicedef getprop name None with context quiet if name return process ['getprop' name] recvall strip result process ['getprop'] recvall expr '\\[ [^\\]]+ \\] \\[ * \\]'props {}for line in result splitlines if not line startswith '[' continue name value re search expr line groups if value isdigit value int value props[name] valuereturn props
def list remote pythons host result host run 'ls/usr/bin/python[ 0 - 9 ]*' return result stdout splitlines
def Find Ancestor At Indent node indent if node parent parent is None return nodeparent indent pytree utils Get Node Annotation node parent pytree utils Annotation CHILD INDENT if parent indent is not None and indent startswith parent indent return nodeelse return Find Ancestor At Indent node parent indent
def detect os if grains ['os family'] ' Red Hat' return 'apachectl'elif grains ['os family'] ' Debian' return 'apache 2 ctl'else return 'apachectl'
def absent name protocol None service address None ret {'name' name 'changes' {} 'result' True 'comment' ''}service check salt ['lvs check service'] protocol protocol service address service address if service check is True if opts ['test'] ret['result'] Noneret['comment'] 'LVS Service{ 0 }ispresentandneedstoberemoved' format name return retservice delete salt ['lvs delete service'] protocol protocol service address service address if service delete is True ret['comment'] 'LVS Service{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retelse ret['comment'] 'LVS Service{ 0 }removedfailed {1 } ' format name service delete ret['result'] Falsereturn retelse ret['comment'] 'LVS Service{ 0 }isnotpresent soitcannotberemoved' format name return ret
def ipv 4 netmask value valid errmsg False 'dottedquadorinteger CIDR 0-> 32 ' valid value int value if not valid and 0 < value < 32 valid salt utils validate net netmask value return valid value errmsg
@frappe whitelist def get contact list txt txt txt replace u'%' u'' def get users return filter None frappe db sql list u'selectemailfromtab Userwhereemaillike%s' u'%' + txt + u'%' try out filter None frappe db sql list u'selectemail idfrom`tab Contact`\n DCTB DCTB DCTB where`email id`like% txt sorderby\n DCTB DCTB DCTB if locate % txt s email id locate % txt s email id 99999 ' {u'txt' u'%%%s%%' % frappe db escape txt u' txt' txt replace u'%' u'' } if not out out get users except Exception as e if e args[ 0 ] 1146 out get users else raisereturn out
def nginx restart nginx ctl nginx conf '/etc/nginx conf' try proc subprocess Popen [nginx ctl '-c' nginx conf '-s' 'reload'] stdout subprocess PIPE stderr subprocess PIPE stdout stderr proc communicate if proc returncode 0 nginx proc subprocess Popen [nginx ctl '-c' nginx conf] stdout subprocess PIPE stderr subprocess PIPE stdout stderr nginx proc communicate if nginx proc returncode 0 raise errors Misconfiguration Error 'nginxrestartfailed \n%s\n%s' % stdout stderr except OS Error Value Error raise errors Misconfiguration Error 'nginxrestartfailed' time sleep 1
def get New Repository return Skeinforge Repository
def match hostname cert hostname if not cert raise Value Error 'emptyornocertificate' dnsnames []san cert get 'subject Alt Name' for key value in san if key 'DNS' if dnsname match value hostname returndnsnames append value if not dnsnames for sub in cert get 'subject' for key value in sub if key 'common Name' if dnsname match value hostname returndnsnames append value if len dnsnames > 1 raise Certificate Error "hostname%rdoesn'tmatcheitherof%s" % hostname ' ' join map repr dnsnames elif len dnsnames 1 raise Certificate Error "hostname%rdoesn'tmatch%r" % hostname dnsnames[ 0 ] else raise Certificate Error 'noappropriatecommon Nameorsubject Alt Namefieldswerefound'
def user create name password email tenant id None enabled True profile None project id None description None **connection args kstone auth profile **connection args if OS IDENTITY API VERSION > 2 if tenant id and not project id project id tenant iditem kstone users create name name password password email email project id project id enabled enabled description description else item kstone users create name name password password email email tenant id tenant id enabled enabled return user get item id profile profile **connection args
def hydrate bundles bundles field files digest list excluded files list bundles []zipped zip bundles field bundles bundles field filespecs list files digest list excluded files list for bundle filespecs files digest excluded files in zipped spec path bundles field address spec pathkwargs bundle kwargs kwargs[u'fileset'] eager fileset with spec getattr bundle u'rel path' spec path filespecs files digest excluded files bundles append Bundle Adaptor **kwargs return Hydrated Field u'bundles' bundles
def test disk store alt name abspath with Test Config DISK TEST CONFIG as directory object store empty dataset Mock Dataset 1 directory write '' 'files 1 / 000 /dataset 1 dat' absfoo os path abspath os path join directory temp directory 'foo txt' with open absfoo 'w' as f f write 'foo' try assert object store get data empty dataset extra dir 'dataset 1 files' alt name absfoo 'foo' except Object Invalid pass
def consume n iterator if n is None collections deque iterator maxlen 0 else next islice iterator n n None
def split axis x indices or sections axis force tuple False res Split Axis indices or sections axis x if force tuple and isinstance res chainer Variable res res return res
def virtual if has sense hat rotation salt ['pillar get'] 'sensehat rotation' 0 if rotation in [0 90 180 270 ] sensehat set rotation rotation False else log error '{ 0 }isnotavalidrotation Usingdefaultrotation ' format rotation return Trueelse return False ' The Sense Hatexcecutionmodulecannotbeloaded Sense Hatunavailable \n Thismodulecanonlybeusedona Raspberry Piwitha Sense Hat Alsomakesurethatthesense hatpythonlibraryisinstalled '
def expr to config expr conditions hps expr as apply expr if conditions is None conditions assert isinstance expr Apply expr to config expr conditions hps remove allpaths hps conditions
def create vs lb name ip port protocol profile pool name if opts ['load balancers'] get lb None username password list opts ['load balancers'][lb] values else raise Exception ' Unabletofind`{ 0 }`loadbalancer' format lb F5 F5 Mgmt lb username password F5 create vs name ip port protocol profile pool name return True
def Quote For Rsp File arg arg windows quoter regex sub lambda mo 2 * mo group 1 + '\\"' arg arg arg replace '%' '%%' return '"' + arg + '"'
def decode embedded strs src if not six PY 3 return srcif isinstance src dict return decode embedded dict src elif isinstance src list return decode embedded list src elif isinstance src bytes try return src decode except Unicode Error return srcelse return src
def get default tempdir namer Random Name Sequence dirlist candidate tempdir list flags text openflagsfor dir in dirlist if dir os curdir dir os path normcase os path abspath dir for seq in xrange 100 name namer next filename os path join dir name try fd os open filename flags 384 fp os fdopen fd 'w' fp write 'blat' fp close os unlink filename del fp fdreturn direxcept OS Error IO Error as e if e[ 0 ] errno EEXIST breakpassraise IO Error errno ENOENT ' Nousabletemporarydirectoryfoundin%s' % dirlist
def should switch to postcopy memory iteration current data remaining previous data remaining migration status if migration status 'running post-copy ' or previous data remaining < 0 return Falseif memory iteration > 1 progress percentage round previous data remaining - current data remaining * 100 / previous data remaining if progress percentage < 10 return Truereturn False
def decode ascii s return s
def pulled name tag 'latest' force False insecure registry False *args **kwargs inspect image salt ['docker inspect image']image name get image name name tag image infos inspect image image name if image infos['status'] and not force return valid name name comment ' Imagealreadypulled {0 }' format image name if opts ['test'] comment ' Image{ 0 }willbepulled' format image name return ret status name name comment comment previous id image infos['out'][' Id'] if image infos['status'] else None pull salt ['docker pull']returned pull name tag tag insecure registry insecure registry if previous id returned['id'] changes {name {'old' previous id 'new' returned['id']}}comment ' Image{ 0 }pulled' format image name else changes {}comment ''return ret status returned name changes changes comment comment
def find tag definition block offset block boundary next tag boundary block offset forward False if not boundary or not boundary is start return None False tag start boundaryclosing tag start closingtag tag start nameif tag start prefix tag tag start prefix + u' ' + tag return tag closing
def space 2 depth X r return Space 2 Depth r X
def random complex number a 2 b -1 c 3 d 1 rational False A B uniform a c uniform b d if not rational return A + I * B return nsimplify A rational True + I * nsimplify B rational True
def fetch image stream optimized context instance session vm name ds name vm folder ref res pool ref image ref instance image ref LOG debug " Downloadingimagefiledata% image ref stothe ES Xas V Mnamed'% vm name s'" {'image ref' image ref 'vm name' vm name} instance instance metadata IMAGE API get context image ref file size int metadata['size'] vm import spec build import spec for import vapp session vm name ds name read iter IMAGE API download context image ref read handle rw handles Image Read Handle read iter write handle rw handles Vmdk Write Handle session session host session port res pool ref vm folder ref vm import spec file size image transfer read handle write handle imported vm ref write handle get imported vm LOG info LI ' Downloadedimagefiledata% image ref s' {'image ref' instance image ref} instance instance vmdk vm util get vmdk info session imported vm ref vm name session call method session vim ' Unregister VM' imported vm ref LOG info LI ' Theimported V Mwasunregistered' instance instance return vmdk capacity in bytes
def jsonp is valid funcname func regex re compile '\n^[a-z A-Z \\$]\n[a-z A-Z 0 - 9 \\$]*\n \\[[a-z A-Z 0 - 9 \\$]*\\] *\n \\ [a-z A-Z 0 - 9 \\$]+\n \\[[a-z A-Z 0 - 9 \\$]*\\] *\n *$\n' re VERBOSE return bool func regex match funcname
def print Result address hostname if address sys stdout write address + '\n' else sys stderr write 'ERROR No I Paddressesfoundforname%r\n' % hostname
def create whitelist set whitelist path f open whitelist path 'r' whitelist set set [line strip for line in f] f close return whitelist set
def extract labels filename num images print ' Extracting' filename with gzip open filename as bytestream bytestream read 8 buf bytestream read 1 * num images labels np frombuffer buf dtype np uint 8 astype np int 64 return labels
def commit cwd targets None msg None user None username None password None *opts if msg opts + '-m' msg if targets opts + tuple salt utils shlex split targets return run svn 'commit' cwd user username password opts
def in 6 6to 4 Extract Addr addr try addr inet pton socket AF INET 6 addr except return Noneif addr[ 2] '\x 02 ' return Nonereturn inet ntop socket AF INET addr[ 2 6]
def create commands eb all files ispaired base output dir optional params '' leading text '' trailing text '' include input dir path False remove filepath in name False commands []extensions [' fastq gz' ' fastq' ' fq gz' ' fq']for curr fp in all files if include input dir path added output str curr fp split '/' [ -2 ]else added output str ''if not remove filepath in name for extension in extensions if extension in curr fp curr ext extensionadded output str + basename curr fp split curr ext [0 ]curr outputdir join base output dir added output str if ispaired command '%sextract barcodes py%s-f%s-r%s-o%s%s' % clean leading text leading text optional params curr fp all files[curr fp] curr outputdir trailing text else command '%sextract barcodes py%s-f%s-o%s%s' % clean leading text leading text optional params curr fp curr outputdir trailing text commands append [ 'extract barcodes py %s' % curr fp command ] return commands
def get lexer by name alias **options for module name name aliases in LEXERS itervalues if alias in aliases if name not in lexer cache load lexers module name return lexer cache[name] **options for cls in find plugin lexers if alias in cls aliases return cls **options raise Class Not Found 'nolexerforalias%rfound' % alias
def dist distname '' version '' id '' supported dists supported dists import warningswarnings warn 'dist andlinux distribution functionsaredeprecatedin Python 3 5' Pending Deprecation Warning stacklevel 2 return linux distribution distname version id supported dists supported dists full distribution name 0
def get starttime length nseconds padding maximum length - padding - nseconds if padding > maximum return 0return random randint padding maximum
def write cache entry f entry beginoffset f tell name ctime mtime dev ino mode uid gid size sha flags entrywrite cache time f ctime write cache time f mtime flags len name flags & ~ 4095 f write struct pack '>LLLLLL 20 s H' dev & 4294967295 ino & 4294967295 mode uid gid size hex to sha sha flags f write name real size f tell - beginoffset + 8 & ~ 7 f write '\x 00 ' * beginoffset + real size - f tell
def nullspace A atol 1e- 13 rtol 0 A np atleast 2d A u s vh svd A tol max atol rtol * s[ 0 ] nnz s > tol sum ns vh[nnz ] conj Treturn ns
def has pbzip 2 try os dep command 'pbzip 2 ' except Value Error return Falsereturn True
def get module app modname verbose failfast module name u'%s %s' % app modname try module import module module name except Import Error as e if failfast raise eelif verbose print u' Couldnotload%rfrom%r %s' % modname app e return Noneif verbose print u' Loaded%rfrom%r' % modname app return module
def test Ellipse 2 D circular amplitude 7 5radius 10 size radius * 2 + 1 y x np mgrid[ 0 size 0 size]ellipse models Ellipse 2 D amplitude radius radius radius radius theta 0 x y disk models Disk 2 D amplitude radius radius radius x y assert np all ellipse disk
def get fragments coord frags if not frags return []init [0 ]return reduce lambda acc frag acc + [ acc[ -1 ] + len frag ] frags[ -1 ] init
def nesting exception view request client Client client get '/get view/' raise Exception 'exceptionmessage'
def search pairs item def generate alternatives string patterns ' Generatestringalternativesbyextractingfirstmatchinggroupfor\neachgivenpattern 'alternatives [string]for pattern in patterns match re search pattern string re IGNORECASE if match alternatives append match group 1 return alternatives title artist item title item artist patterns [' *? {0 }' format plugins feat tokens ]artists generate alternatives artist patterns patterns [' +? \\s+[ ] *[ ]$' ' *? {0 }' format plugins feat tokens for artist False ' +? \\s* *']titles generate alternatives title patterns multi titles []for title in titles multi titles append [title] if '/' in title multi titles append [x strip for x in title split '/' ] return itertools product artists multi titles
def read tasks session skipped 0for toppath in session paths session ask resume toppath task factory Import Task Factory toppath session for t in task factory tasks yield t skipped + task factory skippedif not task factory imported log warning u' Nofilesimportedfrom{ 0 }' displayable path toppath if skipped log info u' Skipped{ 0 }paths ' skipped
def inject data image key None net None metadata None admin password None files None partition None mandatory items {'image' image 'key' key 'net' net 'metadata' metadata 'files' files 'partition' partition}LOG debug ' Injectdataimage % image skey % key snet % net smetadata % metadata sadmin password <SANITIZED>files % files spartition % partition s' items try fs vfs VFS instance for image image partition fs setup except Exception as e for inject in mandatory inject val items[inject]if inject val raise LOG warning LW ' Ignoringerrorinjectingdataintoimage% image s % e s ' {'image' image 'e' e} return Falsetry return inject data into fs fs key net metadata admin password files mandatory finally fs teardown
@handle response format@treeio login required@module admin required def group view request group id response format 'html' group get object or 404 Group pk group id members User objects filter Q default group group Q other groups group distinct subgroups Group objects filter parent group return render to response 'core/administration/group view' {'group' group 'subgroups' subgroups 'members' members} context instance Request Context request response format response format
def read header f debug False fromgzip None if fromgzip is None fromgzip isinstance f gzip Gzip File bz 2 BZ 2 File magic read int 32 f magic t elsize magic dtype[magic]if debug logger debug 'headermagic{ 0 }{ 1 }{ 2 }' format magic magic t elsize if magic t 'packedmatrix' raise Not Implemented Error 'packedmatrixnotsupported' ndim read int 32 f if debug logger debug 'headerndim{ 0 }' format ndim if fromgzip d f read max ndim 3 * 4 dim numpy fromstring d dtype 'int 32 ' [ ndim]else dim numpy fromfile f dtype 'int 32 ' count max ndim 3 [ ndim]dim size prod dim if debug logger debug 'headerdim{ 0 }{ 1 }' format dim dim size return magic t elsize ndim dim dim size
def available attrs fn if six PY 3 return WRAPPER ASSIGNMENT Selse return tuple a for a in WRAPPER ASSIGNMENTS if hasattr fn a
def run code code run globals init globals None mod name None mod fname None mod loader None pkg name None if init globals is not None run globals update init globals run globals update name mod name file mod fname loader mod loader package pkg name exec code in run globalsreturn run globals
def exists in dirname indexname None if os path exists dirname try ix open dir dirname indexname indexname return ix latest generation > -1 except Empty Index Error passreturn False
@app taskdef error handler task id task name logger get task logger name result app Async Result task id excep result get propagate False logger error '#####FAILURELOGBEGIN#####\n Task{ 0 }raisedexception {0 }\n\\{ 0 }\n#####FAILURELOGSTOP#####' format task name excep result traceback
def test import invalid module invalid module names {'foo-bar' 'foo bar' '10 foo'}valid module names {'foobar'}with Temporary Directory as tmpdir sys path insert 0 tmpdir for name in invalid module names valid module names filename os path join tmpdir name + ' py' open filename 'w' close s set module completion 'importfoo' intersection s intersection invalid module names nt assert equal intersection set assert valid module names issubset s valid module names intersection s
def script retcode container source cwd None stdin None runas None shell cmdmod DEFAULT SHELL template 'jinja' umask None timeout None reset system locale True no clean False saltenv 'base' status base status copy return script status container source source cwd cwd stdin stdin runas runas shell shell template template umask umask timeout timeout reset system locale reset system locale run func retcode no clean no clean saltenv saltenv
def Arg List args lparen L Paren rparen R Paren node Node syms trailer [lparen clone rparen clone ] if args node insert child 1 Node syms arglist args return node
def cm send json registration ids data cloud type 'GCM' **kwargs values {'registration ids' registration ids} if registration ids else {} if data is not None values['data'] datafor k v in kwargs items if v values[k] vdata json dumps values separators ' ' ' ' sort keys True encode 'utf- 8 ' if cloud type 'GCM' response json loads gcm send data 'application/json' elif cloud type 'FCM' response json loads fcm send data 'application/json' else raise Improperly Configured 'cloud typemustbe GC Mor FC Mnot%s' % str cloud type return handler cm message json registration ids response cloud type
def test image logo path os path join BASE DIRECTORY 'artwork' 'logo png' assert hasattr hug output format png image logo path hug Response 'read' with open logo path 'rb' as image file assert hasattr hug output format png image image file hug Response 'read' assert hug output format png image ' Not Existent' hug Response is None class Fake Image With Save def save self to format to write 'test' assert hasattr hug output format png image Fake Image With Save hug Response 'read' class Fake Image With Render def render self return 'test'assert hug output format svg xml image Fake Image With Render hug Response 'test' class Fake Image With Save No Format def save self to to write 'test' assert hasattr hug output format png image Fake Image With Save No Format hug Response 'read'
def parse pool options options max pool size options get 'maxpoolsize' common MAX POOL SIZE min pool size options get 'minpoolsize' common MIN POOL SIZE max idle time ms options get 'maxidletimems' common MAX IDLE TIME MS if max pool size is not None and min pool size > max pool size raise Value Error 'min Pool Sizemustbesmallerorequaltomax Pool Size' connect timeout options get 'connecttimeoutms' common CONNECT TIMEOUT socket keepalive options get 'socketkeepalive' False socket timeout options get 'sockettimeoutms' wait queue timeout options get 'waitqueuetimeoutms' wait queue multiple options get 'waitqueuemultiple' event listeners options get 'event listeners' appname options get 'appname' ssl context ssl match hostname parse ssl options options return Pool Options max pool size min pool size max idle time ms connect timeout socket timeout wait queue timeout wait queue multiple ssl context ssl match hostname socket keepalive Event Listeners event listeners appname
def origin from request request rv request META get 'HTTP ORIGIN' 'null' if rv in '' 'null' rv origin from url request META get 'HTTP REFERER' return rv
def disable curdir processing method def decorated *args **kwargs original populators PROCESS CURDI Rpopulators PROCESS CURDIR Falsetry return method *args **kwargs finally populators PROCESS CURDIR originalreturn decorated
def p struct or union specifier 1 t pass
def last visible window try return get 'last-visible-main-window' except Key Error return last focused window
def change NZB DIR nzb dir if nzb dir '' sickbeard NZB DIR ''return Trueif ek os path normpath sickbeard NZB DIR ek os path normpath nzb dir if helpers make Dir nzb dir sickbeard NZB DIR ek os path normpath nzb dir logger log u' Changed NZ Bfolderto' + nzb dir else return Falsereturn True
@open file 0 mode 'rb' def read graphml path node type str reader Graph ML Reader node type node type glist list reader path path return glist[ 0 ]
def main argv arg dict Parse Arguments argv errors [ '%sargumentrequired' % key for key value in arg dict iteritems if value is REQUIRED OPTION ]if errors print >>sys stderr '\n' join errors Print Usage Exit 1 Setup Logging arg dict return Perform Bulkload arg dict
def vserver sslcert delete v name sc name **connection args ret Trueif not vserver sslcert exists v name sc name **connection args return Falsenitro connect **connection args if nitro is None return Falsesslcert NSSSLV Server SSL Cert Key Binding sslcert set vservername v name sslcert set certkeyname sc name try NSSSLV Server SSL Cert Key Binding delete nitro sslcert except NS Nitro Error as error log debug 'netscalermoduleerror-NSSSLV Server SSL Cert Key Binding delete failed {0 }' format error ret False disconnect nitro return ret
def observe value observation key target func @extension make extension trigger 1 'epoch' priority extension PRIORITY WRITER def observe value trainer trainer observation[observation key] target func trainer return observe value
def hadoop prefix from bin hadoop bin if '/' not in hadoop bin hadoop bin which hadoop bin if not hadoop bin return Nonehadoop home posixpath abspath posixpath join posixpath realpath posixpath dirname hadoop bin ' ' if hadoop home in BAD HADOOP HOMES return Nonereturn hadoop home
def plot name None fig None abscissa 1 iteridx None plot mean True foffset 1e- 19 x opt None fontsize 10 CMA Data Logger name plot fig abscissa iteridx plot mean foffset x opt fontsize
def escape html text table escape html table return text translate table
def neg impl expr op **kw return Unary Expression expr operator operators neg type expr type
def get New Derivation element Node prefix side Length return Round Derivation element Node prefix side Length
def get all bears names return [bear name for bear in get all bears ]
def p set type p p[ 0 ] T Type SET p[ 3 ]
def git diff names only left right 'HEAD' diff cmd GIT CMD DIFF NAMES ONLY FORMAT STRING % left right return run cmd diff cmd splitlines
def request Handler config hint path info query string None status code headers content request Handler 2 config hint path info query string mimetype headers get ' Content- Type' return mimetype content
def save topic similarities topic similarities topic similarities entity recommendations models Topic Similarities Model get recommendations models TOPIC SIMILARITIES ID strict False if topic similarities entity is None topic similarities entity recommendations models Topic Similarities Model id recommendations models TOPIC SIMILARITIES ID content json dumps topic similarities else topic similarities entity content json dumps topic similarities topic similarities entity put return topic similarities entity
def write Output file Name should Analyze True skeinforge craft write Chain Text With Noun Message file Name 'clip' should Analyze
def unzip ls nout out list zip *ls if not out out [ ] * nout return out
def migrate oauth template facts facts if 'master' in facts and 'oauth template' in facts['master'] if 'oauth templates' not in facts['master'] facts['master']['oauth templates'] {'login' facts['master']['oauth template']}elif 'login' not in facts['master']['oauth templates'] facts['master']['oauth templates']['login'] facts['master']['oauth template']return facts
@db api api context manager writerdef set inventory context rp inv list ensure rc cache context conn context session connection existing resources get current inventory resources conn rp these resources set [ RC CACHE id from string r resource class for r in inv list objects] to add these resources - existing resources to delete existing resources - these resources to update these resources & existing resources exceeded []with conn begin if to delete delete inventory from provider conn rp to delete if to add add inventory to provider conn rp inv list to add if to update exceeded update inventory for provider conn rp inv list to update rp generation increment provider generation conn rp return exceeded
def plot test results net test inputs fig plt figure ax fig add subplot 111 images in [test inputs[j] reshape -1 28 for j in range 10 ]images out [net feedforward test inputs[j] reshape -1 28 for j in range 10 ]image in np concatenate images in axis 1 image out np concatenate images out axis 1 image np concatenate [image in image out] ax matshow image cmap matplotlib cm binary plt xticks np array [] plt yticks np array [] plt show
def delimited List expr delim ' ' combine False dl Name ustr expr + '[' + ustr delim + '' + ustr expr + '] ' if combine return Combine expr + Zero Or More delim + expr set Name dl Name else return expr + Zero Or More Suppress delim + expr set Name dl Name
def check exists manager names type if type TABLE TYPE info table 'TABLES'elif type VIEW TYPE info table 'VIEWS'else raise Exception 'typeparametermustbeeither TABLE TYP Eor VIEW TYPE' query 'SELEC Ttable name FRO Minformation schema %s WHER Etable schema %%s' % info table rows manager execute query manager get db name existing names [row[ 0 ] for row in rows]for name in names if name not in existing names raise Name Missing Exception '%smissingfromdatabase stopping' % name
def build match rule action target pluralized match rule policy Rule Check 'rule' action resource enforce attr based check get resource and action action pluralized if enforce attr based check res map attributes RESOURCE ATTRIBUTE MA Pif resource in res map for attribute name in res map[resource] if is attribute explicitly set attribute name res map[resource] target action attribute res map[resource][attribute name]if 'enforce policy' in attribute attr rule policy Rule Check 'rule' '%s %s' % action attribute name if should validate sub attributes attribute target[attribute name] attr rule policy And Check [attr rule build subattr match rule attribute name attribute action target ] match rule policy And Check [match rule attr rule] return match rule
def assert permissions path permission log if not check permissions util syspath path permission log warning u'couldnotsetpermissionson{}' util displayable path path log debug u'setpermissionsto{} butpermissionsarenow{}' permission os stat util syspath path st mode & 511
def image member find context image id None member None status None session get session members image member find context session image id member status return [ image member format m for m in members]
def sphere constraint rd r0 R adj return R adj - np sqrt np sum rd - r0 ** 2
def make bucket resp project None now None now time datetime to gcptime now return {u'etag' u'CAE ' u'kind' u'storage#bucket' u'location' u'US' u'metageneration' u' 1 ' u'owner' {u'entity' u'project-owners- 1234567890 '} u'project Number' u' 1234567890 ' u'storage Class' u'STANDARD' u'time Created' now time u'updated' now time u' project Name' project}
def p command print bad p p[ 0 ] 'MALFORMEDPRINTSTATEMENT'
def pchip interpolate xi yi x der 0 axis 0 P Pchip Interpolator xi yi axis axis if der 0 return P x elif isscalar der return P derivative der x else return [P derivative nu x for nu in der]
def timeout Deferred reactor deferred seconds def timed Out Call deferred cancel delayed Time Out Call reactor call Later seconds timed Out Call def cancel Timeout result if delayed Time Out Call active delayed Time Out Call cancel return resultdeferred add Both cancel Timeout return delayed Time Out Call
def setup platform hass config add callback devices discovery info None if discovery info is None returnhomematic get component 'homematic' return homematic setup hmdevice discovery helper hass HM Binary Sensor discovery info add callback devices
def item to variable iterator resource return Variable from api repr resource iterator config
def prob words context vocab temperature 1 0 dot np dot vocab context prob softmax dot / temperature return prob
def jt ha funct def decorate api *args **kwargs try return funct api *args **kwargs except Exception as ex if ' Couldnotconnectto' in str ex LOG info ' Job Trackernotavailable trying J Tplugin HA %s ' % ex jt ha get next ha mrcluster if jt ha is not None if jt ha[ 1 ] host api jt host raise ex config api jt jt hareturn funct api *args **kwargs raise exreturn wraps funct decorate
@with setup step runner environ def test skipped steps can be retrieved as steps f Feature from string FEATURE 1 feature result f run scenario result feature result scenario results[ 0 ]for step in scenario result steps skipped assert equals type step Step
def resource show context data dict model context['model']id get or bust data dict 'id' resource model Resource get id resource context dict context resource resource if not resource raise Not Found check access 'resource show' resource context data dict pkg dict logic get action 'package show' dict context {'id' resource package id 'include tracking' asbool data dict get 'include tracking' False } for resource dict in pkg dict['resources'] if resource dict['id'] id breakelse log error ' Couldnotfindresource%safterall' id raise Not Found ' Resourcewasnotfound ' return resource dict
def lock hass entity id None code None data {}if code data[ATTR CODE] codeif entity id data[ATTR ENTITY ID] entity idhass services call DOMAIN SERVICE LOCK data
def yum install args package manager 'yum' sudo False return from args sudo [package manager 'install' '-y'] + args
@then u'thecommandoutputshouldnotcontain"{text}"' def step command output should not contain text context text expected text textif '{ WORKDIR }' in text or '{ CWD }' in text expected text textutil template substitute text WORKDIR posixpath normpath context workdir CWD posixpath normpath os getcwd actual output context command result outputwith on assert failed print details actual output expected text textutil assert normtext should not contain actual output expected text
def roi pooling 2d x rois outh outw spatial scale return ROI Pooling 2 D outh outw spatial scale x rois
def normalize gce facts metadata facts for interface in metadata['instance']['network Interfaces'] int info dict ips [interface['ip']] network type 'gce' int info['public ips'] [ac['external Ip'] for ac in interface['access Configs']]int info['public ips'] extend interface['forwarded Ips'] network id interface['network'] rpartition '/' int info['network id'] network idfacts['network']['interfaces'] append int info zone metadata['instance']['zone'] rpartition '/' facts['zone'] zonefacts['network']['ip'] facts['network']['interfaces'][ 0 ]['ips'][ 0 ]pub ip facts['network']['interfaces'][ 0 ]['public ips'][ 0 ]facts['network']['public ip'] pub ipfacts['network']['hostname'] metadata['instance']['hostname']facts['network']['public hostname'] facts['network']['public ip']return facts
def get vertical shift value label return check range and return 'verticalshift' label -5 5
def list virtual hostname username password name ret {'name' name 'changes' {} 'result' False 'comment' ''}if opts ['test'] return test output ret 'list' params {'hostname' hostname 'username' username 'password' password 'name' name} response salt ['bigip list virtual'] hostname username password name return load result response ret
@contextmanagerdef nested *managers exits []vars []exc None None None try try for mgr in managers exit mgr exit enter mgr enter vars append enter exits append exit yield vars except exc sys exc info finally while exits exit exits pop try if exit *exc exc None None None except exc sys exc info if exc None None None reraise exc[ 0 ] exc[ 1 ] exc[ 2 ] finally del exc
def handle job set function def call self job set taskhandle Null Job Set job set started job str self function self job set finished job return call
@sync performerdef perform put dispatcher intent def create put command content path content content replace '\\' '\\\\' replace '%' '%%' return 'printf--%s>%s' % shell quote content shell quote path return Effect Run command create put command intent content intent path log command filter lambda create put command intent log content filter intent content intent path
def healthy return False if faulty else True
@tasklets taskletdef create upload url async success path max bytes per blob None max bytes total None **options rpc blobstore create rpc **options rpc blobstore create upload url async success path max bytes per blob max bytes per blob max bytes total max bytes total rpc rpc result yield rpc raise tasklets Return result
def unpickle Method im name im self im class try unbound getattr im class im name if im self is None return unboundbound instancemethod unbound im func im self im class return boundexcept Attribute Error log msg ' Method' im name 'notonclass' im class assert im self is not None ' Norecourse noinstancetoguessfrom 'unbound getattr im self class im name log msg ' Attemptingfixupwith' unbound if im self is None return unboundbound instancemethod unbound im func im self im self class return bound
def create token api key login password r requests post API URL PREFIX + u'members/auth' params {u'login' login u'password' md 5 password hexdigest } headers {u' Accept' u'application/json' u'X- Beta Series- Version' u' 2 1' u'X- Beta Series- Key' api key} assert r status code 200 u' Bad HTT Pstatuscode %s' % r status code j r json error list j[u'errors']for err in error list log error str err if not error list return j[u'token']
@check login required@check local site accessdef download modified file *args **kwargs return download diff file True *args **kwargs
def sublime format path pth m re match '^ [A- Za-z]{ 1 } ? / \\\\ * ' pth if sublime platform 'windows' and m is not None pth m group 1 + '/' + m group 2 return pth replace '\\' '/'
def cache expire cachedir if not os path exists cachedir returnfor ent in os listdir cachedir p os path join cachedir ent if os path isdir p for root dirs files in os walk p topdown False map lambda f os unlink os path join root f files map lambda d os rmdir os path join root d dirs else os unlink p
def option *param decls **attrs def decorator f if 'help' in attrs attrs['help'] inspect cleandoc attrs['help'] Option Class attrs pop 'cls' Option param memo f Option Class param decls **attrs return freturn decorator
@image comparison baseline images [u' Event Collection plot set positions'] def test Event Collection set positions splt coll props generate Event Collection plot new positions np hstack [props[u'positions'] props[u'extra positions']] coll set positions new positions np testing assert array equal new positions coll get positions check segments coll new positions props[u'linelength'] props[u'lineoffset'] props[u'orientation'] splt set title u' Event Collection set positions' splt set xlim -1 90
def set xattr path key value namespaced key make namespaced xattr key key if not isinstance value six binary type value str value if six PY 3 value value encode 'utf- 8 ' xattr setxattr path namespaced key value
def delete course and groups course key user id module store modulestore with module store bulk operations course key module store delete course course key user id print 'removing Userpermissionsfromcourse 'try remove all instructors course key except Exception as err log error ' Errorindeletingcoursegroupsfor{ 0 } {1 }' format course key err
def getenv key default None return environ get key default
def export set dataset stream String IO if is py 3 csv csv writer stream else csv csv writer stream encoding DEFAULT ENCODING for row in dataset package dicts False csv writerow row return stream getvalue
@api versions wraps '2 24 ' @utils arg 'server' metavar '<server>' help ' Nameor I Dofserver ' @utils arg 'migration' metavar '<migration>' help 'I Dofmigration ' def do live migration abort cs args server find server cs args server cs server migrations live migration abort server args migration
def pairwise iterable a b itertools tee iterable for in b breakreturn zip a b
def get enabled enabled services disabled services get service list return odict Ordered Dict enabled services
@raise if offlinedef schema has column table name column name bind op get bind insp sa engine reflection Inspector from engine bind if not schema has table table name returnreturn column name in [column['name'] for column in insp get columns table name ]
def rwx mode acl Bit False bools expand mode mode s list 'rwxrwxrwxt' for i v in enumerate bools[ -1 ] if not v s[i] '-'if not bools[ -1 ] s s[ -1 ]return rwxtype mode + '' join s + '+' if acl Bit else ''
def xy to array origin image return rgb transpose image[ -1 ]
def exec query cmd fields if conf prog powershell is None return exec query vbs cmd fields return exec query ps cmd fields
def ext pillar minion id pillar repo string options repo string strip split branch options[ 0 ]repo location options[ 1 ]root ''for extraopt in options[ 2 ] DELIM ' 'if DELIM not in extraopt log error " Incorrectlyformattedextraparameter Missing'{ 0 }' {1 }" format DELIM extraopt key val extract key val extraopt DELIM if key 'root' root valelse log warning ' Unrecognizedextraparameter {0 }' format key svnpil Svn Pillar branch repo location root opts branch branch 'trunk' and 'base' or branch pillar dir svnpil pillar dir log debug '[pillar roots][{ 0 }] {1 }' format branch pillar dir if opts ['pillar roots'] get branch [] [pillar dir] return {}svnpil update opts deepcopy opts opts['pillar roots'][branch] [pillar dir]pil Pillar opts grains minion id branch return pil compile pillar
def get path info environ path info environ get u'PATH INFO' str u'/' if six PY 3 path info path info encode u'iso- 8859 - 1 ' return path info decode u'utf- 8 '
def execute 5 *args **kargs cmd args[ 1 -3 ] if args[ 0 ] 'raidcom' else args result EXECUTE TABLE 5 get cmd CMD SUCCEED return result
@pytest mark django dbdef test file extension instance ext File Extension objects create name 'foo' assert ext name 'foo' assert str ext 'foo'
def get cart quotation party None if not party party get party quotation frappe get all u' Quotation' fields [u'name'] filters {party doctype lower party name u'order type' u' Shopping Cart' u'docstatus' 0} order by u'modifieddesc' limit page length 1 if quotation qdoc frappe get doc u' Quotation' quotation[ 0 ] name else qdoc frappe get doc {u'doctype' u' Quotation' u'naming series' get shopping cart settings quotation series or u'QTN-CART-' u'quotation to' party doctype u'company' frappe db get value u' Shopping Cart Settings' None u'company' u'order type' u' Shopping Cart' u'status' u' Draft' u'docstatus' 0 u' islocal' 1 party doctype lower party name} qdoc contact person frappe db get value u' Contact' {u'email id' frappe session user} qdoc contact email frappe session userqdoc flags ignore permissions Trueqdoc run method u'set missing values' apply cart settings party qdoc return qdoc
@contextmanagerdef safe concurrent creation target path safe mkdir for target path tmp path u'{} tmp {}' format target path uuid uuid 4 hex try yield tmp path finally if os path exists tmp path safe concurrent rename tmp path target path
@app route '/scans/<int scan id>/traffic/<int traffic id>' methods ['GET'] @requires authdef get traffic details scan id traffic id scan info get scan info from id scan id if scan info is None abort 404 ' Scannotfound' history db History Item try details history db read traffic id except DB Exception msg ' Failedtoretrieverequestwithid%sfrom DB 'abort 404 msg returndata {'request' b64 encode details request dump 'response' b64 encode details response dump }return jsonify data
@with open mode 'r' @with sizes 'medium' def seek forward bytewise f f seek 0 2 size f tell f seek 0 0 for i in xrange 0 size - 1 f seek i 0
def set trace host 'localhost' port 6000 authkey 'secretpassword' init host port authkey qdb set trace
def safe iterator node tag None if node is None return []if hasattr node 'iter' return node iter tag else return node getiterator tag
def get New Derivation element Node prefix side Length return Overhang Derivation element Node prefix
def crop ar crop width copy False order 'K' ar np array ar copy False crops validate lengths ar crop width slices [slice a ar shape[i] - b for i a b in enumerate crops ]if copy cropped np array ar[slices] order order copy True else cropped ar[slices]return cropped
def ancestors G source if not G has node source raise nx Network X Error ' Thenode%sisnotinthegraph ' % source anc set n for n d in nx shortest path length G target source - set [source] return anc
def main domain Noneadmin email Noneadmin password Nonedo continue 'y'print ' Google Apps Calendar Resource API Sample\n\n'while not domain domain raw input ' Google Appsdomain ' while not admin email admin email '%s@%s' % raw input ' Administratorusername ' domain while not admin password admin password getpass getpass ' Administratorpassword ' sample Calendar Resource Sample domain domain email admin email password admin password while do continue lower 'n' do continue call service sample
def Poisson name lamda return rv name Poisson Distribution lamda
def Set Node Annotation node annotation value setattr node NODE ANNOTATION PREFIX + annotation value
def rastrigin skew individual N len individual return 10 * N + sum 10 * x if x > 0 else x ** 2 - 10 * cos 2 * pi * 10 * x if x > 0 else x for x in individual
@handle response format@treeio login required@module admin required def user add request response format 'html' user limit getattr settings 'HARDTREE SUBSCRIPTION USER LIMIT' 0 if user limit > 0 user number User objects filter disabled False count if user number > user limit return Http Response Redirect reverse 'core billing upgrade' if request POST if 'cancel' not in request POST form User Form request POST if form is valid profile form save return Http Response Redirect reverse 'core admin user view' args [profile id] else return Http Response Redirect reverse 'core admin index users' else form User Form return render to response 'core/administration/user add' {'form' form} context instance Request Context request response format response format
def find referenced templates ast for node in ast find all nodes Extends nodes From Import nodes Import nodes Include if not isinstance node template nodes Const if isinstance node template nodes Tuple nodes List for template name in node template items if isinstance template name nodes Const if isinstance template name value string types yield template name value else yield None else yield None continueif isinstance node template value string types yield node template value elif isinstance node nodes Include and isinstance node template value tuple list for template name in node template value if isinstance template name string types yield template name else yield None
@must have permission 'write' @must have addon SHORT NAME 'user' @must have addon SHORT NAME 'node' @must be addon authorizer SHORT NAME def dataverse set config node addon auth **kwargs user settings node addon user settingsuser auth userif user settings and user settings owner user raise HTTP Error http FORBIDDEN try assert clean request json except Assertion Error raise HTTP Error http NOT ACCEPTABLE alias request json get 'dataverse' {} get 'alias' doi request json get 'dataset' {} get 'doi' if doi is None or alias is None return HTTP Error http BAD REQUEST connection client connect from settings node addon dataverse client get dataverse connection alias dataset client get dataset dataverse doi node addon set folder dataverse dataset auth return {'dataverse' dataverse title 'dataset' dataset title} http OK
def get Bounding Box By Paths element Node transformed Paths element Node xml Object get Transformed Paths maximum euclidean get Maximum By Vector 3 Paths transformed Paths minimum euclidean get Minimum By Vector 3 Paths transformed Paths return [minimum maximum]
def error response environ error code message debug message None warn True if warn warnings warn 'wsgilib error responseisdeprecated usethewsgi applicationmethodonan HTTP Exceptionobjectinstead' Deprecation Warning 2 if debug message and environ get 'paste config' {} get 'debug' message + '\n\n< --%s-->' % debug message body error body response error code message warn False headers [ 'content-type' 'text/html' 'content-length' str len body ]return error code headers body
def mapping lines from collapsed df collapsed df lines []lines append ' DCTB ' join ['# Sample ID' 'original-sample-ids'] + list collapsed df columns [1 ] for r in collapsed df iterrows if isinstance r[ 0 ] tuple new idx ' ' join map str r[ 0 ] else new idx str r[ 0 ] new values []for e in r[ 1 ] if len set e 1 new values append str e[ 0 ] else new values append ' %s ' % ' ' join map str e lines append ' DCTB ' join [new idx] + new values return lines
def stored cookie messages count storage response cookie response cookies get storage cookie name if not cookie or cookie['max-age'] 0 return 0data storage decode cookie value if not data return 0if data[ -1 ] Cookie Storage not finished data pop return len data
def data fun times return 1e- 09 * np sin 30 0 * times * np exp - times - 0 15 + 0 05 * rng randn 1 ** 2 / 0 01
def umc module for edit module object dn superordinate None mod module by name module objects get umc admin objects position position base dn position set Dn ldap dn tree parent object dn obj objects get mod config uldap position position superordinate superordinate dn object dn obj open return obj
def load config load default config update load user return config
def tweak field fields field name attribute value for x in fields if x['name'] field name x[attribute] value
def extract context xml return eval xml text
def hw addr iface return salt utils network hw addr iface
@require contextdef virtual interface get all context vif refs virtual interface query context all return vif refs
def allocate eip address client check mode False ip allocated Falsenew eip Noneerr msg ''params {' Domain' 'vpc'}try if check mode ip allocated Truerandom numbers '' join str x for x in random sample range 0 9 7 new eip 'eipalloc-{ 0 }' format random numbers else new eip client allocate address **params [' Allocation Id']ip allocated Trueerr msg 'eipallocid{ 0 }created' format new eip except botocore exceptions Client Error as e err msg str e return ip allocated err msg new eip
def libvlc video get track description p mi f Cfunctions get 'libvlc video get track description' None or Cfunction 'libvlc video get track description' 1 None ctypes POINTER Track Description Media Player return f p mi
def test calibration curve y true np array [0 0 0 1 1 1] y pred np array [0 0 0 1 0 2 0 8 0 9 1 0] prob true prob pred calibration curve y true y pred n bins 2 prob true unnormalized prob pred unnormalized calibration curve y true y pred * 2 n bins 2 normalize True assert equal len prob true len prob pred assert equal len prob true 2 assert almost equal prob true [0 1] assert almost equal prob pred [0 1 0 9] assert almost equal prob true prob true unnormalized assert almost equal prob pred prob pred unnormalized assert raises Value Error calibration curve [1 1] [ -0 1 ] normalize False
def is valid model filters model filters exclude list None for key in filters keys if exclude list and key in exclude list continuetry getattr model key except Attribute Error LOG debug "'%s'filterkeyisnotvalid " key return Falsereturn True
@contextmanagerdef fake spawn greenlets []def inner fake spawn func *a **kw gt greenthread spawn func *a **kw greenlets append gt return gtobject server spawn inner fake spawnwith mock patch 'swift obj server spawn' inner fake spawn try yield finally for gt in greenlets gt wait
def ignore keys endpoint props return dict prop name prop val for prop name prop val in six iteritems endpoint props if prop name not in DO NOT COMPARE FIELDS
def create Append By Text parent Node xml Text monad Open Monad parent Node for character in xml Text monad monad get Next Monad character
def plug l2 gw service cluster lswitch id lport id gateway id vlan id None att obj {'type' 'L 2 Gateway Attachment' 'l 2 gateway service uuid' gateway id}if vlan id att obj['vlan id'] vlan idreturn plug interface cluster lswitch id lport id att obj
def record magic dct magic kind magic name func if magic kind 'line cell' dct['line'][magic name] dct['cell'][magic name] funcelse dct[magic kind][magic name] func
@skip 'silverlight' 'multiple execute' def test package back patching try mod backup dict sys modules f dir path combine testpath public testdir 'the dir' f init path combine f dir ' init py' f pkg abc path combine f dir 'abc 1 py' f pkg xyz path combine f dir 'xyz 1 py' ensure directory present f dir write to file f init 'importabc 1 ' write to file f pkg abc 'importxyz 1 ' write to file f pkg xyz 'importsys\nsys foo "xyz"' import the dir x y the dir abc 1 the dir xyz 1 from the dir import abc 1 from the dir import xyz 1 Are Equal x abc 1 Are Equal y xyz 1 Are Equal sys foo 'xyz' del sys foofinally sys modules mod backupos unlink f init os unlink f pkg abc os unlink f pkg xyz
def reboot name call None if call 'action' raise Salt Cloud System Exit ' Thestopactionmustbecalledwith-aor--action ' log info ' Rebootingnode{ 0 }' format name instance id get node name [' Instance Id']params {' Action' ' Reboot Instance' ' Instance Id' instance id}result query params return result
def Format Hash h return '%s %s %s %s %s' % h[ 0 8] h[ 8 16 ] h[ 16 24 ] h[ 24 32 ] h[ 32 40 ]
def Pack Int Set ints if len ints > 15 return '\xff\xff\xff\xff' + zlib compress intlist to bitmask ints else return struct pack '<' + 'I' * len ints *ints
def chgid name gid root None pre info info name if gid pre info['gid'] return Truecmd ['usermod' '-g' '{ 0 }' format gid name]if root is not None cmd extend '-R' root salt ['cmd run'] cmd python shell False return info name get 'gid' gid
@db api api context manager readerdef ensure rc cache ctx global RC CACH Eif RC CACHE is not None return RC CACHE rc cache Resource Class Cache ctx
def indentln string return indent string + '\n'
def key press event params if event key 'left' params['pause'] Trueparams['frame'] max params['frame'] - 1 0 elif event key 'right' params['pause'] Trueparams['frame'] min params['frame'] + 1 len params['frames'] - 1
def show macosx show
def create Encoder encoder Multi Encoder encoder add Multiple Encoders {'timestamp' dict fieldname 'timestamp' type ' Date Encoder' time Of Day 5 5 forced True 'attendee Count' dict fieldname 'attendee Count' type ' Scalar Encoder' name 'attendee Count' minval 0 maxval 270 clip Input True w 5 resolution 10 forced True 'consumption' dict fieldname 'consumption' type ' Scalar Encoder' name 'consumption' minval 0 maxval 115 clip Input True w 5 resolution 5 forced True } return encoder
def entity to protobuf entity entity pb entity pb 2 Entity if entity key is not None key pb entity key to protobuf entity pb key Copy From key pb for name value in entity items value is list isinstance value list if value is list and len value 0 continuevalue pb new value pb entity pb name set protobuf value value pb value if name in entity exclude from indexes if not value is list value pb exclude from indexes Truefor sub value in value pb array value values sub value exclude from indexes True set pb meaning from entity entity name value value pb is list value is list return entity pb
def status to ec 2 attach status volume volume status volume get 'status' attach status volume get 'attach status' if volume status in 'attaching' 'detaching' ec 2 attach status volume statuselif attach status in 'attached' 'detached' ec 2 attach status attach statuselse msg ' Unacceptableattachstatus %sforec 2 API ' % attach status raise exception Invalid msg return ec 2 attach status
def is low contrast image fraction threshold 0 05 lower percentile 1 upper percentile 99 method 'linear' image np asanyarray image if image ndim 3 and image shape[ 2 ] in [3 4] image rgb 2 gray image dlimits dtype limits image clip negative False limits np percentile image [lower percentile upper percentile] ratio limits[ 1 ] - limits[ 0 ] / dlimits[ 1 ] - dlimits[ 0 ] return ratio < fraction threshold
def get sources return yaml load open OPENSHIFT ANSIBLE SOURCES PATH read
def set pb meaning from entity entity name value value pb is list False if name not in entity meanings return meaning orig value entity meanings[name]if orig value is not value returnif is list if not isinstance meaning list meaning itertools repeat meaning val iter six moves zip value pb array value values meaning for sub value pb sub meaning in val iter if sub meaning is not None sub value pb meaning sub meaningelse value pb meaning meaning
def partition of index value divisions val if divisions[ 0 ] is None msg ' Cannotuselocon Data Framewithoutknowndivisions'raise Value Error msg val coerce loc index divisions val i bisect bisect right divisions val return min len divisions - 2 max 0 i - 1
def get completed programs student meter Program Progress Meter student use catalog True return meter completed programs
@treeio login requireddef ajax ticket lookup request response format 'html' tickets []if request GET and 'term' in request GET tickets Ticket objects filter name icontains request GET['term'] [ 10 ]return render to response 'services/ajax ticket lookup' {'tickets' tickets} context instance Request Context request response format response format
def is astropy setup main mod sys modules get ' main ' if not main mod return Falsereturn getattr main mod ' file ' False and os path basename main mod file rstrip 'co' 'setup py' and is astropy source main mod file
def Init User result App User query App User user users get current user fetch if result app user result[ 0 ]else app user App User user users get current user email users get current user email app user put return app user
def summary urls resource url filters links {}get vars S3 URL Query parse url url get vars pop 't' None get vars pop 'w' None get vars update filters list vars []for k v in get vars items if v is None continuevalues v if type v is list else [v] for value in values if value is not None list vars append k value base url url split '?' 1 [0 ]summary config S3 Summary get config resource tab idx 0for section in summary config if section get 'common' continuetab vars list vars + [ 't' str tab idx ] links[section['name']] '%s?%s' % base url urlencode tab vars tab idx + 1return links
def generate jwt service account file credentials Service Account Credentials from json keyfile name service account file now int time time payload {'iat' now 'exp' now + credentials MAX TOKEN LIFETIME SECS 'aud' 'echo endpoints sample google com' 'iss' 'jwt-client endpoints sample google com' 'sub' '12345678 ' 'email' 'user@example com'}signed jwt oauth 2 client crypt make signed jwt credentials signer payload key id credentials private key id return signed jwt
def connection checker func @functools wraps func def inner connection checker self *args **kwargs LOG debug 'in connection checker' for attempts in range 5 try return func self *args **kwargs except exception Volume Backend API Exception as e pattern re compile ' * Sessionidexpired$' matches pattern match six text type e if matches if attempts < 5 LOG debug ' Sessionmighthaveexpired Tryingtorelogin' self login continue LOG error LE ' Re-throwing Exception%s' e raisereturn inner connection checker
def get signatured headers headers d {}msg ''for k v in headers d[k] vmsg + k + v secret os environ get 'SECRET KEY' '' d[' Signature'] get signature secret msg return d
def init config config os path dirname file + '/colorset/config' try data load config config for d in data c[d] data[d]except passrainbow config os path expanduser '~' + os sep + ' rainbow config json' try data load config rainbow config for d in data c[d] data[d]except IO Error Value Error as e c['USER JSON ERROR'] str e theme file os path dirname file + '/colorset/' + c['THEME'] + ' json' try data load config theme file for d in data c[d] data[d]except pass
def ctl cmd cmd name conf file bin env ret [ get supervisorctl bin bin env ]if conf file is not None ret + ['-c' conf file]ret append cmd if name ret append name return ret
def arma predict in sample start end endog resid k ar method if 'mle' in method fittedvalues endog - resid else fittedvalues endog[k ar ] - resid fv start startif 'mle' not in method fv start - k arfv end min len fittedvalues end + 1 return fittedvalues[fv start fv end]
def dedent content whitespace counts [ len line - len line lstrip '' for line in content splitlines [1 ] if line lstrip ]if whitespace counts whitespace pattern '^' + '' * min whitespace counts content re sub re compile whitespace pattern re MULTILINE '' content return content strip
def delete snapshot kwargs None call None if call 'function' log error ' Thedelete snapshotfunctionmustbecalledwith-for--function ' return Falseif 'snapshot id' not in kwargs log error ' Asnapshot idmustbespecifiedtodeleteasnapshot ' return Falseparams {' Action' ' Delete Snapshot'}if 'snapshot id' in kwargs params[' Snapshot Id'] kwargs['snapshot id']log debug params data aws query params return url True location get location provider get provider opts opts sigver '4 ' return data
def render to kml *args **kwargs return Http Response loader render to string *args **kwargs mimetype 'application/vnd google-earth kml+xml'
def git Commit Id path ref cmd git Cmd Base path + ['show' ref] try output run Subprocess cmd stderr None universal newlines True except sp Called Process Error print cmdraise Name Error " Unknowngitreference'%s'" % ref commit output split '\n' [0 ]assert commit[ 7] 'commit' return commit[ 7 ]
@with setup step runner environ def test failing behave as step fails runnable step Step from string ' Given Ihaveastepwhichcallsthe"otherstepfails"stepwithbehave as' try runnable step run True except passassert runnable step failed
def get exclude string client dir exclude string '--exclude deps/*--exclude tests/*--exclude site tests/*'prof dir os path join client dir 'profilers' for f in os listdir prof dir if os path isdir os path join prof dir f exclude string + '--exclude profilers/%s' % f return exclude string
def get service hass config discovery info None url '{} {}' format config get CONF HOST config get CONF PORT username config get CONF USERNAME password config get CONF PASSWORD if username is not None auth username password else auth Nonereturn KODI Notification Service url auth
def get Process Value executable args env {} path None reactor None return call Protocol With Deferred Value Getter executable args env path reactor
def cloud cancel task cookie tokens task id url '' join [const PAN URL 'rest/ 2 0/services/cloud dl' '?bdstoken ' tokens['bdstoken'] '&task id ' str task id '&method cancel task&app id 250528 ' '&t ' util timestamp '&channel chunlei&clienttype 0&web 1'] req net urlopen url headers {' Cookie' cookie header output } if req content req datareturn json loads content decode else return None
def paths from ls recs ret {}last nm ''level 0path []ret []for ln in recs splitlines nm val ln rstrip split ' ' barename nm lstrip this level len nm - len barename if this level 0 ret append barename level 0path []elif this level level ret append '%s/%s' % '/' join path barename elif this level > level path append last nm ret append '%s/%s' % '/' join path barename level this levelelif this level < level path path[ this level]ret append '%s/%s' % '/' join path barename level this levellast nm barenamereturn ret
def event return events opts get options {} opts['skip'] Truefor event in events log trace ' Carbonreturnerreceivedevent {0 }' format event metric base event['tag']saltdata event['data'] get 'data' send saltdata metric base opts
def display Data X size None showit False x length int np sqrt X shape[ 1 ] y length int np sqrt X shape[ 1 ] if size None size np sqrt X shape[ 0 ] size [size size]bigimg np zeros x length * size[ 0 ] y length * size[ 1 ] for i in range x length for j in range y length im X[ i - 1 * y length + j ] reshape 32 32 transpose bigimg[ i * 32 i + 1 * 32 j * 32 j + 1 * 32 ] imif showit fig plt figure plt imshow bigimg cmap 'gray' plt show else return bigimg
def solve sylvester a b q r u schur a output 'real' s v schur b conj transpose output 'real' f np dot np dot u conj transpose q v trsyl get lapack funcs 'trsyl' r s f if trsyl is None raise Runtime Error 'LAPAC Kimplementationdoesnotcontainaproper Sylvesterequationsolver TRSYL ' y scale info trsyl r s f tranb 'C' y scale * y if info < 0 raise Lin Alg Error ' Illegalvalueencounteredinthe%dterm' % - info return np dot np dot u y v conj transpose
def ignore errors conn fun None *args **kwargs if fun with ignore errors conn return fun *args **kwargs return ignore errors conn
def test ast good defclass can compile u' defclassa ' can compile u' defclassa[] '
def get images table meta images Table 'images' meta Column 'id' Integer primary key True nullable False Column 'name' String 255 Column 'disk format' String 20 Column 'container format' String 20 Column 'size' Integer Column 'status' String 30 nullable False Column 'is public' Boolean nullable False default False index True Column 'location' Text Column 'created at' Date Time nullable False Column 'updated at' Date Time Column 'deleted at' Date Time Column 'deleted' Boolean nullable False default False index True Column 'checksum' String 32 Column 'min disk' Integer default 0 Column 'min ram' Integer default 0 mysql engine ' Inno DB' extend existing True return images
def delete files for obj sender **kwargs obj kwargs pop 'instance' for field name in sender meta get all field names if not hasattr obj field name continuetry field class sender meta get field field name except models Field Does Not Exist continuefield value getattr obj field name if isinstance field class models File Field and field value field value delete
def test scenarios parsing feature Feature from string FEATURE 15 scenarios and tags [ s name s tags for s in feature scenarios]scenarios and tags should equal [ ' Bootstraping Redisrole' [] ' Restartscalarizr' [] ' Rebundleserver' [u'rebundle'] ' Usenewrole' [u'rebundle'] ' Restartscalarizrafterbundling' [u'rebundle'] ' Bundlingdata' [] ' Modifyingdata' [] ' Rebootserver' [] ' Backupingdataon Master' [] ' Setupreplication' [] ' Restartscalarizrinslave' [] ' Slaveforcetermination' [] ' Slavedelete EBS' [u'ec 2 '] ' Setupreplicationfor EB Stest' [u'ec 2 '] ' Writingon Master readingon Slave' [] ' Slave-> Masterpromotion' [] ' Restartfarm' [u'restart farm'] ]
def run task
def check binary probabilistic predictions y true y prob check consistent length y true y prob labels np unique y true if len labels > 2 raise Value Error ' Onlybinaryclassificationissupported Providedlabels%s ' % labels if y prob max > 1 raise Value Error 'y probcontainsvaluesgreaterthan 1 ' if y prob min < 0 raise Value Error 'y probcontainsvalueslessthan 0 ' return label binarize y true labels [ 0]
def housing type return s3 rest controller
def eb Sent Message err err print Traceback reactor stop
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
@addon view@non atomic requestsdef usage breakdown series request addon group start end format field date range check series params or 404 group start end format check stats permission request addon fields {'applications' 'apps' 'locales' 'locales' 'oses' 'os' 'versions' 'versions' 'statuses' 'status'}series get series Update Count source fields[field] addon addon id date range date range if field 'locales' series process locales series if format 'csv' if field 'applications' series flatten applications series series fields csv fields series return render csv request addon series ['date' 'count'] + list fields elif format 'json' return render json request addon series
@apply to text filedef php template injection data import retemplate re search '<\\ -- NIKOLA PHP TEMPLATE INJECTIO Nsource\\ * checksum\\ * -->' data if template source template group 1 with io open source 'r' encoding 'utf- 8 ' as in file phpdata in file read META SEPARATOR ' ' + os linesep * 2 + ' ' + '\n' * 2 + ' ' + '\r\n' * 2 + ' ' phpdata re split META SEPARATOR phpdata maxsplit 1 [ -1 ]phpdata re sub template group 0 phpdata data return phpdataelse return data
def get volume drivers ensure loaded 'cinder/volume/drivers' return [ Driver Info x for x in interface volume register]
def cleanup value v v str v if v startswith '\\??\\' v v[ 4 ]return v
def remove site name ret {'name' name 'changes' {} 'result' None 'comment' ''}current sites salt ['win iis list sites'] if name not in current sites ret['comment'] ' Sitehasalreadybeenremoved {0 }' format name ret['result'] Trueelif opts ['test'] ret['comment'] ' Sitewillberemoved {0 }' format name ret['changes'] {'old' name 'new' None}else ret['comment'] ' Removedsite {0 }' format name ret['changes'] {'old' name 'new' None}ret['result'] salt ['win iis remove site'] name return ret
def get fun fun with get serv ret None commit True as cur sql 'SELEC Ts id s jid s full ret\n FRO Msalt returnss\n JOIN SELECTMAX `jid` asjid\nfromsalt returns GROUPB Yfun id max\n O Ns jid max jid\n WHER Es fun %s\n'cur execute sql fun data cur fetchall ret {}if data for minion full ret in data ret[minion] json loads full ret return ret
@cors api view ['POST'] headers 'content-type' 'accept' 'x-fxpay-version' @permission classes Allow Any def reissue request raw request read verify Verify raw request META output verify check full if output['status'] 'expired' log info ' Receiptnotexpiredreturned {0 }' format output receipt cef log request request None 'sign' ' Receiptreissuefailed' output['receipt'] ''return Response output status 400 receipt cef log request request None 'sign' ' Receiptreissuesigning' return Response {'reason' '' 'receipt' reissue receipt raw 'status' 'expired'}
def get availability zone vm avz config get cloud config value 'availability zone' vm opts search global False if avz is None return Nonezones list availability zones vm if avz not in zones raise Salt Cloud Exception " Thespecifiedavailabilityzoneisn'tvalidinthisregion {0 }\n" format avz elif zones[avz] 'available' raise Salt Cloud Exception " Thespecifiedavailabilityzoneisn'tcurrentlyavailable {0 }\n" format avz return avz
def metric cleanup try nvml Shutdown except NVML Error as err print ' Errorshuttingdown NVML ' str err return 1
def error page request status return render request '%d html' % status status status
def get a ssh config box name output subprocess check output ['vagrant' 'ssh-config' box name] config SSH Config config parse String IO output host config config lookup box name for id in host config['identityfile'] if os path isfile id host config['identityfile'] idreturn dict v host config[k] for k v in ssh to ansible
def patch from twisted application service import Serviceold start Service Service start Serviceold stop Service Service stop Servicedef start Service self assert not self running '%ralreadyrunning' % self return old start Service self def stop Service self assert self running '%ralreadystopped' % self return old stop Service self Service start Service start Service Service stop Service stop Service
def cleanse setting key value try if HIDDEN SETTINGS search key cleansed CLEANSED SUBSTITUT Eelif isinstance value dict cleansed dict k cleanse setting k v for k v in value items else cleansed valueexcept Type Error cleansed valuereturn cleansed
def workers profile 'default' config get running profile lbn config['worker list'] split ' ' worker list []ret {}for lb in lbn try worker list extend config['worker {0 } balance workers' format lb ] split ' ' except Key Error passworker list list set worker list for worker in worker list ret[worker] {'activation' config['worker {0 } activation' format worker ] 'state' config['worker {0 } state' format worker ]}return ret
def warn or error removal version deprecated entity description hint None stacklevel 3 removal semver validate removal semver removal version msg u'DEPRECATED {}{}removedinversion{} ' format deprecated entity description get deprecated tense removal version removal version if hint msg + u'\n{}' format hint if removal semver > PANTS SEMVER warnings warn msg Deprecation Warning stacklevel stacklevel else raise Code Removed Error msg
def get version number config parser Config Parser Raw Config Parser config file os path join os path dirname file os pardir 'res' 'roboto cfg' config parser read config file version number config parser get 'main' 'version' assert re match '[ 0 - 9 ]+\\ [0 - 9 ]{ 3 }' version number return version number
def Delete Commit Information rebalance loc data store DB Location if not os path exists loc return Falseif not os path isdir loc return Falsetempdir Get Transaction Directory loc rebalance id tempfile utils Join Path tempdir constants TRANSACTION FILENAME try os unlink tempfile except OS Error passreturn True
def wait for free port host port if not host raise Value Error " Hostvaluesof''or Nonearenotallowed " for trial in range 50 try check port host port timeout 0 1 except IO Error time sleep 0 1 else returnraise IO Error ' Port%rnotfreeon%r' % port host
def pad data bytes to pad AES block size - len data % AES block size return data + bytes to pad * chr bytes to pad
def get account info env app swift source None cache cache from env env if not cache return None version account container split path env['PATH INFO'] 2 4 True cache key get account memcache key account env key 'swift %s' % cache key if env key not in env account info cache get cache key if not account info resp make pre authed request env 'HEAD' '/%s/%s' % version account swift source swift source get response app account info headers to account info resp headers resp status int env[env key] account inforeturn env[env key]
def is namespace visible context namespace status None if context is admin return Trueif namespace['owner'] is None return Trueif 'visibility' in namespace if namespace['visibility'] 'public' return Trueif context owner is not None if context owner namespace['owner'] return Truereturn False
def render report form start str end str start letter end letter report type total count error False date fmt error False context {'total count error' total count error 'date fmt error' date fmt error 'start date' start str 'end date' end str 'start letter' start letter 'end letter' end letter 'requested report' report type}return render to response 'shoppingcart/download report html' context
def words count common True word list list COMMON WORDS if common else [] c len word list if count > c count - cwhile count > 0 c min count len WORDS count - cword list + random sample WORDS c else word list word list[ count]return '' join word list
def Get Feeds client feed service client Get Service ' Feed Service' 'v 201607 ' feeds []more pages Trueselector {'fields' [' Id' ' Name' ' Attributes'] 'predicates' [{'field' ' Origin' 'operator' 'EQUALS' 'values' ['USER']} {'field' ' Feed Status' 'operator' 'EQUALS' 'values' ['ENABLED']}] 'paging' {'start Index' 0 'number Results' PAGE SIZE}}while more pages page feed service get selector if 'entries' in page feeds extend page['entries'] selector['paging']['start Index'] + PAGE SIZ Emore pages selector['paging']['start Index'] < int page['total Num Entries'] return feeds
def read output commandstring import contextlibtry import tempfilefp tempfile Named Temporary File except Import Error fp open '/tmp/ osx support %s' % os getpid 'w+b' with contextlib closing fp as fp cmd "%s 2 >/dev/null>'%s'" % commandstring fp name return fp read decode 'utf- 8 ' strip if not os system cmd else None
def check fun fun d *args **kwargs want shape d shaped fun d *args **kwargs if not isinstance d np ndarray raise Type Error ' Returnvaluemustbeanndarray' if d shape want shape raise Value Error ' Returndatamusthaveshape%snot%s' % want shape d shape return d
def history remove completed logging info ' Scheduledremovalofallcompletedjobs' history db History DB history db remove completed history db close del history db
def buf to color str buf space ''pix '{{bg#{ 0 02 x}{ 1 02 x}{ 2 02 x}}}'pixels []for h in range buf shape[ 0 ] last Nonefor w in range buf shape[ 1 ] rgb buf[ h w ]if last is not None and last rgb all pixels append space else pixels append pix format *rgb last rgbpixels append '{NO COLOR}\n' pixels[ -1 ] pixels[ -1 ] rstrip return '' join pixels
def setup hass instance emulated hue config hass get test home assistant run coroutine threadsafe core components async setup hass {core DOMAIN {}} hass loop result bootstrap setup component hass http DOMAIN {http DOMAIN {http CONF SERVER PORT HTTP SERVER PORT}} bootstrap setup component hass emulated hue DOMAIN emulated hue config return hass
def test url completion qtmodeltester config stub web history quickmarks bookmarks config stub data['completion'] {'timestamp-format' '%Y-%m-%d' 'web-history-max-items' 2}model urlmodel Url Completion Model qtmodeltester data display may return none Trueqtmodeltester check model check completions model {' Quickmarks' [ 'https //wiki archlinux org' 'aw' '' 'https //duckduckgo com' 'ddg' '' 'https //wikipedia org' 'wiki' '' ] ' Bookmarks' [ 'https //github com' ' Git Hub' '' 'https //python org' ' Welcometo Python org' '' 'http //qutebrowser org' 'qutebrowser qutebrowser' '' ] ' History' [ 'https //python org' ' Welcometo Python org' '2016 - 03 - 08 ' 'https //github com' ' Git Hub' '2016 - 05 - 01 ' ]}
def dummy Model Params perm err Score 50 if perm['model Params']['sensor Params']['encoders']['consumption'] is not None err Score + 10 if perm['model Params']['sensor Params']['encoders']['address'] is not None err Score - 10 if perm['model Params']['sensor Params']['encoders']['gym'] is not None err Score - 20 if perm['model Params']['sensor Params']['encoders']['timestamp time Of Day'] is not None err Score - 30 if perm['model Params']['sensor Params']['encoders']['timestamp day Of Week'] is not None err Score - 40 dummy Model Params dict metric Value err Score iterations int os environ get 'NTA TEST num Iterations' '1 ' wait Time None sys Exit Model Range os environ get 'NTA TEST sys Exit Model Range' None err Model Range os environ get 'NTA TEST err Model Range' None job Fail Err bool os environ get 'NTA TEST job Fail Err' False return dummy Model Params
def gluster cmd return gluster ok gluster xml cmd
def keyvaluesplit s if u' ' not in s raise Type Error u' Optionmustlooklikeoption json value' if s[ 0 ] u' ' raise Value Error u" Optionnamesmustnotstartwith` '" idx s index u' ' o s[ idx]val parse value s[ idx + 1 ] return o val
def libvlc audio set channel p mi channel f Cfunctions get 'libvlc audio set channel' None or Cfunction 'libvlc audio set channel' 1 1 None ctypes c int Media Player ctypes c int return f p mi channel
def arccoth val return numpy arctanh 1 0 / val
def Run Installer try os makedirs os path dirname config lib CONFIG[' Installer logfile'] except OS Error passhandler logging File Handler config lib CONFIG[' Installer logfile'] mode 'wb' handler set Level logging DEBUG logging get Logger add Handler handler config lib CONFIG Initialize filename flags FLAGS config reset True config lib CONFIG Add Context ' Installer Context' ' Contextappliedwhenweruntheclientinstaller ' logging warn ' Startinginstallationprocedurefor GR Rclient ' try Installer Init except Exception as e logging exception ' Installationfailed %s' e Installer Notify Server sys exit -1 sys exit 0
def test make imbalance 3 X y make imbalance X Y ratio 0 1 min c 1 counter Counter y assert equal counter[ 0 ] 500 assert equal counter[ 1 ] 50 assert true np all [ X i in X for X i in X ]
def whichall command path None verbose 0 exts None if verbose return list whichgen command path verbose exts else return list abs Name for abs Name in whichgen command path verbose exts
def upload may enroll csv xmodule instance args entry id course id task input action name start time time start date datetime now UTC num reports 1task progress Task Progress action name num reports start time current step {'step' ' Calculatinginfoaboutstudentswhomayenroll'}task progress update task state extra meta current step query features task input get 'features' student data list may enroll course id query features header rows format dictlist student data query features task progress attempted task progress succeeded len rows task progress skipped task progress total - task progress attempted rows insert 0 header current step {'step' ' Uploading CSV'}task progress update task state extra meta current step upload csv to report store rows 'may enroll info' course id start date return task progress update task state extra meta current step
@login requireddef display person edit name do request user request usernew first request POST['first name']new last request POST['last name']user first name new firstuser last name new lastuser save return Http Response Redirect '/people/%s' % urllib quote user username
def fsck ext device msgs {0 ' Noerrors' 1 ' Filesystemerrorscorrected' 2 ' Systemshouldberebooted' 4 ' Filesystemerrorsleftuncorrected' 8 ' Operationalerror' 16 ' Usageorsyntaxerror' 32 ' Fsckcanceledbyuserrequest' 128 ' Shared-libraryerror'}return msgs get salt ['cmd run all'] 'fsck-f-n{ 0 }' format device ['retcode'] ' Unknownerror'
def is loaded mod return mod in mod list
def get soup url backend 'selenium' if backend 'requests' req requests get url headers {' User- Agent' UA} html doc req textsoup Beautiful Soup html doc if soup find 'div' attrs {'id' 'gs ab md'} is None print ' Fallingbackontoseleniumbackendduetocaptcha 'backend 'selenium'if backend 'selenium' from selenium import webdriverimport selenium webdriver support ui as uidriver webdriver Firefox wait ui Web Driver Wait driver 200 driver get url wait until lambda driver driver find elements by id 'gs ab md' html doc driver page sourcesoup Beautiful Soup html doc driver close return soup
def get cache dir return os path join opts ['cachedir'] 's 3 cache'
def test request prompts def run txt prompts with settings prompts prompts ol Output Looper str 'upper' None list txt None return ol get prompt response prompts {'prompt 2 ' 'response 2 ' 'prompt 1 ' 'response 1 ' 'prompt' 'response'}eq run 'thisisapromptforprompt 1 ' prompts 'prompt 1 ' 'response 1 ' eq run 'thisisapromptforprompt 2 ' prompts 'prompt 2 ' 'response 2 ' eq run 'thisisapromptforpromptx ' prompts None None eq run 'promptforpromp' prompts None None
def ensure sep sep s n 2 return s + sep * n - s count sep
def ensure point geom ensure geometry geom if geom geom type u' Point' raise Spatial Error u" Providedgeometry'%s'isnota' Point' " % geom return geom
@positional 1 def get package for module module if isinstance module basestring try module sys modules[module]except Key Error return Nonetry return unicode module package except Attribute Error if module name ' main ' try file name module file except Attribute Error passelse base name os path basename file name split name os path splitext base name if len split name 1 return unicode base name else return u' ' join split name[ -1 ] return unicode module name
def Get All Posts posts [{'content' str row[ 1 ] 'time' str row[ 0 ] } for row in DB]posts sort key lambda row row['time'] reverse True return posts
def split stem sentence sentence re sub ' [a-z] [A-Z] ' u'\\ 1 \\ 2 ' sentence return sentence split
def get default role request global DEFAULT ROL Edefault getattr settings 'OPENSTACK KEYSTONE DEFAULT ROLE' None if default and DEFAULT ROLE is None try roles keystoneclient request admin True roles list except roles []exceptions handle request for role in roles if role id default or role name default DEFAULT ROLE rolebreakreturn DEFAULT ROLE
def cookie app environ start response response Response environ get 'HTTP COOKIE' ' No Cookie' mimetype 'text/plain' response set cookie 'test' 'test' return response environ start response
def team status return s3 rest controller
def ascii Hex Decode stream eod '>'decoded Stream ''char ''index 0while index < len stream c stream[index]if c eod if len decoded Stream % 2 0 char + '0 'try decoded Stream + chr int char base 16 except return -1 ' Errorinhexadecimalconversion' breakelif c isspace index + 1continuechar + cif len char 2 try decoded Stream + chr int char base 16 except return -1 ' Errorinhexadecimalconversion' char ''index + 1return 0 decoded Stream
def init args if args backend 'webengine' from qutebrowser browser webengine import webenginesettingswebenginesettings init args else from qutebrowser browser webkit import webkitsettingswebkitsettings init args
def list stringify inlist outlist []for item in inlist if not isinstance item tuple list if not isinstance item basestring item str item else item list stringify item outlist append item return outlist
def virtual if 'logrotate show conf' in salt return virtualname return False
def distro release info return distro distro release info
def set vif host backend 802 qbh config conf net type devname profileid tapname None conf net type net typeif net type 'direct' conf source mode 'passthrough'conf source dev pci utils get ifname by pci address devname conf driver name 'vhost'else conf source dev devnameconf model Noneconf vporttype '802 1 Qbh'conf add vport param 'profileid' profileid if tapname conf target dev tapname
@treeio login required@handle response formatdef source add request response format 'html' if not request user profile is admin 'treeio sales' return user denied request message " Youdon'thaveadministratoraccesstothe Salesmodule" if request POST if 'cancel' not in request POST source Sale Source form Sale Source Form request user profile request POST instance source if form is valid source form save source set user from request request return Http Response Redirect reverse 'sales source view' args [source id] else return Http Response Redirect reverse 'sales settings view' else form Sale Source Form request user profile all products Object filter by request request Product objects filter parent isnull True all sources Object filter by request request Sale Source objects return render to response 'sales/source add' {'form' form 'sources' all sources 'products' all products} context instance Request Context request response format response format
def single spectrum helper x mode Fs None window None pad to None sides None if mode is None or mode u'psd' or mode u'default' raise Value Error u' single spectrum helperdoesnotworkwith%smode' % mode if pad to is None pad to len x spec freqs spectral helper x x y None NFFT len x Fs Fs detrend func detrend none window window noverlap 0 pad to pad to sides sides scale by freq False mode mode if mode u'complex' spec spec realif spec ndim 2 and spec shape[ 1 ] 1 spec spec[ 0]return spec freqs
def start name call None return query 'grid' 'server/power' args {'name' name 'power' 'start'}
def validate float s try return float s except Value Error raise Value Error ' Couldnotconvert"%s"tofloat' % s
def django to webob request django request return Django Webob Request django request
def end recording status firepython set extension data None if firepython set extension data is not None warnings warn ' Firepythonisnolongersupported' rec recorder proxy get for current request recorder proxy clear for current request if config DEBUG logging debug ' Clearedrecorder' if rec is not None try rec record http status status rec save finally memcache delete lock key namespace config KEY NAMESPACE
def getitem from frame f locals key default None try return f locals[key]except Exception return default
def usage drives []ret {}drive bitmask ctypes windll kernel 32 Get Logical Drives for letter in UPPERCASE if drive bitmask & 1 drives append letter drive bitmask >> 1for drive in drives try available bytes total bytes total free bytes win 32 api Get Disk Free Space Ex '{ 0 } \\' format drive used total bytes - total free bytes capacity used / float total bytes * 100 ret['{ 0 } \\' format drive ] {'filesystem' '{ 0 } \\' format drive '1 K-blocks' total bytes / 1024 'used' used / 1024 'available' total free bytes / 1024 'capacity' '{ 0 0f}%' format capacity }except Exception ret['{ 0 } \\' format drive ] {'filesystem' '{ 0 } \\' format drive '1 K-blocks' None 'used' None 'available' None 'capacity' None}return ret
def coerce core result dshape odo kwargs None if iscoretype result return resultelif isscalar dshape result coerce scalar result dshape odo kwargs odo kwargs elif istabular dshape and isrecord dshape measure result into Data Frame result ** odo kwargs or {} elif iscollection dshape dim dimensions dshape if dim 1 result into Series result ** odo kwargs or {} elif dim > 1 result into np ndarray result ** odo kwargs or {} else msg ' Exprwithdshapedimensions< 1 shouldhavebeenhandledearlier dim {}'raise Value Error msg format str dim else msg ' Exprdoesnotevaluatetoacorereturntype'raise Value Error msg return result
def generate anchors base size 16 ratios [0 5 1 2] scales 2 ** np arange 3 6 base anchor np array [1 1 base size base size] - 1 ratio anchors ratio enum base anchor ratios anchors np vstack [ scale enum ratio anchors[i ] scales for i in range ratio anchors shape[ 0 ] ] return anchors
def forget sr session sr ref LOG debug ' Forgetting SR ' unplug pbds session sr ref session call xenapi 'SR forget' sr ref
def get cycles graph dict path visited result vertice if vertice in path cycle [vertice]for node in path[ -1 ] if node vertice breakcycle insert 0 node start from min cycle index cycle index start from cycle cycle[index ] + cycle[ 0 index] if not cycle in result result append cycle returnpath append vertice try for node in graph dict[vertice] if node not in visited get cycles graph dict path visited result node visited add node except Key Error passpath pop
def get new otu id old otu id tree dissim create tip index tree cache tip names tree node tree tip index[old otu id]distance up tree 0while not node is Root and distance up tree + node Length < dissim distance up tree + node Lengthnode node Parentif node is Tip return node Nameelse return choice node tip names
def copy config server root temp dir copied files copied dirs [] [] dir len len os path dirname server root for config path config dirs config files in os walk server root temp path os path join temp dir config path[ dir len + 1 ] os mkdir temp path copied all Truecopied files in current dir []for config file in config files config file path os path join config path config file temp file path os path join temp path config file if os path islink config file path os symlink os readlink config file path temp file path elif safe config file config file path copy file without comments config file path temp file path copied files in current dir append config file path else copied all Falseif copied all and not config dirs copied dirs append config path else copied files + copied files in current dirreturn copied files copied dirs
def convert filename value if NORMALIZE FILENAME chunks value split os extsep normalized []for v in chunks v unicodedata normalize 'NFKD' six text type v encode 'ascii' 'ignore' decode 'ascii' v re sub '[^\\w\\s-]' '' v strip normalized append v if len normalized > 1 value ' ' join normalized else value normalized[ 0 ]if CONVERT FILENAME value value replace '' ' ' lower return value
def plugin order p {}for func in plugin store p[func] [plugin name for plugin name f in plugin store[func]]return p
def rehash Password password hash Parameters try digestname iterations salt hash Parameters split Delimiter except Value Error raise Value Error u" Expectedhashparametersstringinformat'digestmod{ 0 }iterations{ 0 }salt" format Delimiter if digestname not in Hashes keys raise Value Error u" Unsupportedhashalgorithm'{ 0 }'forhashparameters'{ 1 }' " format digestname hash iterations int iterations salt base 64 b64 decode salt encode u'ascii' password password encode u'utf- 8 ' return pbkdf 2 password salt iterations Hashes[digestname]
def unique values func @wraps func def wrapper *args **kwargs return unique everseen func *args **kwargs return wrapper
def pages post objects request paginator Paginator post objects 20 try current page int request GET get 'page' '1 ' except Value Error current page 1page range page list return len paginator page range current page try page objects paginator page current page except Empty Page Invalid Page page objects paginator page paginator num pages if current page > 5 show first 1else show first 0if current page < len paginator page range - 3 show end 1else show end 0return post objects paginator page objects page range current page show first show end
def verbose print verbose s if verbose sys write flush s
def loads s key None salt 'django core signing' serializer JSON Serializer max age None base 64 d force bytes Timestamp Signer key salt salt unsign s max age max age decompress Falseif base 64 d[ 1] ' ' base 64 d base 64 d[ 1 ]decompress Truedata b64 decode base 64 d if decompress data zlib decompress data return serializer loads data
def exc message exc info exc exc info[ 1 ]if exc is None result exc info[ 0 ]else try result str exc except Unicode Encode Error try result unicode exc except Unicode Error result exc args[ 0 ]result force unicode result 'UTF- 8 ' return xml safe result
def validate target func *args **kwargs def inner self *args **kwargs target id Noneif 'target id' in kwargs and kwargs['target id'] None target id kwargs['target id']else target id 0if not self target is valid target id raise No Such Target Exception return func self *args **kwargs return inner
@handle response format@treeio login required@module admin required def pagefolder delete request folder id response format 'html' folder get object or 404 Page Folder pk folder id pages Page objects filter folder folder order by 'name' if request POST if 'delete' in request POST folder delete return Http Response Redirect reverse 'core admin index pages' elif 'cancel' in request POST return Http Response Redirect reverse 'core admin pagefolder view' args [folder id] return render to response 'core/administration/pagefolder delete' {'folder' folder 'pages' pages} context instance Request Context request response format response format
def action events get context action id return IMPL action events get context action id
def test double start finished qtbot proc py proc with qtbot wait Signals [proc started proc finished] timeout 10000 order 'strict' argv py proc 'importsys sys exit 0 ' proc start *argv with qtbot wait Signals [proc started proc finished] timeout 10000 order 'strict' argv py proc 'importsys sys exit 0 ' proc start *argv
def Str Join delim data return delim join str x for x in data
def parse date columns data frame parse dates if parse dates is True or parse dates is None or parse dates is False parse dates []if not hasattr parse dates ' iter ' parse dates [parse dates]for col name in parse dates df col data frame[col name]try fmt parse dates[col name]except Type Error fmt Nonedata frame[col name] handle date column df col format fmt for col name df col in data frame iteritems if is datetime 64 tz dtype df col data frame[col name] handle date column df col return data frame
def ptransform p return -1 0 / 1 0 + 1 5 * phi 1 0 + p / 2 0
def configuration Change Acknowledge a Tp Pd pd 6 b Message Type mes Type 49 c Mobile Id packet a / b / c return packet
def get price list rate {}price list frappe db sql u'selectip item code ip buying ip selling \n DCTB DCTB concat ifnull cu symbol ip currency "" round ip price list rate 2 "-" ip price list asprice\n DCTB DCTB from`tab Item Price`ip `tab Price List`pl `tab Currency`cu\n DCTB DCTB whereip price list pl nameandpl currency cu nameandpl enabled 1' as dict 1 for j in price list if j price rate setdefault j item code {} setdefault u' Buying' if j buying else u' Selling' [] append j price item rate map {}for item in rate for buying or selling in rate[item] item rate map setdefault item {} setdefault buying or selling u' ' join rate[item] get buying or selling [] return item rate map
def unescape html chatbot statement import sysif sys version info[ 0 ] < 3 from HTML Parser import HTML Parserhtml HTML Parser else import htmlstatement text html unescape statement text return statement
def matrix tensor product *product if isinstance product[ 0 ] Matrix return sympy tensor product *product elif isinstance product[ 0 ] numpy ndarray return numpy tensor product *product elif isinstance product[ 0 ] scipy sparse matrix return scipy sparse tensor product *product
@hug post def post here body return body
def add metaclass metaclass def wrapper cls orig vars cls dict copy slots orig vars get ' slots ' if slots is not None if isinstance slots str slots [slots]for slots var in slots orig vars pop slots var orig vars pop ' dict ' None orig vars pop ' weakref ' None return metaclass cls name cls bases orig vars return wrapper
@handle response format@treeio login requireddef mlist add request response format 'html' user request user profileif request POST mlist Mailing List form Mailing List Form user request POST instance mlist if form is valid mlist form save mlist set user from request request return Http Response Redirect '/messaging/' else form Mailing List Form user context get default context request context update {'form' form} return render to response 'messaging/mlist add' context context instance Request Context request response format response format
def Confirm message return bool Present Dialog message [u' Ok' u' Cancel'] 0
def file Open Dlg try File Path '' try File Name '' prompt translate ' Selectfile s toopen' allowed None if allowed is None allowed ' Psycho Py Data * psydat * psydat txt * txt * dlm * csv * txt * dlm * csv pickledfiles * pickle * pkl * pickle shelvedfiles * shelf * shelf Allfiles * * * *'global appapp ensure Wx App dlg wx File Dialog None prompt try File Path try File Name allowed wx OPEN wx FILE MUST EXIST wx MULTIPLE if dlg Show Modal OK full Paths dlg Get Paths else full Paths Nonedlg Destroy return full Paths
@task@timeddef install node prereqs if no prereq install print NO PREREQ MESSAG Ereturnprereq cache ' Nodeprereqs' ['package json'] node prereqs installation
def generate task families task class n ret {}for i in range n class name '{} {}' format task class task family i ret[class name] type class name task class {} return ret
def get corrected exif image original if 'exif' in original info image exif image info get 'exif' piexif dump {} original exif original info['exif']image exif update exif orientation image exif get exif orientation original exif return image exif
def save to disk db ids root opts None callback None root opts length sanitize args root opts failures []for x in ids tb ''try failed id title save book to disk x db root opts length tb ' Requestedformatsnotavailable' except failed id title True x db title x index is id True tb traceback format exc if failed failures append id title tb if callable callback if not callback int id title failed tb breakreturn failures
def crc update crc data if type data array array or data itemsize 1 buf array array 'B' data else buf datacrc crc ^ MASK for b in buf table index crc ^ b & 255 crc CRC TABLE[table index] ^ crc >> 8 & MASK return crc ^ MASK
def asmodule module if isinstance module types Module Type return moduleelif isinstance module str return import module fromlist [''] else raise Type Error type module
def test suffix formatter hug output format suffix {' js' hug output format json ' html' hug output format text} class Fake Request object path 'endpoint js'request Fake Request response Fake Request converted hug input format json formatter Bytes IO hug output format json {'name' 'name'} request response assert converted {'name' 'name'} request path 'endpoint html'assert formatter 'hi' request response 'hi' with pytest raises hug HTTP Not Acceptable request path 'undefined always'formatter 'hi' request response
def transcribe dna if isinstance dna Seq return dna transcribe elif isinstance dna Mutable Seq return dna toseq transcribe else return dna replace 'T' 'U' replace 't' 'u'
def test prewitt zeros result filters prewitt np zeros 10 10 np ones 10 10 bool assert allclose result 0
def get requests name return reduce lambda memo obj memo + get rate '%srequests %s count' % NAME PREFIX obj ['DELETE' 'GET' 'POST' 'PUT'] 0
def get latest repository metadata if it includes invalid tools trans repository repository metadata get latest repository metadata trans repository if repository metadata is not None metadata repository metadata metadataif metadata is not None and 'invalid tools' in metadata return repository metadatareturn None
def escape pattern s list pattern alphanum alphanumfor i in range len pattern c pattern[i]if c not in alphanum if c '\x 00 ' s[i] '\\ 000 'else s[i] '\\' + c return pattern[ 0] join s
def decode int stream signed False n result 0b stream read uchar while b & 128 0 and n < 3 result << 7result b & 127 b stream read uchar n + 1if n < 3 result << 7result belse result << 8result bif result & 268435456 0 if signed result - 536870912 else result << 1result + 1return result
def update context namespace name id values session namespace api get context namespace name session metadata tag get context id session metadef utils drop protected attrs models Metadef Tag values try metadata tag update values copy metadata tag save session session except db exc DB Duplicate Entry LOG debug ' Invalidupdate Itwouldresultinaduplicatemetadatatagwithsamename % name sinnamespace % namespace name s ' {'name' values['name'] 'namespace name' namespace name} raise exc Metadef Duplicate Tag name values['name'] namespace name namespace name return metadata tag to dict
def detect encoding filename try with open filename u'rb' as input file from lib 2 to 3 pgen 2 import tokenize as lib 2 to 3 tokenizeencoding lib 2 to 3 tokenize detect encoding input file readline [0 ]with open with encoding filename encoding as test file test file read return encodingexcept Lookup Error Syntax Error Unicode Decode Error return u'latin- 1 '
def list folders service instance return list objects service instance vim Folder
def inverse dicts *dicts inverse {}for dictionary in dicts for key value in dictionary items if isinstance value Iterable for item in value add pair to dict item key inverse else add pair to dict value key inverse return inverse
def is datetimelike data try maybe to datetimelike data return Trueexcept Exception passreturn False
def delete usage plan plan id region None key None keyid None profile None try existing describe usage plans plan id plan id region region key key keyid keyid profile profile if 'error' in existing return {'error' existing['error']}if 'plans' in existing and existing['plans'] conn get conn region region key key keyid keyid profile profile res conn delete usage plan usage Plan Id plan id return {'deleted' True 'usage Plan Id' plan id}except Client Error as e return {'error' salt utils boto 3 get error e }
def add qiime labels mapping f fasta dir filename column output dir ' ' count start 0 headers mapping data run description errors warnings process id map mapping f has barcodes False disable primer check True added demultiplex field None variable len barcodes False fasta name to sample id check mapping data mapping data headers filename column fasta files get fasta fps fasta dir fasta name to sample id keys write combined fasta fasta name to sample id fasta files output dir counter count start
def qflags key base value add base False klass None if klass is None klass value class if klass int raise Type Error " Can'tguessenumclassofanint " bits []names []mask 1value int value while mask < value if value & mask bits append mask mask << 1for bit in bits names append qenum key base klass bit add base return ' ' join names
def toposort deps nodes None seen None stack None depth 0 deps deps copy for k v in list deps items for k in v if k not in deps deps[k] []if nodes is None rem set for dep in deps values rem set dep nodes set deps keys - rem if seen is None seen set stack []sorted []for n in nodes if n in stack raise Exception ' Cyclicdependencydetected' stack + [n] if n in seen continueseen add n sorted extend toposort deps deps[n] seen stack + [n] depth depth + 1 sorted append n return sorted
def split title year title match re search u'[\\s ] [12 ]\\d{ 3 } \\ ?$' title if match title title[ match start ] strip year int match group 1 else year Nonereturn title year
def Install Management Console namespace users {'admin' 'admin'} port 503 from twisted internet import reactordef build protocol p insults Server Protocol manhole Colored Manhole namespace return pr manhole ssh Terminal Realm r chained Protocol Factory build protocolc checkers In Memory Username Password Database Dont Use **users p portal Portal r [c] factory manhole ssh Conch Factory p reactor listen TCP port factory
def ip addrs 6 interface None include loopback False interface data None return ip addrs interface include loopback interface data 'inet 6 '
def logged get log *args **kwargs req kwargs kwargssend kwargs {}for arg in 'stream' 'verify' 'proxies' 'cert' 'timeout' if arg in kwargs send kwargs[arg] req kwargs pop arg if 'message' in kwargs message kwargs pop 'message' else message 'getting URL'req requests Request 'GET' *args **req kwargs with requests Session as s s headers {' User- Agent' 'beets'}prepped s prepare request req log debug '{} {}' message prepped url return s send prepped **send kwargs
def compare val 1 condition val 2 import frappe utilsreturn frappe utils compare val 1 condition val 2
@tasklets taskletdef delete multi async blob keys **options if isinstance blob keys basestring Blob Key raise Type Error ' Expectedalist got%r' % blob key rpc blobstore create rpc **options yield blobstore delete async blob keys rpc rpc
def in gce environment urlopen None if SETTINGS env name is not None return SETTINGS env name 'GCE PRODUCTION' if NO GCE CHECK ' True' and detect gce environment urlopen urlopen SETTINGS env name 'GCE PRODUCTION'return Truereturn False
def rotate Points element Node points prefix derivation Rotate Derivation element Node prefix if derivation rotate Tetragrid None print ' Warning rotate Tetragridwas Noneinrotatesonothingwillbedonefor 'print element Nodereturnmatrix transform Vector 3 s By Matrix derivation rotate Tetragrid points
def Rot L 64 x N return np left shift x N & 63 dtype np uint 64 np right shift x 64 - N & 63 dtype np uint 64
def align left text length left edge ' ' right edge ' ' text length None left padding 2 if text length is None text length get text length text computed length text length + left padding + get text length left edge + get text length right edge if length - computed length > 0 padding left paddingelse padding 0output []length so far 0output append left edge length so far + len left edge output append '' * padding length so far + paddingoutput append text length so far + text lengthoutput append '' * length - length so far - len right edge output append right edge return '' join output
@docfillerdef generic filter 1 d input function filter size axis -1 output None mode 'reflect' cval 0 0 origin 0 extra arguments extra keywords None if extra keywords is None extra keywords {}input numpy asarray input if numpy iscomplexobj input raise Type Error ' Complextypenotsupported' output return value ni support get output output input if filter size < 1 raise Runtime Error 'invalidfiltersize' axis ni support check axis axis input ndim if filter size // 2 + origin < 0 or filter size // 2 + origin > filter size raise Value Error 'invalidorigin' mode ni support extend mode to code mode nd image generic filter 1 d input function filter size axis output mode cval origin extra arguments extra keywords return return value
@taskdef linkcheck ctx build ctx builder 'linkcheck'
def dummy Model Params perm err Score 100 if perm['model Params']['sensor Params']['encoders']['address'] is not None err Score - 0if perm['model Params']['sensor Params']['encoders']['gym'] is not None err Score - 10 if perm['model Params']['sensor Params']['encoders']['timestamp time Of Day'] is not None err Score - 20 if perm['model Params']['sensor Params']['encoders']['timestamp day Of Week'] is not None err Score - 50 dummy Model Params dict metric Value err Score metric Functions None return dummy Model Params
def format slice key val dim if isinstance key val slice key val slice to int key val start to int key val stop to int key val step return key valelse key val to int key val key val wrap neg index key val dim if 0 < key val < dim return slice key val key val + 1 1 else raise Index Error ' Index/sliceoutofbounds '
def delocalize string conv localeconv ts conv['thousands sep']if ts string string replace ts '' dd conv['decimal point']if dd string string replace dd ' ' return string
def local git clone repo url with lcd LOGDIR local 'if[-dletsencrypt] thenrm-rfletsencrypt fi' local 'gitclone%sletsencrypt' % repo url local 'tarczfle tar gzletsencrypt'
def oo collect data attribute None filters None if not isinstance data list raise errors Ansible Filter Error ' failedexpectstofilterona List' if not attribute raise errors Ansible Filter Error ' failedexpectsattributetobeset' if filters is not None if not isinstance filters dict raise errors Ansible Filter Error ' failedexpectsfiltertobeadict' retval [get attr d attribute for d in data if all [ d get key None filters[key] for key in filters] ]else retval [get attr d attribute for d in data]retval [val for val in retval if val is not None ]return retval
def prefixed userid request authn type getattr request 'authn type' None if authn type is not None return authn type + ' ' + request selected userid
def get Test List suite Names [' One Node Tests' ' Multi Node Tests' ' Model Maturity Tests' ' Swarm Terminator Tests']test Names []for suite in suite Names for f in dir eval suite if f startswith 'test' test Names append '%s %s' % suite f return test Names
def function simple a b c return a b c
def set vm state and notify context instance uuid service method updates ex request spec LOG warning LW ' Failedto% service s % method s % ex s' {'service' service 'method' method 'ex' ex} vm state updates['vm state']properties request spec get 'instance properties' {} notifier rpc get notifier service state vm state upper LOG warning LW ' Settinginstanceto%sstate ' state instance uuid instance uuid instance objects Instance context context uuid instance uuid **updates instance obj reset changes ['uuid'] instance save compute utils add instance fault from exc context instance ex sys exc info payload dict request spec request spec instance properties properties instance id instance uuid state vm state method method reason ex event type '%s %s' % service method notifier error context event type payload
def register deep copy op c code typ code version Deep Copy Op c code and version[typ] code version
def length hint obj try return len obj except Attribute Error Type Error try get hint type obj length hint except Attribute Error return Nonetry hint get hint obj except Type Error return Noneif hint is Not Implemented or not isinstance hint int types or hint < 0 return Nonereturn hint
def policy version exists policy Name policy Version Id region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile policy conn get policy version policy Name policy Name policyversion Id policy Version Id return {'exists' bool policy }except Client Error as e err salt utils boto 3 get error e if e response get ' Error' {} get ' Code' ' Resource Not Found Exception' return {'exists' False}return {'error' salt utils boto 3 get error e }
def test cnot commutators assert Commutator CNOT 0 1 Z 0 doit 0 assert Commutator CNOT 0 1 T 0 doit 0 assert Commutator CNOT 0 1 S 0 doit 0 assert Commutator CNOT 0 1 X 1 doit 0 assert Commutator CNOT 0 1 CNOT 0 1 doit 0 assert Commutator CNOT 0 1 CNOT 0 2 doit 0 assert Commutator CNOT 0 2 CNOT 0 1 doit 0 assert Commutator CNOT 1 2 CNOT 1 0 doit 0
def check header match 180 or later header 1 header 2 header 1 header 1 split ' ' header 2 header 2 split ' ' for e1 e2 in zip header 1 header 2 if e1 split '' [0 ] e2 split '' [0 ] return Falsereturn True
def update gems ruby None runas None gem bin None try gems gems split except Attribute Error passreturn gem ['update'] + gems ruby gem bin gem bin runas runas
@register tagdef get unread message count for parser token try tag name arg token contents split None 1 except Value Error raise template Template Syntax Error '%stagrequiresarguments' % token contents split [0 ] m re search ' *? as \\w+ ' arg if not m raise template Template Syntax Error '%staghadinvalidarguments' % tag name user var name m groups return Message Count user var name
def grubbs timeseries series scipy array [x[ 1 ] for x in timeseries] std Dev scipy std series mean np mean series tail average tail avg timeseries z score tail average - mean / std Dev len series len series threshold scipy stats t isf 0 05 / 2 * len series len series - 2 threshold squared threshold * threshold grubbs score len series - 1 / np sqrt len series * np sqrt threshold squared / len series - 2 + threshold squared return z score > grubbs score
def headers url generator resp fuzzable req resp headers resp get headers for parser header names in URL HEADERS iteritems for header name in header names header value resp headers iget header name None if header value is not None header value smart unicode header value encoding resp charset for ref in parser resp header name header value yield ref fuzzable req resp False
def ttest ind from stats mean 1 std 1 nobs 1 mean 2 std 2 nobs 2 equal var True if equal var df denom equal var ttest denom std 1 ** 2 nobs 1 std 2 ** 2 nobs 2 else df denom unequal var ttest denom std 1 ** 2 nobs 1 std 2 ** 2 nobs 2 res ttest ind from stats mean 1 mean 2 denom df return Ttest ind Result *res
def dump js escaped json obj cls Edx JSON Encoder json string json dumps obj ensure ascii True cls cls json string escape json for js json string return json string
@receiver post migrate def sync create groups sender **kwargs if sender label u'accounts' create groups False
def make logpt global R Vs local R Vs observed R Vs potentials factors [ c * v logpt for v c in observed R Vs items ] + [ c * v logpt for v c in global R Vs items ] + [ c * v logpt for v c in local R Vs items ] + potentials logpt tt add *map tt sum factors return logpt
def generate prototypes from src src text src text collapse braces strip src text prototype pattern re compile prototype re M re S function pattern re compile function re M re S prototypes prototype pattern findall src text functions function pattern findall src text declared prototypes list map sanitize prototype prototypes all prototypes list map sanitize prototype functions for declared prototype in declared prototypes if declared prototype in all prototypes all prototypes remove declared prototype all prototypes sorted set all prototypes key all prototypes index return all prototypes
def module exists module name try import module name except Import Error return Falseelse return True
def intrinsic func name getattr func ' name ' str func llc Intrinsic name func llc register return llc
def clean tmp sfn if sfn startswith os path join tempfile gettempdir salt utils files TEMPFILE PREFIX all roots itertools chain from iterable six itervalues opts ['file roots'] in roots any sfn startswith root for root in all roots if os path exists sfn and not in roots os remove sfn
def from tree expr namespace None if isinstance expr dict op args expr[u'op'] expr[u'args'] if op u'slice' return expr utils slice *[from tree arg namespace for arg in args] if hasattr blaze expr op cls getattr blaze expr op else cls expression from name op if cls is Symbol cls symbolchildren [from tree arg namespace for arg in args]return cls *children elif isinstance expr list tuple return tuple from tree arg namespace for arg in expr if namespace and expr in namespace return namespace[expr]else return expr
def transitive closure graph reflexive False if reflexive base set lambda k set [k] else base set lambda k set agenda graph dict k graph[k] copy for k in graph closure graph dict k base set k for k in graph for i in graph agenda agenda graph[i]closure closure graph[i]while agenda j agenda pop closure add j closure closure graph setdefault j base set j agenda agenda graph get j base set j agenda - closurereturn closure graph
@datastore rpc positional 1 def Non Transactional func None allow existing True if func is not None return Non Transactional func def outer wrapper func def inner wrapper *args **kwds if not Is In Transaction return func *args **kwds if not allow existing raise datastore errors Bad Request Error ' Functioncannotbecalledfromwithinatransaction ' txn connection Pop Connection try return func *args **kwds finally Push Connection txn connection return inner wrapperreturn outer wrapper
def wait until name state timeout 300 start time time time node show instance name call 'action' while True if node['state'] state return Truetime sleep 1 if time time - start time > timeout return Falsenode show instance name call 'action'
def create body url build url RESOURCE return request 'post' url json body
def get Stream Label sample Rate channels block Size return '{} {} {}' format sample Rate channels block Size
def return json file request match CONTENT TYPE RE match request META['CONTENT TYPE'] if match charset match group 1 else charset settings DEFAULT CHARSE Tobj dict simplejson loads request body decode charset obj json simplejson dumps obj dict encoding charset cls Django JSON Encoder ensure ascii False response Http Response smart str obj json encoding charset status 200 mimetype 'application/json charset ' + charset response[' Content- Disposition'] 'attachment filename testfile json'return response
def require initialized exception def decorator method @wraps method def wrapped method self *args **kwargs if not self initialized raise exceptionreturn method self *args **kwargs return wrapped methodreturn decorator
def mkdtemp suffix '' prefix template dir None if dir is None dir gettempdir names get candidate names for seq in xrange TMP MAX name names next file os path join dir prefix + name + suffix try os mkdir file 448 return fileexcept OS Error as e if e errno errno EEXIST continueif os name 'nt' and e errno errno EACCES and os path isdir dir and os access dir os W OK continueraiseraise IO Error errno EEXIST ' Nousabletemporarydirectorynamefound'
def test es 2 try from vispy gloo gl import es 2 except Exception import ctypesctypes TEST DLL Dummy Object from vispy gloo gl import es 2 test function names es 2 test constant names es 2
def atoms cls instance or dict field getter serializable getter instance or dict gettry field getter instance or dict data getexcept Attribute Error passsequences cls field list field getter cls serializables items serializable getter for sequence get in sequences for field name field in sequence yield field name field get field name Undefined
def CDLEVENINGSTAR bar Ds count penetration -4 e+ 37 return call talib with ohlc bar Ds count talib CDLEVENINGSTAR penetration
def run server application port sock eventlet listen '0 0 0 0' port eventlet wsgi server sock application
def batch flatten x x tf reshape x stack [ -1 prod shape x [1 ] ] return x
def fpart x return math modf x [0 ]
def create instance context user id 'fake' project id 'fake' params None flavor flavors get flavor by name 'm 1 tiny' net info model Network Info [] info cache objects Instance Info Cache network info net info inst objects Instance context context image ref uuids fake image ref reservation id 'r-fakeres' user id user id project id project id instance type id flavor id flavor flavor old flavor None new flavor None system metadata {} ami launch index 0 root gb 0 ephemeral gb 0 info cache info cache if params inst update params inst create return inst
def call lights *args **kwargs res dict lights get lights for dev id in 'id' in kwargs and get devices kwargs or sorted lights keys if lights get str dev id res[dev id] lights[str dev id ]return res or False
def get Overhang Direction below Outset Loops segment Begin segment End segment segment End - segment Begin normalized Segment euclidean get Normalized complex segment real segment imag segment Y Mirror complex normalized Segment real - normalized Segment imag segment Begin segment Y Mirror * segment Begin segment End segment Y Mirror * segment End solid X Intersection List []y segment Begin imagsolid X Intersection List append euclidean X Intersection Index -1 0 segment Begin real solid X Intersection List append euclidean X Intersection Index -1 0 segment End real for below Loop Index in xrange len below Outset Loops below Loop below Outset Loops[below Loop Index]rotated Outset euclidean get Rotated Complexes segment Y Mirror below Loop euclidean add X Intersection Indexes From Loop Y rotated Outset below Loop Index solid X Intersection List y overhanging Segments euclidean get Segments From X Intersection Indexes solid X Intersection List y overhang Direction complex for overhanging Segment in overhanging Segments overhang Direction + get Doubled Round Z overhanging Segment normalized Segment return overhang Direction
def get items arg items []for count bookmark in enumerate get results arg items append alp Item title bookmark title subtitle bookmark path arg bookmark path icon ' Clone Repo Icon png' return items
def sequence i 0 f lambda i i + 1 while True yield i i f i
def ls return sorted grains
def exec code lang code cwd None return exec code all lang code cwd ['stdout']
def python console namespace None if namespace is None import inspectframe inspect currentframe caller frame f backif not caller logging error "can'tfindcallerwhostartthisconsole " caller framenamespace dict caller f globals namespace update caller f locals return get python console namespace namespace interact
def split txt txt epub split size kb 0 if epub split size kb > 0 if isinstance txt unicode txt txt encode 'utf- 8 ' length byte len txt chunk size long length byte / int length byte / epub split size kb * 1024 + 2 if len filter lambda x len x > chunk size txt split '\n\n' txt '\n\n' join [split string separator line chunk size for line in txt split '\n\n' ] if isbytestring txt txt txt decode 'utf- 8 ' return txt
def curdoc return state document
def instance overrides method base instance method name bound method getattr instance method name unbound method getattr base method name return six get unbound function unbound method six get method function bound method
def invalid attribute attributes invalid attributes []for attribute in attributes if 'namespace' not in attribute msg u"'namespace'notinenrollmentattribute"log warn msg invalid attributes append 'namespace' raise Invalid Enrollment Attribute msg if 'name' not in attribute msg u"'name'notinenrollmentattribute"log warn msg invalid attributes append 'name' raise Invalid Enrollment Attribute msg if 'value' not in attribute msg u"'value'notinenrollmentattribute"log warn msg invalid attributes append 'value' raise Invalid Enrollment Attribute msg return invalid attributes
def format List Lines msgs i 0for size in msgs i + 1 yield '%d%d\r\n' % i size
def basic auth realm checkpassword debug False if '"' in realm raise Value Error ' Realmcannotcontainthe" quote character ' request cherrypy serving requestauth header request headers get 'authorization' if auth header is not None with cherrypy HTTP Error handle Value Error binascii Error 400 ' Bad Request' scheme params auth header split '' 1 if scheme lower 'basic' username password base 64 decode params split ' ' 1 if checkpassword realm username password if debug cherrypy log ' Authsucceeded' 'TOOLS AUTH BASIC' request login usernamereturncherrypy serving response headers['www-authenticate'] ' Basicrealm "%s"' % realm raise cherrypy HTTP Error 401 ' Youarenotauthorizedtoaccessthatresource'
def read rle file obj header bit width debug logging count header >> 1 zero data '\x 00 \x 00 \x 00 \x 00 'width bit width + 7 // 8 data file obj read width data data + zero data[len data ] value struct unpack '<i' data [0 ]if debug logging logger debug u' Read RL Egroupwithvalue%sofbyte-width%sandcount%s' value width count for in range count yield value
def get svc alias ret {}for d in AVAIL SVR DIRS for el in glob glob os path join d '*' if not os path islink el continuepsvc os readlink el if not os path isabs psvc psvc os path join d psvc nsvc os path basename psvc if nsvc not in ret ret[nsvc] []ret[nsvc] append el return ret
def normprob z direction 'two-sided' mean 0 std 1 if direction 'two-sided' if z > 0 return 2 * 1 0 - norm cdf z mean std else return 2 * norm cdf z mean std elif direction 'high' return 1 - norm cdf z mean std elif direction 'low' return norm cdf z mean std else raise Value Error ' Unknowndirection '
def pair iter it it iter it prev next it for el in it yield prev el prev el yield prev None
def get url conn urlopen url resp conn read conn close return resp
def classmark Change Mobile Station Classmark 3 presence 0 a Tp Pd pd 6 b Message Type mes Type 22 c Mobile Station Classmark 2 packet a / b / c if Mobile Station Classmark 3 presence is 1 e Mobile Station Classmark 3 iei MSC 3 32 packet packet / e return packet
@with devicedef remount with log waitfor ' Remountingfilesystemon%s' % context device as w disable verity root with Adb Client as c reply c remount if 'remountsucceeded' not in reply log error ' Couldnotremountfilesystem \n%s' % reply
def parse vars args result {}for arg in args if ' ' not in arg raise Value Error ' Variableassignment%rinvalid no" " ' % arg name value arg split ' ' 1 result[name] valuereturn result
def debugerror if has Templating out str djangoerror else out '<p> You\'vesetweb pytousethefancierdebugerrorerrormessages \nbutthesemessagesrequireyouinstallthe Cheetahtemplate\nsystem Formoreinformation see\n<ahref "http //webpy org/">theweb pywebsite</a> </p>\n\n<p> Inthemeantime here\'saplainolderrormessage </p>\n\n<pre>%s</pre>\n\n<p> Ifitsayssomethingabout\' Compiler\' thenit\'sprobably\nbecauseyou\'retryingtousetemplatesandyouhaven\'t\ninstalled Cheetah Seeabove </p>\n' % htmlquote traceback format exc context status '500 Internal Server Error'context headers [ ' Content- Type' 'text/html' ]context output out
def export spreadsheet client spreadsheet key worksheet id headers cleaned headers get cleaned headers headers spreadsheet lines [headers]rows feed client Get List Feed spreadsheet key worksheet id visibility 'public' projection 'values' while True found data Falsefor row in rows feed entry line []for header idx header cleaned header in enumerate zip headers cleaned headers try cell data row custom[cleaned header] textexcept Key Error raise Google Spreadsheet Error " Couldnotmapheader'%s'to Google Spreadsheet'sinternalrepresentationoftheheader Wesuggestchangingthenameoftheheaderinyour Google Spreadsheettobealphanumericifpossible asthiswilllikelysolvetheissue Notethatthenameisn't*required*tobealphanumeric butitmayfixissueswithconvertingto Google Spreadsheet'sinternalformatinsomecases " % header if not found data and header idx 0 and cell data lstrip startswith '#' line append cell data breakelse line append cell data found data Truespreadsheet lines append line next link rows feed Get Next Link if next link rows feed client Get next link href converter Spreadsheets List Feed From String else breakreturn spreadsheet lines
def test help command should exit status ok when command exists script result script pip 'help' 'freeze' assert result returncode SUCCESS
def is vlanid used vlan id LOG debug 'is vlanid used called' session db get session try vlanid session query l2 network models Vlan ID filter by vlan id vlan id one return vlanid['vlan used']except exc No Result Found raise c exc Vlan ID Not Found vlan id vlan id
def getservbyname servicename protocolname None return Resolve Service servicename protocolname [1 ]
def task label task func task[ 0 ]if hasattr func 'funcs' if len func funcs > 1 return '{ 0 } ' format funcname func funcs[ 0 ] else head funcname func funcs[ 0 ] else head funcname task[ 0 ] if any has sub tasks i for i in task[ 1 ] return '{ 0 } ' format head else return head
def build config live server False dump json False dirty False if not dirty log info u' Cleaningsitedirectory' utils clean directory config[u'site dir'] else log warning u"A'dirty'buildisbeingperformed thiswilllikelyleadtoinaccuratenavigationandotherlinkswithinyoursite Thisoptionisdesignedforsitedevelopmentpurposesonly " if not live server log info u' Buildingdocumentationtodirectory %s' config[u'site dir'] if dirty and site directory contains stale files config[u'site dir'] log info u' Thedirectorycontainsstalefiles Use--cleantoremovethem ' if dump json build pages config dump json True dirty dirty returnfor theme dir in reversed config[u'theme dir'] log debug u' Copyingstaticassetsfromtheme %s' theme dir utils copy media files theme dir config[u'site dir'] exclude [u'* py' u'* pyc' u'* html'] dirty dirty log debug u' Copyingstaticassetsfromthedocsdir ' utils copy media files config[u'docs dir'] config[u'site dir'] dirty dirty log debug u' Buildingmarkdownpages ' build pages config dirty dirty
def deprecated version replacement None def deprecation Decorator function '\n Decoratorthatmarks C{function}asdeprecated \n'warning String get Deprecation Warning String function version None replacement @wraps function def deprecated Function *args **kwargs warn warning String Deprecation Warning stacklevel 2 return function *args **kwargs append To Docstring deprecated Function get Deprecation Docstring version replacement deprecated Function deprecated Version versionreturn deprecated Functionreturn deprecation Decorator
def update doc doc from textwrap import wrapinfo table [ p plugin info p get 'description' 'nodescription' for p in available plugins if not p 'test' ]if len info table > 0 name length max [len n for n in info table] else name length 0description length WRAP LEN - 1 - name length column lengths [name length description length] format plugin info table info table column lengths for name plugin description in info table description lines wrap plugin description description length name column [name]name column extend ['' for in range len description lines - 1 ] for name description in zip name column description lines doc + '%s%s\n' % name ljust name length description doc doc strip return doc
def write delete marker file directory filepath os path join directory PIP DELETE MARKER FILENAME with open filepath 'w' as marker fp marker fp write DELETE MARKER MESSAGE
def nomethod cls context status '405 Method Not Allowed'header ' Content- Type' 'text/html' header ' Allow' ' ' join [method for method in ['GET' 'HEAD' 'POST' 'PUT' 'DELETE'] if hasattr cls method ] return output 'methodnotallowed'
def dup ff trivial gcd f g K if not f or g return [] [] [] elif not f return dup monic g K [] [dup LC g K ] elif not g return dup monic f K [dup LC f K ] [] else return None
def subdocuments fields chain resource document if len fields chain 0 yield document elif isinstance document dict and fields chain[ 0 ] in document subdocument document[fields chain[ 0 ]]docs subdocument if isinstance subdocument list else [subdocument] try resource field definition resource fields chain[ 0 ] ['data relation']['resource']except Key Error resource resourcefor doc in docs for result in subdocuments fields chain[ 1 ] resource doc yield result else yield document
def iterable obj try len obj except return Falsereturn True
def only Py 27 Or Newer test @functools wraps test def wrapper *args **kwargs msg '{name}requires Python 2 7 x+torun' format name test name if sys version info < 2 7 raise Skip Test msg return test *args **kwargs return wrapper
def S IFMT mode return mode & 61440
@publicdef refine root f s t eps None steps None fast False check sqf False try F Poly f except Generators Needed raise Polynomial Error "can'trefinearootof%s notapolynomial" % f return F refine root s t eps eps steps steps fast fast check sqf check sqf
def get candidate names global name sequenceif name sequence is None once lock acquire try if name sequence is None name sequence Random Name Sequence finally once lock release return name sequence
def context dict revision ready for l10 n False revision approved False diff ''l 10 n revision document revisions filter is ready for localization True approved revision document revisions filter is approved True if ready for l10 n and l10 n count > 1 old rev l10 n order by '-created' [1 ]diff get diff for revision document old rev revision elif revision approved and approved count > 1 old rev approved order by '-created' [1 ]diff get diff for revision document old rev revision elif revision document current revision is not None old rev revision document current revisiondiff get diff for revision document old rev revision return {'document title' revision document title 'creator' revision creator 'host' Site objects get current domain 'diff' diff 'summary' clean revision summary ALLOWED TAGS ALLOWED ATTRIBUTES 'fulltext' clean revision content ALLOWED TAGS ALLOWED ATTRIBUTES }
def color dict to objects d colorspace 'hsv' result {}for k v in d items result[k] Color k v colorspace return result
def monomial key order None gens None if order is None order lexif isinstance order Symbol order str order if isinstance order str try order monomial key[order]except Key Error raise Value Error "supportedmonomialorderingsare'lex' 'grlex'and'grevlex' got%r" % order if hasattr order ' call ' if gens is not None def order expr return order expr as poly *gens degree list return orderreturn orderelse raise Value Error 'monomialorderingspecificationmustbeastringoracallable got%s' % order
def mac only request context {'title' ' Supports OSX Only'}template 'general/ios html'return render request template context
def ensure valid usage key view func @wraps view func def inner request *args **kwargs usage key kwargs get 'usage key string' if usage key is not None try Usage Key from string usage key except Invalid Key Error raise Http 404 response view func request *args **kwargs return responsereturn inner
def validate colors dict colors colortype 'tuple' for key in colors if 'rgb' in colors[key] colors[key] color parser colors[key] unlabel rgb for value in colors[key] if value > 255 0 raise exceptions Plotly Error ' Whoops Theelementsinyourrgbcolorstuplescannotexceed 255 0 ' colors[key] color parser colors[key] unconvert from RGB 255 if '#' in colors[key] colors[key] color parser colors[key] hex to rgb colors[key] color parser colors[key] unconvert from RGB 255 if isinstance colors[key] tuple for value in colors[key] if value > 1 0 raise exceptions Plotly Error ' Whoops Theelementsinyourcolorstuplescannotexceed 1 0 ' if colortype 'rgb' for key in colors colors[key] color parser colors[key] convert to RGB 255 colors[key] color parser colors[key] label rgb return colors
def encode thumbnail thumbnail from calibre utils imghdr import identifyif thumbnail is None return Noneif not isinstance thumbnail tuple list try width height identify bytes thumbnail [1 ]if width < 0 or height < 0 return Nonethumbnail width height thumbnail except Exception return Nonereturn thumbnail[ 0 ] thumbnail[ 1 ] b64 encode str thumbnail[ 2 ]
def append domain grain {}if salt utils is proxy return grainif 'append domain' in opts grain['append domain'] opts ['append domain']return grain
def print file file Name print Function printer Q Printer Q Printer High Resolution printer set Page Size Q Printer A4 printer set Output File Name file Name printer set Doc Name file Name preview Q Print Preview Dialog printer preview paint Requested[Q Printer] connect print Function size Q Application instance desktop screen Geometry width size width - 100 height size height - 100 preview set Minimum Size width height preview exec
def open project with extensions path extensions if not os path exists path raise Ninja IO Exception u' Thefolderdoesnotexist' valid extensions [ext lower for ext in extensions if not ext startswith u'-' ]d {}for root dirs files in os walk path followlinks True for f in files ext os path splitext f lower [ -1 ]if ext in valid extensions or u' *' in valid extensions d[root] [f dirs]elif ext u'' and u'*' in valid extensions d[root] [f dirs]return d
def run job name force False ret {'comment' [] 'result' True}if not name ret['comment'] ' Jobnameisrequired 'ret['result'] Falseschedule list show all True return yaml False if name in schedule data schedule[name]if 'enabled' in data and not data['enabled'] and not force ret['comment'] ' Job{ 0 }isdisabled ' format name else out salt ['event fire'] {'name' name 'func' 'run job'} 'manage schedule' if out ret['comment'] ' Scheduling Job{ 0 }onminion ' format name else ret['comment'] ' Failedtorunjob{ 0 }onminion ' format name ret['result'] Falseelse ret['comment'] ' Job{ 0 }doesnotexist ' format name ret['result'] Falsereturn ret
def places photo client photo reference max width None max height None if not max width or max height raise Value Error 'amax widthormax heightargisrequired' params {'photoreference' photo reference}if max width params['maxwidth'] max widthif max height params['maxheight'] max heightresponse client get '/maps/api/place/photo' params extract body lambda response response requests kwargs {'stream' True} return response iter content
def format args args None kwargs None if args is not None arglist [utils compact text repr arg 200 for arg in args]else arglist []if kwargs is not None for k v in kwargs items arglist append '{} {}' format k utils compact text repr v 200 return ' ' join arglist
@with devicedef root log info ' Enablingrooton%s' % context device with context quiet with Adb Client as c reply c root if 'alreadyrunningasroot' in reply returnelif not reply or 'restartingadbdasroot' in reply with context quiet wait for device else log error ' Couldnotrunasroot \n%s' % reply
def check package data dist attr value if isinstance value dict for k v in value items if not isinstance k str breaktry iter v except Type Error breakelse returnraise Distutils Setup Error attr + 'mustbeadictionarymappingpackagenamestolistsofwildcardpatterns'
def get File Text file Name read Mode 'r' print Warning True try file open file Name read Mode file Text file read file close return file Textexcept IO Error if print Warning print ' Thefile' + file Name + 'doesnotexist ' return ''
def get rng state return default generator get state
def date now now time time date arr np array [np floor now 1000000 0 * now - np floor now ] dtype 'int 32 ' return date arr
def flavor get extras request flavor id raw False flavor novaclient request flavors get flavor id extras flavor get keys if raw return extrasreturn [ Flavor Extra Spec flavor id key value for key value in extras items ]
def dict to name value data if isinstance data dict sorted data sorted data items key lambda s s[ 0 ] result []for name value in sorted data if isinstance value dict result append {name dict to name value value } else result append {name value} else result datareturn result
def libvlc media player new p libvlc instance f Cfunctions get 'libvlc media player new' None or Cfunction 'libvlc media player new' 1 class result Media Player ctypes c void p Instance return f p libvlc instance
def Set Verbose Level level return cpplint state Set Verbose Level level
def get provider user states user states []found user auths list models Django Storage user get social auth for user user for enabled provider in provider Registry enabled association Nonefor auth in found user auths if enabled provider match social auth auth association authbreakif enabled provider accepts logins or association states append Provider User State enabled provider user association return states
def not found request return render request '404 html' {'request path' request path 'title' ' Page Not Found' } status 404
def nullable property schema new schema property schema copy new schema['type'] [property schema['type'] 'null']return new schema
def make async func def make me async *args **kwargs async func Async Runner func async func *args **kwargs return async funcreturn make me async
def deprecated removal version hint message None validate removal semver removal version def decorator func if not inspect isfunction func raise Bad Decorator Nesting Error u' The@deprecateddecoratormustbeappliedinnermostofalldecorators ' func full name u'{} {}' format func module func name @wraps func def wrapper *args **kwargs warn or error removal version func full name hint message return func *args **kwargs return wrapperreturn decorator
@then u'weseedatabasecreated' def step see db created context expect exact context u'CREATEDATABASE' timeout 2
def get Path By Prefix path prefix xml Element if len path < 2 print ' Warning bug pathistoosmallinevaluateinset Path By Prefix 'returnpath By Key get Path By Key prefix + 'path' xml Element if len path By Key < len path for point Index in xrange len path By Key path[point Index] path By Key[point Index]else path path By Keypath[ 0 ] get Vector 3 By Prefix path[ 0 ] prefix + 'path Start' xml Element path[ -1 ] get Vector 3 By Prefix path[ -1 ] prefix + 'path End' xml Element return path
def Validate AFF 4 Type aff 4 type if aff 4 type is None return Noneif not isinstance aff 4 type type raise Type Error 'aff 4 type %smustbeatype' % aff 4 type if not issubclass aff 4 type AFF 4 Object raise Type Error 'aff 4 type %smustbeasubclassof AFF 4 Object ' % aff 4 type return aff 4 type
def tamper payload **kwargs ret Val payloadif payload ret Val ''i 0while i < len payload if payload[i] '%' and i < len payload - 2 and payload[ i + 1 i + 2 ] in string hexdigits and payload[ i + 2 i + 3 ] in string hexdigits ret Val + '%% 25 %s' % payload[ i + 1 i + 3 ] i + 3else ret Val + '%% 25 % 2X' % ord payload[i] i + 1return ret Val
def get trailing data record extra data flags data Ordered Dict flags extra data flags >> 1 num 0while flags num + 1if flags & 1 sz consumed decint record forward False if sz > consumed data[num] record[ - sz - consumed ]record record[ - sz ]flags >> 1if extra data flags & 1 sz ord record[ -1 ] & 3 + 1 consumed 1if sz > consumed data[ 0 ] record[ - sz - consumed ]record record[ - sz ]return data record
def is installable dir path if not os path isdir path return Falsesetup py os path join path 'setup py' if os path isfile setup py return Truereturn False
@currydef memoize func cache None key None if cache is None cache {}try may have kwargs has keywords func is not False is unary is arity 1 func except Type Error may have kwargs Trueis unary Falseif key is None if is unary def key args kwargs return args[ 0 ]elif may have kwargs def key args kwargs return args or None frozenset kwargs items if kwargs else None else def key args kwargs return argsdef memof *args **kwargs k key args kwargs try return cache[k]except Type Error raise Type Error ' Argumentstomemoizedfunctionmustbehashable' except Key Error cache[k] result func *args **kwargs return resulttry memof name func name except Attribute Error passmemof doc func doc memof wrapped funcreturn memof
def color validator optdict name value return optik ext check color None name value
def datetime to long dt return timedelta to usecs dt - dt min
def staff only view request if request user is staff return Http Response '' else raise Custom Test Exception
def test gaussian mssim vs author ref mssim matlab 0 327314295673357 mssim ssim cam cam noisy gaussian weights True use sample covariance False assert almost equal mssim mssim matlab decimal 3
def urlopen url data None proxies None global urlopenerif proxies is not None opener urllib request Fancy UR Lopener proxies proxies elif not urlopener opener Fancy UR Lopener urlopener openerelse opener urlopenerif data is None return opener open url else return opener open url data
def get test fname fname path os path dirname file full path os path join path 'test' fname return full path
def delete current allocs conn allocs for alloc in allocs rp id alloc resource provider idconsumer id alloc consumer iddel sql ALLOC TBL delete where sa and ALLOC TBL c resource provider id rp id ALLOC TBL c consumer id consumer id conn execute del sql
def akas Languages movie lang and aka []akas set movie get 'akas' or [] + movie get 'akasfromreleaseinfo' or [] for aka in akas aka aka encode 'utf 8 ' split ' ' if len aka 2 language re akas lang search aka[ 1 ] if language language language groups [0 ]else country aka[ 1 ] split ' ' [0 ]country re akas country sub '' country strip language COUNTRY LANG get country else language Nonelang and aka append language aka[ 0 ] decode 'utf 8 ' return lang and aka
def boto fix security token in profile conn profile name profile 'profile' + profile name if boto config has option profile 'aws security token' conn provider set security token boto config get profile 'aws security token' return conn
def validate regex pattern flags with warnings catch warnings record True as recorded warnings warnings simplefilter 'always' try re compile pattern flags except re error as e raise configexc Validation Error pattern 'mustbeavalidregex-' + str e except Runtime Error raise configexc Validation Error pattern 'mustbeavalidregex-recursiondepthexceeded' for w in recorded warnings if issubclass w category Deprecation Warning and str w message startswith 'badescape' raise configexc Validation Error pattern 'mustbeavalidregex-' + str w message else warnings warn w message
@login required@require POS Tdef reply request document slug thread id doc get document document slug request form Reply Form request POST post preview Noneif form is valid thread get object or 404 Thread pk thread id document doc if not thread is locked reply form save commit False reply thread threadreply creator request userif 'preview' in request POST post preview reply elif not is ratelimited request reply save statsd incr 'kbforums reply' if Setting get for user request user 'kbforums watch after reply' New Post Event notify request user thread New Post Event reply fire exclude reply creator return Http Response Redirect reply get absolute url return posts request document slug thread id form post preview
def throw msg exc Validation Error title None msgprint msg raise exception exc title title indicator u'red'
def items store load return store items
def test reader macro entry tokenize '#^ ' assert entry[ 0 ][ 0 ] Hy Symbol 'dispatch reader macro' assert entry[ 0 ][ 1 ] Hy String '^' assert len entry[ 0 ] 3
@cronjobs registerdef exclude new region regions region ids [r id for r in regions]excluded set Addon Excluded Region objects filter region in region ids values list 'addon' flat True ids Webapp objects exclude id in excluded filter enable new regions False values list 'id' flat True region exclude ids region ids
def logistic function value return 1 0 / 1 0 + math exp - value
def get ranges headervalue content length if not headervalue return Noneresult [] bytesunit byteranges headervalue split ' ' 1 for brange in byteranges split ' ' start stop [x strip for x in brange split '-' 1 ]if start if not stop stop content length - 1 start stop int start int stop if start > content length continueif stop < start return Noneresult append start stop + 1 else if not stop return Noneif int stop > content length result append 0 content length else result append content length - int stop content length return result
def sort unicode choices key if not HAS PYUCA return sorted choices key lambda tup remove accents key tup lower else collator pyuca Collator return sorted choices key lambda tup collator sort key force text key tup
def on DB Mgr Ready INFO MSG 'on DB Mgr Ready bootstrap Group Index %s bootstrap Global Index %s' % os getenv 'KBE BOOTIDX GROUP' os getenv 'KBE BOOTIDX GLOBAL'
def create port context port id network id physical interface vlan id tenant id admin state up port id port id[ 0 11 ]session context sessionwith session begin subtransactions True port Brocade Port port id port id network id network id physical interface physical interface vlan id vlan id admin state up admin state up tenant id tenant id session add port return port
def root krylov doc pass
def process mtree for c in mtree children groups find first level groups c value group delimiters[ 0 ] for delimiters in group delimiters flatten lambda l x l + find first level groups x delimiters groups functools reduce flatten groups [] c split on components groups
def get container inspect c id for co in Test Service Discovery container inspects if co get ' Id' c id return coreturn None
def getdocumenttext document paratextlist []paralist []for element in document getiterator if element tag '{' + nsprefixes['w'] + '}p' paralist append element for para in paralist paratext u''for element in para getiterator if element tag '{' + nsprefixes['w'] + '}t' if element text paratext paratext + element text elif element tag '{' + nsprefixes['w'] + '}tab' paratext paratext + ' DCTB ' if not len paratext 0 paratextlist append paratext return paratextlist
def virtual if apikey return Truereturn False ' The AP Ikeywasnotspecified Pleasespecifyitusingthe"apikey"config '
def is static method method klass for c in klass mro if name method in c dict return isinstance c dict [name method ] staticmethod else return False
def find instrument devices track or chain instrument find if lambda d d type Live Device Device Type instrument track or chain devices if instrument and not instrument can have drum pads if instrument can have chains return chain [instrument] *imap find instrument devices instrument chains return []
def gettext noop message return message
def reset drivers global driversdrivers None
def active tcp ret {}for statf in ['/proc/net/tcp' '/proc/net/tcp 6 '] if os path isfile statf with salt utils fopen statf 'rb' as fp for line in fp if line strip startswith 'sl' continueret update parse tcp line line return ret
def record user edited an exploration user id user settings get user settings user id if user settings user settings last edited an exploration datetime datetime utcnow save user settings user settings
def virtual if 'reg read value' not in salt return False 'regstatemodulefailedtoload missingmodulefunction reg read value' if 'reg set value' not in salt return False 'regstatemodulefailedtoload missingmodulefunction reg set value' if 'reg delete value' not in salt return False 'regstatemodulefailedtoload missingmodulefunction reg delete value' if 'reg delete key recursive' not in salt return False 'regstatemodulefailedtoload missingmodulefunction reg delete key recursive' return 'reg'
def get Geometry Output By Negatives Positives derivation negatives positives xml Element interpolation Offset derivation interpolation Dictionary['offset']positive Output trianglemesh get Unified Output positives if len negatives < 1 return get Geometry Output By Offset positive Output interpolation Offset xml Element if len positives < 1 negative Output trianglemesh get Unified Output negatives return get Geometry Output By Offset negative Output interpolation Offset xml Element return get Geometry Output By Offset {'difference' {'shapes' [positive Output] + negatives }} interpolation Offset xml Element
def xblock type and display name xblock return '{section or subsection}"{display name}"' format section or subsection xblock type display name xblock display name xblock display name with default
def format guess guess for prop value in guess items if prop in u'season' u'episode Number' u'year' u'cd Number' u'cd Number Total' u'bonus Number' u'film Number' guess[prop] int guess[prop] elif isinstance value base text type if prop in u'edition' value clean string value guess[prop] canonical form value replace u'\\' u'' return guess
def test cache full config stub tmpdir config stub data {'storage' {'cache-size' 1024 } 'general' {'private-browsing' False}}disk cache Q Network Disk Cache disk cache set Cache Directory str tmpdir url 'http //qutebrowser org'content 'cutebowser'preload cache disk cache url content url 2 'https //qutebrowser org'content 2 'ohmycert'preload cache disk cache url 2 content 2 metadata Q Network Cache Meta Data metadata set Url Q Url url soon Q Date Time current Date Time add Months 4 assert soon is Valid metadata set Last Modified soon assert metadata is Valid disk cache update Meta Data metadata disk cache remove Q Url url 2 assert disk cache meta Data Q Url url last Modified soon assert disk cache data Q Url url read All content
def get config filename packageormod None cfg get config packageormod while cfg parent is not cfg cfg cfg parentreturn cfg filename
def setup platform hass config add devices discovery info None name config get CONF NAME mac config get CONF MAC LOGGER debug ' Settingup ' mon Monitor hass mac name add devices [ Skybeacon Temp name mon ] add devices [ Skybeacon Humid name mon ] def monitor stop service or event ' Stopthemonitorthread ' LOGGER info ' Stoppingmonitorfor%s' name mon terminate hass bus listen once EVENT HOMEASSISTANT STOP monitor stop mon start
def check jail None chroot None root None depends False recompute False checksum False if not any depends recompute checksum return ' Oneofdepends recompute orchecksummustbesetto True'opts ''if depends opts + 'dy'if recompute opts + 'r'if checksum opts + 's'cmd pkg jail chroot root cmd append 'check' if opts cmd append '-' + opts return salt ['cmd run'] cmd output loglevel 'trace' python shell False
def conditionally trigger context dag run obj c p context['params']['condition param']print ' Controller DAG conditionally trigger {}' format c p if context['params']['condition param'] dag run obj payload {'message' context['params']['message']}pp pprint dag run obj payload return dag run obj
@publicdef chebyshevt poly n x None **args if n < 0 raise Value Error "can'tgenerate 1 stkind Chebyshevpolynomialofdegree%s" % n poly DMP dup chebyshevt int n ZZ ZZ if x is not None poly Poly new poly x else poly Pure Poly new poly Dummy 'x' if not args get 'polys' False return poly as expr else return poly
@loader option def undefer group loadopt name return loadopt set column strategy '*' None {'undefer group' name}
def p expression group p p[ 0 ] p[ 2 ]
def lookup loc location country corrected location names get location if corrected return get loc from db corrected country if location[ -6 ] ' County' return get loc from db location[ -6 ] strip ' Liberia' if location startswith ' Western Area' return get loc from db location[ 12 ] strip country if location in rejected loc rejected loc[location] + 1else rejected loc[location] 1
def decode s if isinstance s binary type s s decode 'latin- 1 ' if not isinstance s text type return sr [] in []for c in s if c '&' and not in in append '&' elif c '-' and in if len in 1 r append '&' else r append modified deutf 7 '' join in[ 1 ] in []elif in in append c else r append c if in r append modified deutf 7 '' join in[ 1 ] return '' join r
def do install one reg app loc relative path LOG info ' Installingappat%s' % app loc try app loc os path realpath app loc app name version desc author get app info app loc except Value Error OS Error as ex LOG error ex return Falseapp registry Hue App app name version app loc desc author if relative path app use rel path else app use abs path if reg contains app LOG warn ' %sisalreadyinstalled' % app return Truereturn reg register app and build make app app and app install conf
def get users email preferences for exploration user ids exploration id exploration user models user models Exploration User Data Model get multi user ids exploration id result []for exploration user model in exploration user models if exploration user model is None result append user domain User Exploration Prefs create default prefs else result append user domain User Exploration Prefs exploration user model mute feedback notifications exploration user model mute suggestion notifications return result
def deprecated conditional predicate removal version entity description hint message None stacklevel 4 validate removal semver removal version if predicate warn or error removal version entity description hint message stacklevel stacklevel
def DFS gr s path set [] depth first search gr s path return path
def calculate cache path cache location url thumb md 5 url hexdigest header os path join cache location thumb + ' headers' body os path join cache location thumb + ' body' return header body
def list designs request owner request GET get 'owner' '' name request GET get 'name' '' if request is ajax return render json {'designs' list designs request owner name } js safe True else return render 'designs mako' request {'currentuser' request user 'owner' owner 'name' name 'apps' appmanager get apps dict }
def ratelimit name rate method ['POST'] skip if lambda r False def decorator fn @wraps fn def wrapped request *args **kwargs is ratelimited request name rate method skip if return fn request *args **kwargs return wrappedreturn decorator
def real ip request return request META get 'HTTP X REAL IP'
def add resource manager extra kwargs hook f hook if not hasattr f 'resource manager kwargs hooks' f resource manager kwargs hooks []names [h name for h in f resource manager kwargs hooks]if hook name not in names f resource manager kwargs hooks append hook
def write all rst pages infos get infos screenshots dir s make gallery page infos write file gallery filename s for info in infos s make detail page info detail name slash generation dir 'gen {} rst' format info['dunder'] write file detail name s s make index infos index name slash generation dir 'index rst' write file index name s Logger info 'gallery py Createdgalleryrstdocumentationpages '
def regions from boto s3 connection import S3 Connectionreturn get regions 's 3 ' region cls S3 Region Info connection cls S3 Connection
def create function from source function source imports None ns {}import keys []try if imports is not None for statement in imports exec statement in nsimport keys list ns keys exec function source in nsexcept Exception as e msg u'\n Errorexecutingfunction \n%s\n' % function source msg + u'\n' join [u' Functionsinconnectionstringshavetobestandalone ' u' Theycannotbedeclaredeitherinteractivelyorinside' u'anotherfunctionorinlineintheconnectstring Any' u'importsshouldbedoneinsidethefunction'] raise from Runtime Error msg e ns funcs list set ns - set import keys + [u' builtins '] assert len ns funcs 1 u' Functionorinputsareill-defined'funcname ns funcs[ 0 ]func ns[funcname]return func
def backends user return user backends data user get helper 'AUTHENTICATION BACKENDS' module member get helper 'STORAGE'
def build agg tooltip hover text None agg text None aggregated col None if hover text is None if agg text is None if isinstance aggregated col str hover text aggregated colelse hover text 'value'else hover text agg textif isinstance aggregated col str hover text '%sof%s' % hover text aggregated col return hover text title '@values'
def credential return s3 db hrm credential controller
def chunked iterable n iterable iter iterable while 1 t tuple islice iterable n if t yield t else return
def autolinks simple url u url url lower if '@' in url and ' //' not in url return '<ahref "mailto %s">%s</a>' % url url elif u url endswith ' jpg' ' jpeg' ' gif' ' png' return '<imgsrc "%s"controls/>' % url elif u url endswith ' mp 4 ' ' mpeg' ' mov' ' ogv' return '<videosrc "%s"controls></video>' % url elif u url endswith ' mp 3 ' ' wav' ' ogg' return '<audiosrc "%s"controls></audio>' % url return '<ahref "%s">%s</a>' % url url
def is association exist openid url is exist Truetry uassoc User Association objects get openid url exact openid url except is exist Falsereturn is exist
def sdb delete uri opts if not isinstance uri string types return Falseif not uri startswith 'sdb //' return Falsesdlen len 'sdb //' indx uri find '/' sdlen if indx -1 or len uri[ indx + 1 ] 0 return Falseprofile opts get uri[sdlen indx] {} if not profile profile opts get 'pillar' {} get uri[sdlen indx] {} if 'driver' not in profile return Falsefun '{ 0 } delete' format profile['driver'] query uri[ indx + 1 ]loaded db salt loader sdb opts fun return loaded db[fun] query profile profile
def dict with qos specs rows result []for row in rows if row['key'] ' Qo S Specs Name' member {'name' row['value'] 'id' row['id']}if row specs spec dict dict with children specs row specs member['consumer'] spec dict pop 'consumer' member update dict specs spec dict result append member return result
def main argument dict Clc Alert Policy define module argument spec module Ansible Module supports check mode True **argument dict clc alert policy Clc Alert Policy module clc alert policy process request
def Ensure Dir Exists path try os makedirs os path dirname path except OS Error pass
def setcookie name value expires '' domain None secure False httponly False path None morsel Cookie Morsel name value safestr name safestr value morsel set name value urllib quote value if expires < 0 expires -1000000000 morsel['expires'] expiresmorsel['path'] path or ctx homepath + '/' if domain morsel['domain'] domainif secure morsel['secure'] securevalue morsel Output String if httponly value + ' httponly'header ' Set- Cookie' value
def filename search replace sr pairs filename backup False in txt open filename 'rt' read -1 out txt in txt[ ]for in exp out exp in sr pairs in exp re compile in exp out txt in exp sub out exp out txt if in txt out txt return Falseopen filename 'wt' write out txt if backup open filename + ' bak' 'wt' write in txt return True
def get Frame Info frame f locals frame f localsf globals frame f globalssame Namespace f locals is f globals has Module ' module ' in f locals has Name ' name ' in f globals same Name has Module and has Name same Name same Name and f globals[' name '] f locals[' module '] module has Name and sys modules get f globals[' name '] or None namespace Is Module module and module dict is f globals if not namespace Is Module kind 'exec'elif same Namespace and not has Module kind 'module'elif same Name and not same Namespace kind 'class'elif not same Namespace kind 'functioncall'else kind 'unknown'return kind module f locals f globals
def test all costs cases [[ Sigmoid Conv Nonlinearity Sigmoid True] [ Identity Conv Nonlinearity Linear True] [ Tanh Conv Nonlinearity Tanh False] [ Rectifier Conv Nonlinearity Rectified Linear False]]for conv nonlinearity mlp nonlinearity cost implemented in cases check case conv nonlinearity mlp nonlinearity cost implemented
@functools wraps linecache getlines def getlines filename module globals None warn '`I Python utils ulinecache getlines`isdeprecatedsince I Python 6 0andwillberemovedinfutureversions ' Deprecation Warning stacklevel 2 return linecache getlines filename module globals module globals
def implicit multiplication result local dict global dict for step in group parentheses implicit multiplication apply functions implicit multiplication result step result local dict global dict result flatten result return result
def get Centers From Circle Nodes circle Nodes radius if len circle Nodes < 2 return []circle Intersections get Circle Intersections From Circle Nodes circle Nodes circle Intersection Loops get Circle Intersection Loops circle Intersections return get Centers From Intersection Loops circle Intersection Loops radius
def invert colors clip maxi 1 0 if clip ismask else 255 return clip fl image lambda f maxi - f
def service client config service client name None parameters {'disable ssl certificate validation' CONF identity disable ssl certificate validation 'ca certs' CONF identity ca certificates file 'trace requests' CONF debug trace requests 'http timeout' CONF service clients http timeout}if service client name is None return parametersconfig group service client name replace '-' ' ' try options getattr CONF config group except cfg No Such Opt Error raise exceptions Unknown Service Client services service client name if service client name 'identity' parameters['endpoint type'] getattr options 'endpoint type' for setting in ['build timeout' 'build interval'] if not hasattr options setting or not getattr options setting parameters[setting] getattr CONF compute setting else parameters[setting] getattr options setting if not hasattr options 'region' or not getattr options 'region' parameters['region'] CONF identity regionelse parameters['region'] getattr options 'region' parameters['service'] getattr options 'catalog type' return parameters
def channel Release Ba Range presence 0 Group Channel Description presence 0 Group Cipher Key Number presence 0 Gprs Resumption presence 0 Ba List Pref presence 0 a Tp Pd pd 6 b Message Type mes Type 13 c Rr Cause packet a / b / c if Ba Range presence is 1 d Ba Range Hdr iei BR 115 eight Bit BR 0 packet packet / d if Group Channel Description presence is 1 e Group Channel Description Hdr iei GCD 116 eight Bit GCD 0 packet packet / e if Group Cipher Key Number presence is 1 f Group Cipher Key Number iei GCKN 8 packet packet / f if Gprs Resumption presence is 1 g Gprs Resumption Hdr iei GR 12 eight Bit GR 0 packet packet / g if Ba List Pref presence is 1 h Ba List Pref Hdr iei BLP 117 eight Bit BLP 0 packet packet / h return packet
def test conv str type param inspect Parameter 'foo' inspect Parameter POSITIONAL ONLY with pytest raises Type Error as excinfo argparser type conv param 'val' None assert str excinfo value 'foo Legacystringtype '
def expand multinomial expr deep True return sympify expr expand deep deep mul False power exp False power base False basic False multinomial True log False
def run cmd p subprocess Popen cmd stdout subprocess PIPE stderr subprocess PIPE shell True txt p stdout read return p wait txt
def pcapname dev if type dev is Network Interface if dev is invalid return Nonereturn dev pcap nametry return IFACES dev from name dev pcap nameexcept Value Error if conf use pcap return Noneraise
def str 2 dicts data list data []list data append {} d list data[ -1 ]lines data split '\n' for line in lines line line strip if not line d {}list data append d d list data[ -1 ]continuewhitespace line find '' if not whitespace continuekey line[ 0 whitespace]value line[ whitespace + 1 ]d update {key value} list data [val for val in list data if val {} ]return list data
def bottomhat image selem out None mask None shift x False shift y False return apply scalar per pixel generic cy bottomhat image selem out out mask mask shift x shift x shift y shift y
def enable sig handler signal name handler if hasattr signal signal name signal signal getattr signal signal name handler
def absent name region None key None keyid None profile None ret {'name' name 'result' True 'comment' '' 'changes' {}}is present salt ['boto sqs exists'] name region key keyid profile if is present if opts ['test'] ret['comment'] 'AWSSQ Squeue{ 0 }issettoberemoved ' format name ret['result'] Nonereturn retdeleted salt ['boto sqs delete'] name region key keyid profile if deleted ret['changes']['old'] nameret['changes']['new'] Noneelse ret['result'] Falseret['comment'] ' Failedtodelete{ 0 }sqsqueue ' format name else ret['comment'] '{ 0 }doesnotexistin{ 1 } ' format name region return ret
@frappe whitelist def update event args field map args frappe dict json loads args field map frappe dict json loads field map w frappe get doc args doctype args name w set field map start args[field map start] w set field map end args get field map end w save
def re s return RE Parser s parse re
def paginate query statement page page size if page is not None and page size is not None statement statement offset page * page size limit page size return statement
def fill settings sections acquire settings log printer local bears {}global bears {}for section name section in sections items bear dirs section bear dirs bears list section get 'bears' '' section local bears section global bears collect bears bear dirs bears [BEAR KIND LOCAL BEAR KIND GLOBAL] log printer section local bears Dependencies resolve section local bears section global bears Dependencies resolve section global bears all bears copy deepcopy section local bears all bears extend section global bears fill section section acquire settings log printer all bears local bears[section name] section local bearsglobal bears[section name] section global bearsreturn local bears global bears
def test dim exception 1d def f x return x ** 2 with pytest raises Value Error as exc discretize model f -10 11 -10 11 assert exc value args[ 0 ] u'yrangespecified butmodelisonly 1 -d '
def make csr key str domains must staple False assert domains ' Mustprovideoneormorehostnamesforthe CSR 'pkey Open SSL crypto load privatekey Open SSL crypto FILETYPE PEM key str req Open SSL crypto X509 Req req get subject CN domains[ 0 ]extensions [ Open SSL crypto X509 Extension 'subject Alt Name' critical False value ' ' join 'DNS %s' % d for d in domains encode 'ascii' ]if must staple extensions append Open SSL crypto X509 Extension '1 3 6 1 5 5 7 1 24 ' critical False value 'DER 30 03 02 01 05 ' req add extensions extensions req set version 2 req set pubkey pkey req sign pkey 'sha 256 ' return tuple Open SSL crypto dump certificate request method req for method in Open SSL crypto FILETYPE PEM Open SSL crypto FILETYPE ASN 1
def disabled name cmd '{ 0 }get{ 1 }status' format cmd name return not salt ['cmd retcode'] cmd 0
@then u'weseetablecreated' def step see table created context expect exact context u'CREATETABLE' timeout 2
def is unicode obj if PY 2 return isinstance obj unicode else return isinstance obj str
def user agent from requests utils import default user agentreturn 'ka-lite/%s' % VERSION + default user agent
def test multiclass error y np linspace 0 1 20 tl Tomek Links random state RND SEED assert warns User Warning tl fit X y y np array [0 ] * 3 + [1 ] * 7 + [2 ] * 10 tl Tomek Links random state RND SEED assert warns User Warning tl fit X y
def filter thing 2 x return x thing 2
def s3 unicode s encoding 'utf- 8 ' if type s is unicode return stry if not isinstance s basestring if hasattr s ' unicode ' s unicode s else try s unicode str s encoding 'strict' except Unicode Encode Error if not isinstance s Exception raises '' join [s 3 unicode arg encoding for arg in s] else s s decode encoding except Unicode Decode Error if not isinstance s Exception raiseelse s '' join [s 3 unicode arg encoding for arg in s] return s
def create formatter type *args **kwargs return ext formatter type *args **kwargs
def vpc peering conn id for name name conn log debug ' Retrieving VP Cpeeringconnectionid' ids get peering connection ids name conn if not ids ids [ None]elif len ids > 1 raise Salt Invocation Error ' Foundmultiple VP Cpeeringconnectionswiththesamename Pleasemakesureyouhaveonlyone VP Cpeeringconnectionnamed{ 0 }orinvokethisfunctionwitha VP Cpeeringconnection ID' format name return ids[ 0 ]
def Get Stdout cmdlist job subprocess Popen cmdlist stdout subprocess PIPE out job communicate [0 ]if job returncode 0 sys stderr write out + '\n' raise Gyp Error ' Error%drunning%s' % job returncode cmdlist[ 0 ] return out rstrip '\n'
def smart pad x n pad if n pad 0 all return xelif n pad < 0 any raise Runtime Error 'n padmustbenon-negative' l z pad np zeros max n pad[ 0 ] - len x + 1 0 dtype x dtype r z pad np zeros max n pad[ 0 ] - len x + 1 0 dtype x dtype return np concatenate [l z pad 2 * x[ 0 ] - x[n pad[ 0 ] 0 -1 ] x 2 * x[ -1 ] - x[ -2 - n pad[ 1 ] - 2 -1 ] r z pad]
def snapshot data get for project context project id volume type id None return IMPL snapshot data get for project context project id volume type id
@docfillerdef laplace input output None mode 'reflect' cval 0 0 def derivative 2 input axis output mode cval return correlate 1 d input [1 -2 1] axis output mode cval 0 return generic laplace input derivative 2 output mode cval
def hash resource resource md 5 hashlib md 5 for data in resource md 5 update repr data return md 5 hexdigest
def get module module name backend default backend backend instance testinfra get backend backend return backend instance get module to pascal case module name
def breakdown point n samples n subsamples return 1 - 0 5 ** 1 / n subsamples * n samples - n subsamples + 1 + n subsamples - 1 / n samples
def get paths scheme get default scheme vars None expand True if expand return expand vars scheme vars else return INSTALL SCHEMES[scheme]
def ws message message message reply channel send {'text' message['text']}
def brightness state value if value data > 0 return value data / 99 * 255 STATE ON else return 0 STATE OFF
def add prefix key identity u'image' return u' ' join [settings THUMBNAIL KEY PREFIX identity key]
def exit from conference id user if checking conference id if verification user id user conferences get memcached get key 'conferences' if is owner user id user delete conference id user del conferences[id]['users'][user]set memcached get key 'conferences' conferences return get new message for user user
def parse bytes range header try parsed ranges [] units ranges range header split ' ' 1 for range value in ranges split ' ' range value range value strip if range value parsed ranges append parse range value range value if not parsed ranges return Nonereturn units parsed ranges except Value Error return None
def classify state answer assert feconf ENABLE STRING CLASSIFIE Rinteraction instance interaction registry Registry get interaction by id state interaction id normalized answer interaction instance normalize answer answer response Noneif interaction instance is string classifier trainable response classify string classifier rule state normalized answer else raise Exception ' Noclassifierfoundforinteraction ' if response is not None return responseelif state interaction default outcome is not None return {'outcome' state interaction default outcome to dict 'answer group index' len state interaction answer groups 'classification certainty' 0 0 'rule spec index' 0}raise Exception ' Somethinghasseriouslygonewrongwiththeexploration Oppiadoesnotknowwhattodowiththisanswer Pleasecontacttheexplorationowner '
def get tool source config file None xml tree None enable beta formats True if xml tree is not None return Xml Tool Source xml tree source path config file elif config file is None raise Value Error 'get tool sourcecalledwithinvalidconfig file None ' if not enable beta formats tree load tool xml config file return Xml Tool Source tree source path config file if config file endswith ' yml' log info ' Loadingtoolfrom YAML-thisisexperimental-toolwillnotfunctioninfuture ' with open config file 'r' as f as dict ordered load f return Yaml Tool Source as dict source path config file elif config file endswith ' json' or config file endswith ' cwl' log info ' Loading CW Ltool-thisisexperimental-toollikelywillnotfunctioninfutureatleastinsameway ' return Cwl Tool Source config file else tree load tool xml config file return Xml Tool Source tree source path config file
def modify user id **data models User smart get id update object data
def update pecls if isinstance pecls six string types pecls [pecls]return pecl 'install-U{ 0 }' format cmd quote '' join pecls
def execute sample package activity try package activity '%s/%s' % package activity args ['/system/bin/sh' '/system/bin/am' 'start' '-n' package activity]output subprocess check output args except subprocess Called Process Error as e log error ' Errorexecutingpackageactivity %r' e returnlog info ' Executedpackageactivity %r' output
def wanmen get json api content by course ID course ID return loads get content 'http //api wanmen org/course/get Course Nested/{course ID}' format course ID course ID
def svdvals a overwrite a False check finite True a asarray validated a check finite check finite if a size return svd a compute uv 0 overwrite a overwrite a check finite False elif len a shape 2 raise Value Error 'expectedmatrix' else return numpy empty 0
def list certs keychain '/ Library/ Keychains/ System keychain' cmd 'securityfind-certificate-a{ 0 } grep-o"alis" *\\" grep-o\'\\"[-A- Za-z 0 - 9 ]*\\"\'' format quote keychain out salt ['cmd run'] cmd python shell True return out replace '"' '' split '\n'
def Joinable Queue maxsize 0 from multiprocessing queues import Joinable Queuereturn Joinable Queue maxsize
def cv 2 read file rgb filename im cv 2 imread filename if len im shape 2 im im[ np newaxis]if im shape[ 2 ] 1 im np tile im 1 1 3 if im shape[ 2 ] > 3 im im[ 3]im im[ -1 ]return im